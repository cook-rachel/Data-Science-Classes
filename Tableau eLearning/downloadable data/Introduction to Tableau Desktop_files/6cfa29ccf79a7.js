//15.154.4-es2019 2025-11-26T17:48:00.152Z (6cfa29ccf79a7)
var CS_CONF={"collectionEnabled":true,"projectId":210196,"status":1,"hostnames":["tableau.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":25,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":"replayRecordingUnmaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":0,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com","startMode":1};
var CS_INTEGRATIONS_CONF = {"optimizely":{}};
/* integration-optimizely 2.9.2 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}function t(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function i(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const o=JSON.parse('{"QC":"Optimizely","Mz":"AB_OP_","be":"OP_"}'),a=function(n){let t,i,o,a;if(e(function(){const e=n.name;t=n.version;const c=e.replace("@contentsquare/integration-","");i=c+"-"+t;let r="-contentsquare";a=new RegExp(r+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(r="-cap",a=new RegExp(r+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.9.2","scripts":{"build:snippet":"npx webpack"}}')),c=(a.parameterName,a.snippetBuildName),r=a.snippetVersion;e(function(){const a=o.QC,s=o.Mz,l=o.be;var u,p;function d(e,t){!function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=s+e,t);const o=t.endsWith(" [Holdback]");var a,r;n(`${o?"HB_":""}${i(e.replace(s,""))}/${o?t.replace(" [Holdback]",""):i(t)}`),n(`${l}${i(e.replace(s,""))}-${i(t)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}u=a,p=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+p);let m=!1;const g=[];!function(e,n,i){i=i||window;const o=e.split(".");if(1==o.length)t(e,n,i);else{let e=i,a=0;const c=function(){e=a>0?e[o[a-1]]:window,a++,a>=o.length?t(o[a-1],n,e):t(o[a-1],c,e)};c()}}("optimizely",function(){setTimeout(function(){e(function(){function n(){e(function(){const e=optimizely.get&&optimizely.get("state");if(e&&e.getCampaignStates&&"function"==typeof e.getCampaignStates&&"object"==typeof e.getCampaignStates()){const t=e.getCampaignStates({isActive:!0}),i=Object.keys(t);if(n=i,Array.isArray(n))for(let e=0;e<i.length;e++)if(-1===g.indexOf(i[e])){g.push(i[e]);const n=t[i[e]];if(n.experiment){let e,t;e=n.experiment.name?n.campaignName:n.experiment.id,t=n.experiment.campaignName&&n.experiment.name?n.experiment.name+" - "+n.variation.name:n.variation.name?n.variation.name:n.variation.id,n.isInCampaignHoldback&&(t+=" [Holdback]"),e&&t&&d(e,t)}}}var n},c)}n(),m||(m=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))},c)},500)})},c)})();
(()=>{var zh=Object.defineProperty;var qh=(s,r,t)=>r in s?zh(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var pe=(s,r,t)=>qh(s,typeof r!="symbol"?r+"":r,t);var le={};le.d=(s,r)=>{for(var t in r)le.o(r,t)&&!le.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};le.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();le.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);le.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var $n={};le.r($n);le.d($n,{getRequestParameters:()=>rp});function ws(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var at=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function Xt(s){return Z(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function ms(s){return s===parseInt(s,10)}function q(s){return Z(s)&&(typeof s=="string"||s instanceof csString)}function or(s){return typeof s=="boolean"}function fi(s){return typeof s=="object"}function Z(s){return typeof s!="undefined"}function Pt(s){return Z(s)&&s!==null}function tc(s){return typeof s=="object"&&s!==null}function Wh(s,r,t){return ms(s)&&s>=r&&s<=t}function mn(s){for(let r in s)return!1;return!0}function Ze(s){return typeof s=="function"}function _i(s){return s instanceof Element}function Ae(s){return s instanceof Error}function zn(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var xr={[at.debug]:0,[at.warn]:1,[at.implementation]:1,[at.error]:2,[at.critical]:3},it={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Yh(s){it=s}var V=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return ys(n,o.bind(this))(...c)}}};function ys(s,r){return function(...t){try{let e=r.apply(this,t);return Z(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>it.error(Ae(i)?i:new Error(i),s)):e}catch(e){try{it.error(Ae(e)?e:new Error(e),s)}catch{}}}}function lt(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function qn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Uo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function ec(s){let r=self.atob(s);return qn(r)}function yn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function jo(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){it.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?ec(e[1]):qn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var sc=typeof performance!="undefined"&&!!performance.now,Ho=sc?()=>performance.now():()=>csDate.now(),Xh=(()=>{var s,r;return sc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),Wn=34164e6,M={now(){return Math.round(Ho()+Xh)},elapsed(){return Ho()}};function Bo(){return Math.floor(M.now()/1e3)}function ic(){return typeof window.Promise=="function"}function Kh(){var s;return typeof crypto!="undefined"&&Ze((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Fo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Vt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function wi(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Jh=Number.MAX_SAFE_INTEGER||9007199254740991,Es={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Jh){return Math.floor(Math.random()*s)}},Ai=typeof window=="undefined";function Qh(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof le.g!="undefined"?le.g:typeof process!="undefined"?process:Function("return this")()}var st=Qh();function pi(s,r){let t,e,i,n,o,c=null,l=f=>{let d=M.elapsed();if(!f&&c!==null){let E=r-(d-c);if(E>=1){i=st.csSetTimeout(l,E);return}}let m=d-n;i=null,c=null,n=null,o=s.apply(t,[m,...e])},h=function(){if(t=this,e=arguments,n){c=M.elapsed();return}return n=M.elapsed(),i=st.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(st.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(st.csClearTimeout(i),i=null)},h}function Zh(s=0){return(r,t,e)=>{e.value=pi(e.value,s)}}var Ss=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=`${t===""?"":`${t}.`}${this.name}`,o=csArray.prototype.map.call(i,c=>({name:n,parameter:c,value:Math.round(e[c])}));return s.globalService.push(o),this.reset(),o.length>0}}return s.globalService=null,lt([V()],s.prototype,"flush",null),s})(),_t=(()=>{class s extends Ss{constructor(t,e=100){super(t),this.DE=e,this.values={},e&&(this.debouncedFlush=pi(()=>this.flush(),this.DE))}count(t,e=1){Ss.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),Go=(()=>{class s extends Ss{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){return this.count===0?!1:super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Ns=(()=>{class s extends Ss{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,f;let d=m=>this.values[`${t}.${m}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[f=`${t}.total`])!==null&&n!==void 0||(h[f]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=d("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=d("total")/d("count")}}return s})(),tu=(()=>{class s extends Ss{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;Ss.globalService&&((i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),$={counters:{commandsFromIntegrations:new _t("commands-from-integrations"),commandsFromCSTC:new _t("commands-from-cstc"),commandsFromIframe:new _t("commands-from-iframe"),commandApplied:new _t("command-applied"),commandError:new _t("command-error"),commandMisuse:new _t("command-misuse"),CSTCSnippetUsed:new _t("cstc-snippet-used"),redactedPII:new _t("redacted-pii"),pageAnonymisation:new _t("page-anonymisation"),patchedNativeFunctions:new _t("patched-native-functions"),pureWindowState:new _t("pure-window-state"),sensitiveElements:new _t("sensitive-elements"),cspErrors:new _t("csp-errors"),networkRequests:new _t("network-requests"),webVitalsErrors:new _t("web-vitals-errors"),trackedFeatures:new _t("tracked-features"),longTasks:new Go("long-tasks"),errors:new _t("errors"),methodPerformance:new Ns("perf"),downloadTime:new Ns("download-time",["max","average"]),transferSize:new Ns("transfer-size",["max","average"]),evalTime:new Ns("eval-time",["max","average"]),blockingTime:new Go("blocking-time"),inpContribution:new Ns("inp-contribution"),tasks:new Ns("tasks"),availableFeatures:new tu("available-features")},setService(s){Ss.setGlobalService(s)}},Ti=(()=>{class s{constructor(){this.ia=0}get length(){return this.ia}get isEmpty(){return!this.Qs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ia++,this.dn?this.dn=this.dn[1]=[t,void 0]:this.dn=this.Qs=[t,void 0]}pop(){if(!this.Qs)return null;this.ia--;let t=this.Qs[0];return this.Qs=this.Qs[1],this.Qs||(this.dn=void 0),t}forEach(t){let e=this.Qs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ia=0,this.Qs=this.dn=void 0}}return s})(),En=0,Yn=s=>{En++,csQueueMicrotask(()=>As(()=>{try{s()}finally{En--}},[he.MicroTask,"queueMicrotask"]))},ar=new Ti,cr=new Ti;function Ft(s,r="high"){ar.isEmpty&&cr.isEmpty&&rc(eu),r==="high"?cr.push($o(s)):ar.push($o(s))}function rc(s,r=10){r===0?Yn(s):csQueueMicrotask(()=>rc(s,r-1))}function eu(){for(;!cr.isEmpty;)cr.pop()();for(;!ar.isEmpty;)ar.pop()()}async function nc(s=1){for(let r=0;r<s;r++)await new Promise(t=>Ft(t))}function $o(s){return function(){try{s.apply(window,arguments)}catch(r){it.critical(r)}}}var rr="null",qe=null,oc=[],su=()=>{var s;return Ai||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ai&&su()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],qe=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Sn({type:"UXA_EVENT",event:s.detail})}),qe.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===rr)return;rr=s.data.sessionId,csArray.prototype.forEach.call(oc,r=>r()),qe==null||qe.postMessage({type:"CONNECTED",sessionId:rr})}}));function iu(s){Ai||(rr!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(oc,s)))}function Sn(s){qe==null||qe.postMessage(s)}function gi(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ke(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function ru(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function ac(s,r){let t=[];return ru(s,r,e=>csArray.prototype.push.call(t,e)),t}function J(s,r){if(nu(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function nu(s){return s.length>=0}function bi(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function ou(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function cc(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function au(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function zo(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function $s(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function cu(s){return csArray.isArray(s)&&s.length>0}var Ri=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),ge=(()=>{class s extends Ri{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var qo=(()=>{class s extends Ri{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),me=(()=>{class s extends Ri{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=M.elapsed();t(),this.count++;let i=M.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=M.elapsed();return()=>{this.count++;let e=M.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),lu=(()=>{class s extends Ri{constructor(){super("INP","Value: {value}")}getData(){return{value:kt.tasks.eventListener.max}}}return s})(),kt={general:{category:"General",nbEvents:new ge("Nb of Events"),pendingTasks:new ge("Pending Tasks"),pendingEvents:new ge("Pending Tasks"),nbOfMutationObservers:new qo("Nb of Mutation Observers"),inp:new lu},mutations:{category:"Mutations",initialDOM:new me("Initial DOM"),pendingMutations:new ge("Nb of Mutations scheduled"),serializedMutations:new me("Serialized Mutations"),count:new ge("Mutation Count"),elementMutationObserved:new qo("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new me("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new ge("Nb of Hidden Elements "),nbElements:new ge("Nb of  Elements")},tasks:{category:"Tasks",tasks:new ge("Tasks"),errors:new ge("Errors"),timer:new me("Timers"),microtask:new me("Microtasks"),mutationObserver:new me("MutationObserver"),monkeyPatch:new me("MonkeyPatch"),eventListener:new me("EventListener"),intersectionObserver:new me("Intersection")}};function hu(){let s=null;iu(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(kt),n=>kt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Ri));Sn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{As(()=>{let n=ac(Ke(e,o=>Ke(o,c=>c.getData())),o=>o);Sn({type:"UXA_PERFORMANCE_COUNTER",event:n})},[he.Timer,"performance-counter-interval"])},1e3))})}var he=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Dt=null,uu=["click","tap","keyup","keydown","pointerup","pointerdown"];async function As(s,r,t=null){if(Dt&&r[0]!==he.MicroTask)return s();t&&(Dt=t),Dt||(Dt={type:r[0],elapsed:0},kt.tasks.tasks.increase());try{Dt.elapsed+=du(s)}catch(e){kt.tasks.errors.increase(),it.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{En<=0&&(kt.tasks[Dt.type].elapsed(Dt.elapsed),Dt.elapsed>50&&($.counters.longTasks.push(Dt.elapsed),$.counters.blockingTime.push(Dt.elapsed-50)),$.counters.tasks.add(r[0],Dt.elapsed),csArray.prototype.includes.call(uu,r[1])&&$.counters.inpContribution.add(r[1],Dt.elapsed),Dt=null)}}function du(s){let r=M.elapsed();return s(),M.elapsed()-r}var Vr,fu="cs-native-frame";var Ve={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function lc(s,r){let t=ws(window,s);return function(e,i){return t(()=>As(e,[r,s]),i)}}window.csSetTimeout=lc("setTimeout",he.Timer);window.csSetInterval=lc("setInterval",he.Timer);window.csQueueMicrotask=(Vr=ws(window,"queueMicrotask"))!==null&&Vr!==void 0?Vr:setTimeout;window.csClearTimeout=ws(window,"clearTimeout");window.csClearInterval=ws(window,"clearInterval");window.csFileReader=ws(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function pu(){let s=document.createElement("iframe");s.id=fu,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function gu(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function mu(s,r,t){let e=gu(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function hc(s){var r,t;Object.keys(Ve.constructors).forEach(i=>{window[Ve.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Su(s);let e=s.MutationObserver;("Prototype"in window||Eu())&&(e=(t=(r=ws(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=Wo(window.IntersectionObserver,he.IntersectionObserver),window.csMutationObserver=Wo(e,he.MutationObserver),Ms("csNode",Ve.nodeProperties,s.Node.prototype,"get"),Ms("csElement",Ve.elementProperties,s.Element.prototype,"get"),Ms("csElement",Ve.elementPropertiesValues,s.Element.prototype,"value",!1),Ms("csHTMLImageElement",Ve.imageProperties,s.HTMLImageElement.prototype,"set"),Ms("csEvent",Ve.eventProperties,s.Event.prototype,"get"),Ms("csNavigator",Ve.navigatorProperties,s.navigator,"value")}function Ms(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=mu(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Xn(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function yu(){try{let s=pu();return s?(window.CSPureWindow=s,hc(window.CSPureWindow),!0):!1}catch(s){return Xn("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!yu())try{hc(st)}catch(s){Xn("Critical",`failed to copy references from window: ${s.message}`)}function Eu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Su(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function Wo(s,r){try{let t=function(e,i){return new s((o,c)=>{As(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return Xn("Warning",`failed to extends ${s.name}`),s}}var oe=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function vn(s){return oe.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function vu(s){let r=s.getAttribute("id");return r&&oe.escapeInvalidCharacters(r)}function ct(s){return csNodenodeType.apply(s)===1}function lr(s){return csNodenodeType.apply(s)===3}function _u(s){return csNodenodeType.apply(s)===8}function uc(s){return ct(s)&&s.localName==="link"}function wu(s){return ct(s)&&s.localName==="source"}function dc(s){return ct(s)&&s.localName==="a"}function Kn(s){return uc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Au(s){return ct(s)&&s.localName==="img"}function yr(s){return ct(s)&&s.localName==="style"}function Er(s){return ct(s)&&s.localName==="input"}function Jn(s){return ct(s)&&s.localName==="textarea"}function Sr(s){return ct(s)&&s.localName==="script"}function Tu(s){return ct(s)&&s.localName==="button"}function zs(s){return ct(s)&&"ownerSVGElement"in s}function Qn(s){return ct(s)&&s.localName==="select"}function bu(s){return ct(s)&&s.localName==="details"}function Ru(s){return ct(s)&&s.localName==="summary"}function Cu(s){return zs(s)&&s.localName==="image"}function Iu(s){return zs(s)&&s.localName==="use"}function Pu(s){return zs(s)&&s.localName==="feImage"}function Ou(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function Nu(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function hr(s){return csNodenodeType.apply(s)===9}function mi(s){return Ou(s)&&"host"in s&&"mode"in s}function fc(s){return ct(s)&&!!csElementshadowRoot.apply(s)&&mi(csElementshadowRoot.apply(s))}var Mu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Du(s){return ct(s)&&Pt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Mu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Ci="detached";function pc(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return ur(r)&&csArray.prototype.push.call(t,Ci),{ancestors:t,selectionRoot:r}}function ku(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&dc(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return ur(r)&&csArray.prototype.push.call(t,Ci),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function ur(s){return we.isValidElement(s)}var ls=(()=>{var s,r;return(r=(s=st.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),ee=ls.matches||ls.matchesSelector||ls.mozMatchesSelector||ls.msMatchesSelector||ls.oMatchesSelector||ls.webkitMatchesSelector,Yo=ls.closest,gc=9;function Lu(s,r){return r?csArray.prototype.some.call(r,t=>ee.call(s,t)):!1}function xu(s,r,t){if(s===Ci||csNodenodeType.apply(s)===gc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=vn(r),o=0,c=r.previousElementSibling;for(;c;)(vn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Lu(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Vu(s,r,t){if(s===Ci||csNodenodeType.apply(s)===gc)return 0;let e=0,i=r.previousElementSibling;for(;i;)ee.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Uu=[/\d{4}/,/^ember\d+$/],ju="@",Zn="data-cs-override-id",Hu="data-cs-dynamic-id";function mc(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=vn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${ju}`)),Gu(s,t)){let m=to(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Zn}="${m}"]`}}let c=Ku(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Bu(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=vu(s);if(zu(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let f=Fu(s,e);if(f){let m=Vu(r,s,f);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${f}](${m})`}}let d=xu(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${d})`}}function Bu(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(ee.call(s,e)&&Xu(e,r))return e}}function Fu(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(ee.call(s,t))return t}}function Gu(s,r){let t=to(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&eo(Zn,t,r)}function $u(s){return to(s)!==null}function to(s){return s.getAttribute(Zn)}function zu(s,r,t,e){return r&&!$u(s)&&!qu(s,r,e)&&Yu(r,t)}function qu(s,r,t){return s.hasAttribute(Hu)||Wu(r,t)}function Wu(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Uu,e=>e.test(s))||t)}function Yu(s,r){return s&&eo("id",s,r)}function eo(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Xu(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Ku(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&eo(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var _n=11;function dr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Xo(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=mc(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Xo(h,t)}${o}`}let l=dr(s,r,t);return`${l?`${l}>`:""}${o}`}function Xo(s,r){if(s===Ci)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=pc(s.host);return`${dr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===_n?"|fragment|":""}var yc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Ju=(()=>{class s extends yc{constructor(){super(...arguments),this.ra=!1,this.na=!1,this.Kc=!1}kE(t,e){return this.ra&&!(e===null&&ur(t))&&csNodenodeType.apply(t)!==_n&&!t.host}LE(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.kE(t,e))return;let o=!1;e===null&&ur(t)&&(o=!0,this.done=!0);let c=this.na&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Kc=!0,this.ra=!1,this.na=!1),!l&&e===null&&csNodenodeType.apply(t)===_n){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.LE(t))return;let h=e!=null?e:"detached",{elementSelector:f,hasUniqueIdentifier:d}=mc(t,h,i,this.options);d&&(this.na=!0,this.ra=!this.options.fullPath);let m=`${o?`|detached|${c}`:""}${this.ra&&!d?"":f}`,v=!d&&this.na&&!this.options.fullPath?"":this.path&&!this.Kc?">":"";this.Kc=!1,this.path=`${m}${v}${this.path}`}}return s})(),gt=(()=>{let s;return function(r){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let d=window.csScreen.width;return ms(d)&&d>0?d:window.screen.width}r.screenWidth=o;function c(){let d=window.csScreen.height;return ms(d)&&d>0?d:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function f(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=f}(s||(s={})),s})();function te(s,r=Ct.SHOW_ALL){let t=r|Ct.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Ko(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Ko(c);if(r&Ct.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(jr[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){jr[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((jr[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function Ko(s){return s&&fc(s)?s.shadowRoot:null}var Ur=(()=>{var s;return(s=st.Node)!==null&&s!==void 0?s:{}})(),Ct=(()=>{var s;return(s=st.NodeFilter)!==null&&s!==void 0?s:{}})(),jr={2:Ct.SHOW_ATTRIBUTE,4:Ct.SHOW_CDATA_SECTION,8:Ct.SHOW_COMMENT,11:Ct.SHOW_DOCUMENT_FRAGMENT,9:Ct.SHOW_DOCUMENT,10:Ct.SHOW_DOCUMENT_TYPE,1:Ct.SHOW_ELEMENT,[Ur.ENTITY_NODE]:Ct.SHOW_ENTITY,[Ur.ENTITY_REFERENCE_NODE]:Ct.SHOW_ENTITY_REFERENCE,[Ur.NOTATION_NODE]:Ct.SHOW_NOTATION,7:Ct.SHOW_PROCESSING_INSTRUCTION,3:Ct.SHOW_TEXT},Ec=!1,wn=5,Xi=50;function Qu(s=5){Ec=it.isPerfLoggingActive(),wn=s}function Ts(s,r){return function(){if(!Ec)return s.apply(this,arguments);let t=M.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=M.elapsed()-t;i>=wn&&$.counters.methodPerformance.add(r,i),i>Xi&&$.counters.blockingTime.push(i-Xi)});else{let i=M.elapsed()-t;i>=wn&&$.counters.methodPerformance.add(r,i),i>Xi&&$.counters.blockingTime.push(i-Xi)}return e}}var Ot=function(s){return function(r,t,e){let i=e.value;e.value=Ts(i,s)}},ps=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&fc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return te(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Ts(i,"getAllShadowHosts")}(s||(s={})),s})(),Hr=(()=>{var s;return(s=st.Node)!==null&&s!==void 0?s:Object})(),ft=(()=>{let s;return function(r){let t="isConnected"in Hr.prototype?_=>_.isConnected:_=>!_.ownerDocument||!(_.ownerDocument.compareDocumentPosition(_)&_.DOCUMENT_POSITION_DISCONNECTED);function e(_,L){for(let x=_;x;x=csNodenextSibling.apply(x))L(_)}r.forEachChild=e;function i(_){return t(_)}r.isConnected=i;function n(_,L){let x=[];for(let H of l(_,L))csArray.prototype.push.call(x,H);return x}r.getAncestors=n;let o=(_,L)=>{var x;return(x=csNodeparentNode.apply(_))!==null&&x!==void 0?x:L&&mi(_)?_.host:null};function c(_,L,x=!1){let H=_;for(;H;){if(L(H))return H;let ht=o(H,x);if(ht&&ht!==H)H=ht;else break}return null}r.findAncestor=c;function*l(_,L=!1){let x=_;for(;x;){yield x;let H=o(x,L);if(H&&H!==x)x=H;else break}}r.walkUp=l;function h(_,L){if(_===L||L.contains(_))return!0;let x=r.getParentElement(_);return x&&x!==_?h(x,L):!1}r.isDescendantOf=h;function f(_){var L;return _.parentElement?_.parentElement:r.getRootNode(_)?(L=r.getRootNode(_))===null||L===void 0?void 0:L.host:null}r.getParentElement=f;function d(_,L=document){let x=gi(window.csquerySelectorAll[L.nodeType].call(L,_)),H=ps.getAllShadowHosts(L);for(let ht of H){let Et=ps.getShadowRoot(ht);if(!Et)continue;let fe=gi(window.csquerySelectorAll[Et.nodeType].call(Et,_));csArray.prototype.push.call(x,...fe)}return x}r.findAllElements=d,r.getRootNode=(()=>{if("getRootNode"in Hr.prototype)return(x,H)=>x.getRootNode(H);function _(x){let H=L(x);return mi(H)?_(H.host):H}function L(x){return csNodeparentNode.apply(x)!=null?L(csNodeparentNode.apply(x)):x}return(x,H)=>typeof H=="object"&&!!H.composed?_(x):L(x)})();function m(_){return _==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(_)}function E(_){let L=_.getBoundingClientRect();return L.right+gt.windowOffsetX()<0||L.bottom+gt.windowOffsetY()<0}function v(_){var L,x;if(((L=_.checkVisibility)===null||L===void 0?void 0:L.call(_,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!_.offsetParent){if(!_.getBoundingClientRect)return it.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${_ instanceof Hr} Ctor: ${(x=_==null?void 0:_.constructor)===null||x===void 0?void 0:x.name}`),!1;let Et=_.getBoundingClientRect();if(Et.width===0&&Et.height===0)return!0}let H=window.getComputedStyle(_);return H?H.display==="none"||H.visibility==="hidden"||H.visibility==="collapse"||H.opacity==="0"||H.filter==="opacity(0)"||H.width==="0px"&&H.height==="0px"||m(H.color):!0}r.isHiddenByCSS=v;function C(_){if(v(_))return!0;let x=f(_);return x!=null&&C(x)}r.areAncestorsHiddenByCSS=C;function P(_){let L=null,x=_;do if(v(x))L=x;else break;while(x=f(x));return L}r.getTopAncestorHiddenByCSS=P;function S(_){let L=w(_);return L!==null&&!_.contains(L)&&!L.contains(_)}function w(_){let L=_.getBoundingClientRect(),x=L.left+.5*L.width,H=L.top+.5*L.height;return O(document,x,H)}r.getTopElement=w;function I(_){if(!_.getBoundingClientRect)return null;let L=_.getBoundingClientRect(),x=L.x+L.width/2,H=L.y+L.height/2;return r.getTopElementFromPoint(document,x,H)}r.getElementOnTop=I;function O(_,L,x){let H=_.elementFromPoint(L,x);if(!H)return null;let ht=ps.getShadowRoot(H);return ht&&ht!==r.getRootNode(document.body)&&ht!==_?O(ht,L,x):H}r.getTopElementFromPoint=O;function T(_){return!E(_)&&!v(_)&&!S(_)}r.isVisibleInDocument=T;function U(_){return v(_)?!1:tt(_)}r.isVisibleInViewportInForeground=U;function tt(_){let L=w(_);return L===null?!1:_===L?!0:Nt(_)?_.textContent!==""&&L.contains(_):_.contains(L)}r.isInViewPort=tt;function ot(_,L,x){let H=_.getAttributeNS(L,x);return H===""?_.hasAttributeNS(L,x)?H:null:H}r.getAttributeNS=ot;function Gt(_){return!!(_.hasAttribute("tabIndex")||_.getAttribute("contentEditable")==="true"||dc(_)&&_.hasAttribute("href")||(Qn(_)||Jn(_)||Er(_)||Tu(_))&&!_.hasAttribute("disabled")||bu(_)||Ru(_))}r.isElementFocusable=Gt;function Nt(_){return _.localName==="span"||_.localName==="a"||_.localName==="b"||_.localName==="i"||_.localName==="button"||_.localName==="input"||_.localName==="label"||_.localName==="cite"||_.localName==="small"||_.localName==="strong"||_.localName==="code"||_.localName==="abbr"||_.localName==="em"||_.localName==="dfn"||_.localName==="time"||_.localName==="output"||_.localName==="object"||_.localName==="sub"}r.isInlineElement=Nt;function $t(_){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>_(),{once:!0}):csSetTimeout(_)}r.onDocumentLoaded=$t}(s||(s={})),s})(),Zu=(()=>{class s{constructor(t){this.xE=t}run(t){let e=[...this.xE],i=ft.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.VE(e,o,c,n),this.UE(e),e.length===0)break;i.length===0&&o.host&&(i=ft.getAncestors(o.host,!1),n=i[i.length-1])}}VE(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}UE(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),td=(()=>{class s extends yc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.jE(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}jE(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.HE(t.id),t.classList&&(e+=this.BE(csArray.from(t.classList))),t.attributes&&(e+=this.FE(t)),e}HE(t){return t?`#${t};`:""}BE(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}GE(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||zs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Er(t)&&e==="value"}$E(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}zE(t){let e={};for(let i of csArray.from(t.attributes))this.GE(t,i.name)||(e[i.name]=i.value);return e}FE(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.zE(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.$E(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),we=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let f=o(c);if(f===document)return{path:"",hierarchy:""};if(!t(f))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let d=new Ju(h),m=new td(l);return new Zu([d,m]).run(f),{path:d.getPath(),hierarchy:m.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:f,selectionRoot:d}=pc(h);return dr(f,d,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:f,ancestors:d,selectionRoot:m}=ku(h);return{path:dr(d,m,l),firstAnchorParent:f}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||we;var Sc=["t.contentsquare.net","clicktale"],ed=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Sc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,F.critical(t)}};window.addEventListener("error",ed);var F=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Sc,t)}static setStrategy(t){s.ur=t}static computeIsActive(t){s.Fe=Es.boolean(t),s.Fe?s.Jc=Es.boolean(10):s.Jc=!1}static isLoggingActive(){return s.Fe}static getStrategy(){return s.ur}static debug(t,e=""){s.Fe&&this.ur.send(t,e,at.debug)}static warn(t,e=!0,i=""){var n;$.counters.errors.count("warning"),s.Fe&&e&&this.ur.send(t,i,at.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){$.counters.errors.count("implementation"),s.Fe&&this.ur.send(t,e,at.implementation)}static error(t,e=""){var i;$.counters.errors.count("error"),s.Fe&&this.ur.send(t,e,at.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){$.counters.errors.count("critical"),this.ur.send(t,e,at.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Z(st.Promise)&&n instanceof st.Promise?n.then(o=>o,o=>s.error(Ae(o)?o:new Error(o),t)):n}catch(n){try{s.error(Ae(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.Jc}}return s.Fe=!1,s.Jc=!1,s})();function ae(s){return Vt(s,"data:")}function sd(s){return Vt(s,"#")}function id(s){return!!s&&(wi(s,".css")||Vt(s,"https://fonts.googleapis.com/css"))}var rd=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],so=s=>{let r=new Set(rd);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},nd=["svg","slot"],od=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(nd,s)>-1,vc={href:new Set(["a"]),src:new Set(["iframe"])},ad=s=>vc.hasOwnProperty(s),cd=(s,r,t)=>{var e;return((e=vc[r])===null||e===void 0?void 0:e.has(s))&&!ae(t)},ld=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function Br(s){return s?hd(s):null}function hd(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var ud=/^\d+\.\d+(?:\.\d+)?$/,dd=s=>{if(!ud.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},fd=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,pd=(s,r)=>fd(s,r)>=0,gd=1,md="f553e78fb58e051e51fe8074c4c6e73e",An=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),fr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),yd=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,f,d,m,E,v,C,P,S;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||Wn,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(f=t.customErrorsEnabled)!==null&&f!==void 0?f:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Br(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Br(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Br(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(d=t.recordingUrlRules)!==null&&d!==void 0?d:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((m=t.uxaDomain)===null||m===void 0?void 0:m.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(E=t.anonymizeDigits)!==null&&E!==void 0?E:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(v=t.recordTargetingRules)!==null&&v!==void 0?v:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(C=t.collectTargetText)!==null&&C!==void 0?C:An.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(P=t.quotas)!==null&&P!==void 0?P:null,this.startMode=(S=t.startMode)!==null&&S!==void 0?S:fr.Automatic,this.customEnhancerConfig=t.customEnhancerConfig||null}getTrackerUri(){return`${this.ws()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.ws()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${md}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.ws()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.ws()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ws()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ws()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.ws()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.ws()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.ws()}://${this.paProxyDomainUri}`}ws(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===gd}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.qE(n,o)}})}qE(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&ms(e)&&csArray.prototype.includes.call(Object.values(fr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.ef()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.ef())return!0;let t=dd(this.getHeapVersion()||"");if(t&&t.major===4&&pd(t,{major:4,minor:23,patch:5}))return!0}return!1}ef(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==An.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Ed=(()=>{class s{constructor(t,e){this.oa=t,this.sf=e}init(){this.rf=this.oa!==this.oa.top,this.nf=this.sf.isWebView&&this.oa===this.oa.top,this.sf.iframesTracking&&this.rf||this.nf?this.of=!1:this.of=!0}isInIframeContext(){return this.rf}isTopWindowTracker(){return this.of}isInWebViewContext(){return this.nf}}return s})();function Jo(){}function Tn(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Sd(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Fr=csSymbol("cachedJson");function vd(s){if(s[Fr])return s[Fr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+vs(s[0]);for(let t=1;t<s.length;t++)r+=","+vs(s[t]);return r+="]"}return s[Fr]=csJSON.stringify(s)}var vs=typeof window.Symbol!="undefined"?vd:csJSON.stringify;var yi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),_c=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Bs=(()=>{class s extends _c{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.Qc(t);let e=yi.toQuery(t);this.WE(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}WE(t){let e=new window.Image(1,1);e.onload=Jo,e.onerror=Jo,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}Qc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var _d=(()=>{class s{constructor(t,e){this.As=t,this.YE=e}init(){this.Ts=new Bs(this.As.getLoggerUri()),this.Ts.setRequestParametersProviders(this,this.YE)}send(t){this.aa=t,this.Ts.send()}getRequestParameters(){return{a:this.aa.app,l:this.aa.level,m:this.aa.message,s:this.aa.stacktrace}}}return s})(),wd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Ad=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Td="CS_ANONYMIZED_EMAIL",Gr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",bd=new csRegExp(`(ey${Gr}\\.ey${Gr}\\.${Gr})`,"g"),Rd="CS_ANONYMIZED_JWT",Cd=/[0-9]{4}/,Id=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Pd="CS_ANONYMIZED_PII",Od="\u2022",Nd=/\d/g,Md=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Dd=/(?:\d{1,3}\.){3}\d{1,3}/,kd=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Ue=(()=>{let s;return function(r){function t(f){return csString.prototype.replace.call(f,wd,Td)}r.replaceEmail=t;function e(f){return csString.prototype.replace.call(f,bd,Rd)}r.replaceJWT=e;function i(f,d){return csString.prototype.replace.call(f,Id,d)}r.replaceCreditCardNumber=i;function n(f){return csString.prototype.replace.call(f,Nd,Od)}r.replaceDigits=n;function o(f){return Dd.test(f)||kd.test(f)}r.mayHaveIPAddress=o;function c(f){return Md.test(f)}r.mayHaveNumberSequence=c;function l(f){return Cd.test(f)}r.mayHaveCreditCardNumber=l;function h(f){return Ad.test(f)}r.mayHaveEmail=h}(s||(s={})),s})(),qs=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.XE(this.Zc(t));return e===!0?i=this.KE(i):e===!1&&(i=this.JE(i)),i}anonymizePII(t){return this.Zc(t)}anonymizeJwt(t){return Ue.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.Zc(t[i])}),t}Zc(t){if(Ue.mayHaveEmail(t)){let e=Ue.replaceEmail(t);return e!==t&&$.counters.redactedPII.count("email"),e}return t}KE(t){return Ue.replaceDigits(t)}JE(t){return Ue.mayHaveNumberSequence(t)?Ue.replaceDigits(t):t}XE(t){return Ue.mayHaveCreditCardNumber(t)?Ue.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.QE(h))return e;$.counters.redactedPII.count("cc")}else $.counters.redactedPII.count("cc-partial");return`${i}${Pd}${c}`}):t}QE(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),wc="15.154.4";function io(){return{v:wc}}var Ld=(()=>{class s{constructor(t,e){this.E=t,this.D=e}getRequestParameters(){return{d:`${M.now()}`,p:this.D.anonymizePII(window.location.href),...this.E.getRequestParameters(),...io()}}}return s})(),xd="uxa",Qo=5,Vd="No stacktrace",Ac="snippet-",Tc="implementation-snippet-",Zo=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),Ud=(()=>{class s{constructor(t,e,i){this.bs=e,this.D=new qs,this.af=xr[at.warn],this.af=xr[t.minLogLevel||at.warn],this.Ts=i||new _d(t,new Ld(t,this.D)),this.cf={[at.debug]:[],[at.warn]:[],[at.implementation]:[],[at.error]:[],[at.critical]:[]},this.ca={implementation:{},dynamic:{}},this.Ts.init()}send(t,e="",i=at.warn){if(!this.ZE(i,e))return;csArray.prototype.push.call(this.cf[i],e||"");let n={message:this.tS(t,e),stacktrace:this.eS(t),app:xd,level:i};this.Ts.send(n)}tS(t,e){let i=Ae(t)?this.D.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}eS(t){return Ae(t)?`${t.stack||Vd} ${this.En()}`:this.En()}En(){let t=this.bs.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.bs.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}ZE(t,e){if(xr[t]<this.af)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Tc,0))===0)return this.lf(e,Zo.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Ac,0))===0)return this.lf(e,Zo.DYNAMIC);let i=this.cf[t];return i.length>=Qo?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}lf(t,e){return t in this.ca[e]?this.ca[e][t]>=Qo?!1:(this.ca[e][t]+=1,!0):(this.ca[e][t]=1,!0)}}return s})(),At=!Ai&&document.createElement("a"),jd=/(:443|:80)$/;function ve(s){return At?(At.href=s,At.href):""}function Hd(s,r){return new csURL(s,r).href}function Bd(s,r){return csArray.prototype.some.call(r,t=>wi(s,`.${t}`)||s===t||t==="")}function Fd(s){return s[0]==="/"?s:`/${s}`}function ta(s){return csString.prototype.replace.call(s,jd,"")}function bc(s){return!At||!Vt(s,"http://")&&!Vt(s,"https://")?null:(At.href=s,{hash:At.hash,host:ta(At.host),hostname:At.hostname,href:At.href,origin:At.origin?At.origin:ta(`${At.protocol}//${At.host}`),pathname:Fd(At.pathname),port:At.port,protocol:At.protocol,search:At.search})}var wt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var Gd=(()=>{class s{setContext(t,e){this.O=t,this.R=e}getVisitorService(){return this.O}getSessionService(){return this.R}}return s})(),bn=!1;function $d(){bn=!0}function Tt(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&bn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&bn||e.call(this,i,n)}}}}function zd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function B(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function qd(){let s=new MutationObserver(r=>{r.forEach(t=>{J(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&($.counters.pureWindowState.count("iframe-deletion"),it.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function ea(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Wd(){(!ea(MutationObserver)||!ea(MutationObserver.prototype.observe))&&$.counters.patchedNativeFunctions.count("MutationObserver")}function Yd(){try{window.CSPureWindow&&qd(),Wd()}catch{}}var dt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let f=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return f?decodeURIComponent(f[2]):null}r.get=t;function e(l,h,f,d,m,E){let v=encodeURIComponent(`${h}`),C=f===r.CURRENT_DOMAIN?void 0:f,P=i(d),S=P?`;expires=${P.toUTCString()}`:"",w=";path=/",I=Pt(C)?`;domain=${C}`:"",O=`${l}=${v}${S}${w}${I}`;return Z(m)&&m!==We.NotSet&&(O=`${O};SameSite=${m}`),Z(E)&&E===ne.Yes&&(O=`${O};Secure`),document.cookie=O,!0}r.set=e;function i(l){return Xt(l)?new csDate(M.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),We.None,ne.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let f="_cs_root-domain",d=t(f);if(d!==null&&d!=="1")return d;let m=csString.prototype.split.call(window.location.hostname,"."),E=csArray.prototype.pop.call(m);for(;m.length&&(d===null||d==="1");)E=csArray.prototype.join.call([csArray.prototype.pop.call(m),E],"."),e(f,E,E,void 0,l,h),d=t(f);return n(f,E),E}r.getRootDomain=c}(s||(s={})),s})(),Xd=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),We=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ne=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),vr=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.Pi=i,this.tl=!1,this.hf=We.NotSet,this.sl=ne.No}getSameSiteFlag(){return this.hf}getSecureFlag(){return this.sl}getDomain(){return this.il}getRootDomain(){return this.uf}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.sS(),e=this.iS();this.tl=this.rS(t,e),this.tl?(this.hf=t,this.sl=e):this.E.secureCookiesEnabled&&this.C.getUrlProtocol()==="https:"&&(this.sl=ne.Yes),this.uf=this.nS(),this.il=this.oS(this.uf)}rS(t,e){return Xd.browserIsSafariV12()?!1:(dt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),dt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(dt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}sS(){return this.C.getUrlProtocol()==="http:"?We.Lax:this.Pi.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?We.None:We.Lax}iS(){return this.C.getUrlProtocol()==="http:"?ne.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Pi.isSameSiteNoneSecureNeeded()?ne.Yes:ne.No}isSameSiteSupported(){return this.tl}set(t,e,i,n){let o=dt.toExpireDate(i),c=n?ne.Yes:this.getSecureFlag();dt.set(t,e,this.il,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.il;dt.remove(t,i)}nS(){let t=this.Pi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?We.None:void 0,i=t?ne.Yes:void 0;return dt.getRootDomain(e,i)}oS(t){return this.E.allowSubdomains?t:dt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ds="_cs_t",sa="1",Kd=(()=>{class s{constructor(t,e){this.Rt=t,this.E=e,this.ha=!1,this.ua=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.Rt.isTopWindowTracker()&&"cookie"in document){if(!this.Rt.isInIframeContext()&&dt.isCookiePresent()){this.ha=!0,this.ua=!1;return}if(dt.set(Ds,sa,dt.CURRENT_DOMAIN),dt.get(Ds)!==null){this.ha=!0,this.ua=!1,dt.remove(Ds,dt.CURRENT_DOMAIN);return}dt.set(Ds,sa,dt.CURRENT_DOMAIN,void 0,We.None,ne.Yes),dt.get(Ds)!==null&&(this.ha=!0,this.ua=!0,dt.remove(Ds,dt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.ha}isSameSiteNoneSecureNeeded(){return this.ua}}return s})();function Jd(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Qd=(()=>{class s{constructor(t,e){this.E=t,this.Pi=e}canTrack(){return this.E.isProjectActive()&&this.aS()&&this.df()&&this.cS()}canTrackInChild(){return this.E.isProjectActive()&&this.lS()&&(this.df()||this.hS())}cS(){return this.E.cookielessTrackingEnabled?Jd():this.Pi.areCookiesEnabled()}df(){return Bd(window.location.hostname,this.E.hostnames)}aS(){return!this.ff()&&this.uS()}lS(){return!this.ff()&&this.dS()}hS(){return window.location.protocol==="about:"&&window.location.hostname===""}ff(){return"visibilityState"in document&&document.visibilityState==="prerender"}uS(){return this.pf()&&this.fS()}dS(){return this.pf()}fS(){try{return!!window.localStorage}catch{return!1}}pf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Rc=":";function ia(s){let r=[],t=Zd(s),e=csString.prototype.split.call(t,"/");for(let i of e)Vt(i,Rc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function Zd(s){let r=s;return Vt(s,"/")&&(r=csString.prototype.substring.call(r,1)),wi(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var tf=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,ef="$1CS_ANONYMIZED_NAME",sf=(()=>{class s{constructor(t){this.D=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.D.anonymizePII(t);if(o=this.D.anonymizeJwt(o),e.maskNames){let h=o;o=this.Sn(o),o!==h&&($.counters.redactedPII.count("name"),$.counters.redactedPII.count("name-in-url"))}let c=this.pS(o,i);if(c!==o)return $.counters.redactedPII.count("url"),c;let l=this.gS(o,n);return l!==o&&$.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.rl(t);return i!==""?`${e}?`:e}rl(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}pS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.rl(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.mS(o,c);if(l!==null)return`${l}${n}`}return t}mS(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.gf(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}gS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.rl(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.yS(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}yS(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],f=e[n].key;if(this.gf(f)&&l>=c){let d=e[n].value;csArray.prototype.push.call(i,h.length>0?d:""),n++,n===e.length&&(n=0);continue}if(h===f){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let d=0;d<n;d++){let m=l-n+d;i[m]=t[m]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}gf(t){return Vt(t,Rc)}Sn(t){return csString.prototype.replace.call(t,tf,ef)}}return s})(),rf="spki",ra="RSA-OAEP",nf="SHA-256",na="AES-CTR",of="SHA-1",oa=190,oi=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=st.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function f(){var O,T;return((T=(O=st.self.crypto)===null||O===void 0?void 0:O.subtle)===null||T===void 0?void 0:T.encrypt)!=null&&st.self.CryptoKey!=null}r.isSupported=f;async function d(O){n=r.crypto.importKey(rf,ec(O),{name:ra,hash:nf},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||it.warn(`Fail to import public key '${O}'`)}r.importKey=d;async function m(O){if(!f()||e)return null;await n;let T=qn(O);T.byteLength>oa&&(T=T.slice(0,oa));try{let U=await r.crypto.encrypt({name:ra},i,T);return Uo(U)}catch{return null}}r.asymmetricEncrypt=m;async function E(O,T){if(!f()||e)return null;let U={counter:T.initializationVector,name:na,length:64},tt=o.encode(O);try{let ot=await r.crypto.encrypt(U,T.cryptoKey,tt);return Uo(ot)}catch{return null}}r.symmetricEncrypt=E;async function v(O){let T=await C(O);if(!T)throw new Error("Export secret failed");let U=await m(T);if(!U)throw new Error("Encrypt secret failed");return U}r.encryptSecret=v;async function C(O){var T;if(!f())return null;try{return(T=(await r.crypto.exportKey("jwk",O)).k)!==null&&T!==void 0?T:null}catch{return null}}async function P(){if(!f()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:na,length:128},!0,["encrypt","decrypt"]),initializationVector:st.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=P;function S(O){c=O}r.setDigestSalt=S;async function w(O){O=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(O)),c&&(O=`${O}:${c}`);let T=o.encode(O);try{let U=await r.crypto.digest(of,T);return yn(U)}catch{return null}}r.digest=w;function I(){return st.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=I}(s||(s={})),s})(),ye=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),je=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),as=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),ro=(()=>{class s{constructor(){this.nl=[]}setRegexRules(t){this.nl=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.ES(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.nl,e=>this.mf(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.nl,e=>this.mf(t,e)),e=>e.ruleInput)}mf(t,e){var i,n;let o=this.SS(t,e);return!this.vS(e)||!this._S(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}vS(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}_S(t){let e=t.samplingRate!==100,i=e&&Es.boolean(t.samplingRate);return!e||i}da(t){return!Vt(t,"http://")&&!Vt(t,"https://")?`https://${t}`:t}SS(t,e){let i=bc(this.da(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}fa(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}ES(t){let e=null,i=!1;switch(t.operator){case je.NOT_START:case ye.NOT_START:i=!0;case je.START:case ye.START:e=new csRegExp(`^${t.value}`,this.fa(t));break;case je.NOT_END:case ye.NOT_END:i=!0;case je.END:case ye.END:e=new csRegExp(`${t.value}$`,this.fa(t));break;case je.NOT_CONTAIN:case ye.NOT_CONTAIN:i=!0;case je.CONTAIN:case ye.CONTAIN:case ye.REGEX:e=new csRegExp(`${t.value}`,this.fa(t));break;case je.NOT_EXACT:case ye.NOT_EXACT:i=!0;case je.EXACT:case ye.EXACT:e=new csRegExp(`^${t.value}$`,this.fa(t));break;default:it.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.yf(t.startDate):void 0,o=t.endDate?this.yf(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}yf(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),no=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),ai="|iframe|",af=(()=>{class s extends no{constructor(t,e,i,n){super(),this.wS=t,this.AS=e,this.TS=i,this.bS=n}emitIframeEvent(t,e,i){if(this.RS(e)&&t===null){F.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case wt.ChildLogMessage:this.CS(i);break;case wt.AnalysisEvent:{let n=i,o=this.wS.transformEvent(t,n);o.isUserEvent?this.IS(o.event):this.PS(o.event);break}case wt.RecordingEvent:{let n=i,o=this.bS.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.OS(o.events):this.NS(o.events);break}case wt.JavascriptError:this.MS(i);break;case wt.ApiError:this.DS(i);break;case wt.DetailedApiError:this.kS(i);break;case wt.CustomError:this.LS(i);break;case wt.EmerchandisingMessage:{let n=this.TS.transformEvent(t,i);this.xS(n);break}case wt.Commands:{let n=this.AS.transformEvent(t,i);this.VS(n);break}case wt.IntegrationCallback:this.US(i);break;case wt.StaticResource:this.jS(i);break;case wt.TrackingContextRequestMessage:this.HS(i);break;default:F.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}RS(t){let e=[wt.AnalysisEvent,wt.RecordingEvent,wt.EmerchandisingMessage,wt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}CS(t){let{message:e,errorCode:i,level:n}=t;switch(n){case at.debug:F.debug(e,i);break;case at.warn:F.warn(e,!0,i);break;case at.implementation:F.implementation(e,i);break;case at.error:F.error(e,i);break;case at.critical:F.critical(e,i);break}}IS(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}PS(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}OS(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}NS(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}MS(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}DS(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}kS(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}xS(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}VS(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}US(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}jS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}HS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}LS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),$r=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),Ye=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function cf(s){return s.tgtHM!==void 0}function Cc(s){return s.tgt!==void 0}function lf(s){return s.tgtLk!==void 0}function hf(s){return s.x!==void 0&&s.y!==void 0}function uf(s){return s===$r.SUCCESS||s===$r.FAILURE||s===$r.ATTEMPT}function df(s){return s===Ye.APPCUES||s===Ye.CHAMELEON||s===Ye.CONTENTSQUARE||s===Ye.SEGMENT||s===Ye.WEB}var ff=Math.pow(2,31);function pf(s,r=0){let l=r>>>0,h=s.length;for(let E=0;E<h-3;E+=4){let v=(csString.prototype.charCodeAt.call(s,E)&255|(csString.prototype.charCodeAt.call(s,E+1)&255)<<8|(csString.prototype.charCodeAt.call(s,E+2)&255)<<16|(csString.prototype.charCodeAt.call(s,E+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let f=0,d=h&3,m=h-d;switch(d){case 3:f^=(csString.prototype.charCodeAt.call(s,m+2)&255)<<16;case 2:f^=(csString.prototype.charCodeAt.call(s,m+1)&255)<<8;case 1:f^=csString.prototype.charCodeAt.call(s,m)&255,f=Math.imul(f,3432918353),f=f<<15|f>>>17,f=Math.imul(f,461845907),l^=f}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Ic(s){return pf(s)+ff>>>0}var gf=(()=>{class s{constructor(t,e,i){this.J=t,this.Ef=e,this.Sf=i}transformEvent(t,e){this.BS(t,e.event);let i=this.J.getElementPath(t);return this.FS(i,e.event),this.GS(e.event),e}BS(t,e){if(hf(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+gt.windowOffsetX()),e.y=Math.round(i.top+e.y+gt.windowOffsetY())}}FS(t,e){Cc(e)&&(e.tgt=`${t}${ai}${e.tgt}`),cf(e)&&(e.tgtHM=`${t}${ai}${e.tgtHM}`,this.Ef||(e.tgtHMH=Ic(e.tgtHM))),lf(e)&&(e.tgtLk=`${t}${ai}${e.tgtLk}`)}GS(t){!this.Ef&&this.Sf&&this.Sf.enhanceAnalysisEvent(null,t)}}return s})(),mf=(()=>{class s{constructor(t){this.J=t}transformEvent(t,e){let i=this.J.getElementPath(t);return{iframePath:e.iframePath?`${i}${ai}${e.iframePath}`:i,commands:e.commands}}}return s})(),yf=(()=>{class s{constructor(t){this.J=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.J.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${ai}${o.targetPath}`}));return{...e,products:n}}}return s})(),Ef=1,aa=csSymbol("nodeIdentifier");function G(s){let r=s[aa];return r!=null?r:s[aa]=Ef++}var k=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ei=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Sf=(()=>{class s{constructor(){this.$S={clientX:2,clientY:3},this.zS={clientX:1,clientY:2},this.qS=[k.POINTER_DOWN,k.POINTER_MOVE,k.POINTER_UP],this.WS=[k.TOUCH_START,k.TOUCH_MOVE,k.TOUCH_END]}transformEvents(t,e){if(!ft.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==k.VISIBILITY_CHANGE),e.events.length===0||(F.warn(`IframeRecordingEventsTransformer received event ${wt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=G(t),n=null;csArray.prototype.some.call(e.events,c=>this.vf(c)||this._f(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.vf(c)?this.YS(n,c):this._f(c)&&this.XS(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}XS(t,e){this.wf(this.zS,t,e)}YS(t,e){this.wf(this.$S,t,e)}wf(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}vf(t){return csArray.prototype.indexOf.call(this.qS,t.type)!==-1}_f(t){return csArray.prototype.indexOf.call(this.WS,t.type)!==-1}}return s})(),vf=(()=>{class s{constructor(t,e){this.S=t,this._t=e}init(){this._t.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})(),Rt=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})();var Ut=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),_f=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),wf=(()=>{class s extends Ut{constructor(t){super(),this.ol=t,this.cs={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return $.counters.commandApplied.count(n),l}catch(l){l instanceof Rt?($.counters.commandMisuse.count(n),F.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Ae(l)?l.stack:l}`)):($.counters.commandError.count(n),F.error(`Command Error - ${n}: ${Ae(l)?l.stack:l}`))}};this.cs[n]={callback:o,configuration:i},this.cs}}onStart(){this.KS(),this.JS()}onStop(){for(let t of this.ol)window[t]=[]}applyFromIntegration(t,e,i){this.Af(t,e,`Commands.apply.from.integration: ${i}`),$.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Af(t,e,`Commands.apply.from.implementation: ${i}`),$.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.QS(e.name,e.params,t.iframePath),$.counters.commandsFromIframe.count(e.name)}Af(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}F.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}QS(t,e,i){F.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}KS(){for(let t of this.ol)window[t].forEach(([e,...i])=>this.Tf(e,i,!1))}JS(){for(let t of this.ol)window[t]={push:([e,...i])=>this.Tf(e,i,!0)}}Tf(t,e,i){var n,o;if(this.cs[t]){if(((n=this.cs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.cs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){F.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Af=(()=>{class s extends no{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function Tf(s){return csNodenodeType.apply(s)===1}function mt(s){let r=csEventtarget.apply(s);return r&&Tf(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function bf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Rf(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(mt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Cf=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],If=1024,Pf=1024,zr;function ci(s){if(zr||(zr=document.createElement("div")),!(!!s&&q(s)))return it.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return ee.call(zr,s),!0}catch{return it.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Rn(s,r){if(Yo)return Yo.call(s,r);let t=s;do{if(ee.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function Us(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=Us(s[t]);return r}default:return s}}function Pc(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function Oc(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?Us(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=Oc(n,o);h!==void 0&&(t[i]=h)}else t[i]=Us(o)}return Pc(t)?t:void 0}function Nc(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Nc(n,o):t[e]=o}return t}function Of(s){let r=null;return t=>t?r=t:r||(r=s())}var Nf=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function Mf(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Nf.has(s)}var ks=Of(()=>new WeakMap),li=(()=>{let s;return function(r){function t(c){return ks().get(c)}r.getAll=t;function e(c,l){var h;return(h=ks().get(c))===null||h===void 0?void 0:h[l]}r.get=e;function i(c,l,h){let f=ks().get(c);f||ks().set(c,f={}),f[l]=h}r.set=i;function n(c,l){let h=ks().get(c);h&&delete h[l]}r.remove=n;function o(){ks(new WeakMap)}r.reset=o}(s||(s={})),s})(),et=(()=>{let s;return function(r){function t(l,h,f){var d;if(typeof Node!="undefined"&&l instanceof Node)li.set(l,h,f);else{let m=l;(d=m.props)!==null&&d!==void 0||(m.props={}),m.props[h]=f}}r.setProperty=t;function e(l,h){var f;return typeof Node!="undefined"&&l instanceof Node?li.get(l,h):(f=l.props)===null||f===void 0?void 0:f[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?li.getAll(l):l.props}r.getProperties=i;function n(l,h){let f=null;return o(l,(d,m,E)=>h(d)&&(f=d)&&!!E()),f}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,f){let d=!1;if(f(l,h,()=>d=!0),d)return;let E=l.shadowRoot;E&&c(E,l,f);let v=l.children;if(v!=null&&v.length){for(let C of v)if(C&&(c(C,l,f),d))break}}}(s||(s={})),s})(),D=(()=>{let s;return function(r){let t;(function(S){S[S.NotMasked=0]="NotMasked",S[S.Parent=1]="Parent",S[S.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(S){return fi(S)&&"Attributes"in S&&"PIISelectors"in S?S.Attributes instanceof Array&&S.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(S){if(!fi(S)||S===null)throw new Rt("setPIISelectors");return"Attributes"in S||(S.Attributes=[]),"PIISelectors"in S||(S.PIISelectors=[]),S}r.sanitizeSelectorUserInput=i;function n(S){var w,I,O;return"nodeType"in S?(w=et.getProperty(S,r.maskedProp))!==null&&w!==void 0?w:{state:t.NotMasked}:(O=(I=S.metadata)===null||I===void 0?void 0:I[r.maskedProp])!==null&&O!==void 0?O:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(S){var w,I,O;return"nodeType"in S?(w=et.getProperty(S,r.maskedAttributeProp))!==null&&w!==void 0?w:{attributes:[]}:(O=(I=S.metadata)===null||I===void 0?void 0:I[r.maskedAttributeProp])!==null&&O!==void 0?O:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(S){let w=et.getProperty(S,r.maskedProp);return(w==null?void 0:w.state)===t.Parent}r.isMaskedElement=c;function l(S){let w=et.getProperty(S,r.maskedProp);return(w==null?void 0:w.state)===t.Child}r.isMaskedElementChild=l;function h(S,w){let I=et.getProperty(S,r.maskedAttributeProp);return((I==null?void 0:I.attributes)==null?void 0:csArray.prototype.indexOf.call(I==null?void 0:I.attributes,w))>-1}r.isMaskedAttribute=h;function f(S,w){et.setProperty(S,r.maskedProp,w)}r.setMaskedElementProperty=f;function d(S){et.setProperty(S,r.maskedProp,void 0)}r.unsetMaskedElementProperty=d;function m(S,w){et.setProperty(S,r.maskedAttributeProp,w)}r.setMaskedAttributeProperty=m;function E(S,w){let I=csArray.prototype.filter.call(S.PIISelectors,U=>ci(U));w.elementSelector.length>0&&csArray.prototype.push.call(I,...csString.prototype.split.call(w.elementSelector,","));let O=P([...I]),T={elementSelector:csArray.prototype.join.call(O,","),attrSelector:w.attrSelector,attrSelectors:w.attrSelectors};return csArray.prototype.forEach.call(S.Attributes,U=>{U!=null&&U.attrName&&(U!=null&&U.selector)&&ci(U.selector)&&!v(T.attrSelectors,U)&&csArray.prototype.push.call(T.attrSelectors,U)}),T.attrSelector=C(T.attrSelectors),T}r.getComputedSelectorSettings=E;function v(S,w){return csArray.prototype.some.call(S,I=>I.selector===w.selector&&I.attrName===w.attrName)}function C(S){let w="";return csArray.prototype.forEach.call(S,I=>{let O=csString.prototype.split.call(I.selector,",");csArray.prototype.forEach.call(O,T=>{ci(T)&&(w&&(w+=","),w+=T)})}),w}function P(S){if(S.length<=1)return S;let w=[];for(let I of S){let O=csString.prototype.split.call(I,",");for(let T of O)csArray.prototype.indexOf.call(w,T)===-1&&csArray.prototype.push.call(w,T)}return w}}(s||(s={})),s})(),Df=(()=>{class s{constructor(t,e){this.pt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=mt(t),n={isNodeSensitive(o){return D.isMaskedElement(o)||D.isMaskedElementChild(o)},isAttributeSensitive(o,c){return D.isMaskedAttribute(o,c)},allWhitelistedAttributes:so(this.E.whitelistedAttributes),attributeIgnoreTokens:Cf,useAnonymization:e,attrMaxLength:Pf,hierarchyMaxLength:If};return this.pt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=mt(t);return this.pt.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=mt(t),{path:i,firstAnchorParent:n}=this.pt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.ZS(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=mt(t);return this.pt.isValidElement(e)}getElementPath(t){return this.pt.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}ZS(t){var e;return t!==null&&t.hasAttribute("href")&&!Tn((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function _r(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=M.now(),o=null,l=s.apply(i,n),n=[],i=null},f=function(...d){if(i=this!==null&&this!==void 0?this:st,n=[...d],e==="trailing")return o||(o=st.csSetTimeout(h,t)),l;let m=M.now(),E=t-(m-c);return E<=0||E>t?(c=m,l=s.apply(i,n),o?(st.csClearTimeout(o),o=null):n=[]):o||(o=st.csSetTimeout(h,E)),l};return f.cancel=()=>{o&&(st.csClearTimeout(o),c=0,o=null,n=[])},f.flushPending=()=>{o&&(st.csClearTimeout(o),h())},f}var oo=s=>(r,t,e)=>{e.value=_r(e.value,s)};var pr=".",ao="__DOT__",kf=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Mc="x";function Lf(s){let[r,t,e,i,n,o,c,l,h]=Hf(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Mc?null:h}}function xf(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Mc],csString),Uf),pr)}function Vf(s){return kf.test(s)}function Uf(s){return csString.prototype.replace.call(s,/\./g,ao)}function jf(s){return csString.prototype.replace.call(s,new csRegExp(ao,"g"),pr)}function Hf(s){return csString.prototype.indexOf.call(s,ao)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,pr),jf):csString.prototype.split.call(s,pr)}var N=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function Bf(s){return s===N.RECORDING_GLOBAL_SAMPLING||s===N.RECORDING_RULES_TARGETING||s===N.RECORDING_URL_SAMPLING||s===N.RECORDING_ETR_SAMPLING}var Ff={[N.RECORDING_RULES_TARGETING]:N.RECORDING_GLOBAL_SAMPLING},Kt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),Je=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Wt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Cn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var Gf=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Dc=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,kc=".";function $f(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],kc)}function zf(s){if(!co(s))return null;let r=In(s);return r!==null?Lc(r):null}function Lc(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,kc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:Cn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Gf.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function co(s){return Dc.test(s)}function In(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Dc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Ee="_cs_ex",ca=2592e6,qf=/^[0-9]+$/,Wf=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.K=i}onCookieToSet(t){this.Oi=t}onCookieToRemove(t){this.Ni=t}get(){return this.E.cookielessTrackingEnabled?Number(this.K.getItem(Ee)):Number(this.N.get(Ee))}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(Ee,t):(this.N.set(Ee,t,ca),(e=this.Oi)===null||e===void 0||e.call(this,Ee,t,ca))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Ee):(this.N.delete(Ee),(t=this.Ni)===null||t===void 0||t.call(this,Ee))}static isValidExclusionString(t){return qf.test(t)}}return s})(),He="_cs_cvars",Yf=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.K=i}onCookieToSet(t){this.Oi=t}onCookieToRemove(t){this.Ni=t}get(){return this.E.cookielessTrackingEnabled?this.K.getItem(He):this.N.get(He)}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(He,t):(this.N.set(He,t),(e=this.Oi)===null||e===void 0||e.call(this,He,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(He):(this.N.delete(He),(t=this.Ni)===null||t===void 0||t.call(this,He))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var Xf=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.pl=i,this.gl=n,this.ls=o,this.av=c,this.wn=l}start(){this.w.addListener(this.av),this.w.addListener(this.wn),this.w.addListener(this.pl),this.wn.init(),this.gl.init(),this.ls.init(),!this.ls.isActive()&&this.S.start()}}return s})(),Kf=(()=>{class s{constructor(t){this.Rs=t}onOptout(){this.Rs.removeExclusion()}}return s})(),Jf=(()=>{class s{constructor(t,e){this.Lt=t,this.ft=e}exclude(t){this.ft.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ft.remove()}isExcluded(){return this.cv()||this.lv()}cv(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ft.get()}lv(){return csString.prototype.indexOf.call(this.Lt.href,Ee)>0}}return s})(),Qf=["excludeURLforReplay"],Zf=(()=>{class s{constructor(t,e){this.Rs=t,this.S=e}init(){this.S.register(Qf,t=>{if(q(t))this.Rs.setExcludeUrlForSessionReplay(t);else throw new Rt("excludeURLforReplay")})}}return s})(),qr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),tp=".^",ep=".*",sp=(()=>{class s{constructor(t){this.C=t,this.ml=new csRegExp(`${tp}`)}setExcludeUrlForSessionReplay(t){try{this.ml=new csRegExp(t)}catch{F.warn(`excludeURLforReplay - invalid regex '${t}'`),this.ml=new csRegExp(`${ep}`)}}kf(){return this.ml.test(this.C.getAnonymizedUrl())?qr.SessionReplay:qr.None}isUrlExcludedForSessionReplay(){return this.kf()===qr.SessionReplay}getRequestParameters(){return{ex:this.kf()}}}return s})();var{toString:ev}=Object.prototype;function xc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(xc.Cache||Map),t}xc.Cache=Map;var{hasOwnProperty:sv}=Object.prototype;var Ei=(()=>{class s{constructor(...t){this.Uf=t}addProvider(t){csArray.prototype.push.call(this.Uf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Uf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),ip=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function rp(){return{la:ip}}var us=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),fs=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),np=(()=>{class s extends Ut{constructor(t,e,i,n,o,c){super(),this.E=t,this.w=e,this.Q=i,this.bl=n,this.C=o,this.hs=c,this.ma=null}init(){this.vv()}onStart(t=fs.Natural){switch(t){case fs.Natural:this._v();break;case fs.Artificial:this.wv();break;case fs.Renewal:this.Av();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Rl(t,e)):(Pt(t)&&this.C.overridePath(t,e),this.Q.emitTargetingRulesArtificialPageview(this.C.getUrl()),this.E.hasTargetingRules()&&this.C.cleanupOverrideLifespan())}_v(){this.hs.setPageViewType(us.Natural);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.bl.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(us.Natural),this.ma=t}Av(){this.hs.setPageViewType(us.Renewal);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.bl.send(),this.w.emitAfterNaturalPageView(us.Renewal),this.ma=t}Rl(t,e,i=!1){Pt(t)&&this.C.overridePath(t,e);let n=this.C.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.ma,n),this.hs.setPageViewType(us.Artificial),this.bl.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.ma=n}wv(){this.Rl(null,void 0,!0)}vv(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Rl())})}}return s})(),op=(()=>{class s{constructor(){this.Cl=us.Natural}setPageViewType(t){this.Cl=t}getPageViewType(){return this.Cl}getRequestParameters(){return{pvt:this.Cl}}}return s})();var ap=99999,cp=(()=>{class s{constructor(t){this.R=t,this.Tv=this.bv()&&window.CSCurrentScript}Rv(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Cv(e)?null:Math.round(e.responseEnd-e.fetchStart)}Cv(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Tv||this.Iv()!==1)return{};let t=this.Rv();return t===null?{}:{dt:`${Math.min(t,ap)}`}}Iv(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}bv(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),lp=["trackPageview"],la=["setPath"],ha=["setQuery"],ua=["referrer:maskUrl"],hp=["referrer:removeQueryString"],up=["referrer:keepQueryString"],Wr=s=>fi(s)&&s!==null,dp=(s,r,t,e)=>{s.register(lp,(i,n)=>{if(!q(i)){r.triggerArtificialPageView();return}Wr(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(la,(i,n)=>{if(!q(i))throw new Rt(la[0]);Wr(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(ha,(i,n)=>{if(!q(i))throw new Rt(ha[0]);Wr(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(ua,i=>{if(!q(i))throw new Rt(ua[0]);e.addUrlMaskingPattern(i)}),s.register(hp,()=>e.enableRemoveQueryString()),s.register(up,()=>e.disableRemoveQueryString()))};var fp=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,d,m,E,v,C,P){this.E=t,this.S=e,this.w=i,this.Le=n,this.O=o,this.R=c,this.Ps=l,this.Ct=h,this.wt=f,this.C=d,this.qt=m,this.hs=E,this.Q=v,this.Ge=C,this.fr=P}init(){let t=new Bs(this.E.getTrackerUri(),"pageview");this.Is=new np(this.E,this.w,this.Q,t,this.C,this.hs),this.Is.init();let e=new Ei(this.Le,this.O,gt,this.Ps,this.C,this.Ct,$n,this.wt,this.hs,new cp(this.R),this.qt);this.Ge&&e.addProvider(this.Ge),this.fr&&e.addProvider(this.fr);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),dp(this.S,this.Is,this.C,this.Ps)}start(t){this.Is.start(t)}stop(){this.Is.stop()}onBeforeSessionRenewal(){this.Is.stop()}}return s})();var Vc=["setCustomVariable"],pp=(()=>{class s{constructor(t,e){this.S=t,this.wt=e}init(){this.S.register(Vc,(t,e,i,n)=>{this.wt.set(t,e,i,n)})}onAfterArtificialPageView(){this.wt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.wt.deleteNextPageOnlyCustomVariables()}onOptout(){this.wt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.wt.removeCustomVariablesSession(),this.wt.removeCustomVariablesPage()}}return s})();var gp=["setEncryptionSelectors"],Uc=["setPIISelectors"],mp=["setCapturedElementsSelector"],yp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.lt=i,this.ie=n,this.Wt=o,this.ht=c,this.pr=l}init(){var t,e;this.pr&&this.ht&&((t=this.pr)===null||t===void 0||t.addSelector((e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ut()}onStartTracking(t){this.ie.start(),this.w.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ie.stop(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ie.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ie.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.ie.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ut(){this.S.register(Uc,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(mp,t=>{this.Wt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(gp,t=>{var e,i;(e=this.ht)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.pr)===null||i===void 0||i.addSelector(t)})}}return s})();var Ep=512,Sp=255,Yr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Ep),this.value=q(e)?csString.prototype.slice.call(e,0,Sp):e}static isKeyValid(t){return q(t)}static isValueValid(t){return q(t)||ms(t)}}return s})(),vp=(()=>{class s extends Ut{constructor(t,e){super(),this.Yt=t,this.D=e,this.Il=[]}onStart(){csArray.prototype.forEach.call(this.Il,t=>this.jf(t.key,t.value)),this.Il=[]}onStop(){}jf(t,e){let i=this.D.anonymizePII(t),n=ms(e)?e:this.D.anonymizePII(e);this.Yt.add(new Yr(i,n))}trackDynamicVariable(t,e){if(Yr.isKeyValid(t)&&Yr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Il,{key:t,value:e});return}this.jf(t,e)}else throw new Rt(jc[0])}}return s})(),_p=(()=>{class s{constructor(t){this.de=t,this.Yt=[]}add(t){csArray.prototype.push.call(this.Yt,t),this.setBatchReadyCall()}clear(){this.Yt=[]}onBatchReady(t){this.Pv=t}getRequestParameters(){let t={};for(let e of this.Yt)t[e.key]=e.value;return{dv:this.de.compressSync(csJSON.stringify(t),"base64"),ct:this.de.algorithm}}setBatchReadyCall(){this.Pv()}}return B([oo({wait:0,mode:"trailing"}),V("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),wp="dvar",jc=["trackDynamicVariable"],Ap=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.R=e,this.E=i,this.Le=n,this.de=o,this.D=c,this.Ts=new Bs(this.E.getTrackerUri(),wp),this.Yt=new _p(this.de),this.Rs=new vp(this.Yt,this.D)}init(){this.Ts.setRequestParametersProviders(this.Le,this.Yt),this.R.setDynamicVariablesService(this.Rs),this.Yt.onBatchReady(()=>this.Ts.send()),this.Ts.after(()=>this.Yt.clear()),this.S.register(jc,({key:t,value:e}={})=>{this.Rs.trackDynamicVariable(t,e)})}onStartTracking(){this.Rs.start()}onArtificialPageViewEnd(t){t&&this.Rs.stop()}onAfterArtificialPageView(t){t&&this.Rs.start()}}return s})();var Hc=100,Tp=100,bp=(()=>{class s extends Ut{constructor(t,e){super(),this.Nv=t,this.F=e,this.be=null,this.Pl=[]}onStart(){csArray.prototype.forEach.call(this.Pl,t=>{this.be=t,this.Hf()}),this.Pl=[]}onStop(){}addToCart(t){let e={};q(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Tp)),q(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Hc)),(e.sku||e.merchant)&&(this.be=e,this.Hf())}getCartItem(){return this.be}Hf(){if(!this.isStarted&&this.be!==null){csArray.prototype.push.call(this.Pl,this.be),this.clear();return}this.F.refreshSession(),this.F.isSessionValid()&&this.Nv.send()}clear(){this.be=null}getRequestParameters(){if(!this.be)return{};let t={};return q(this.be.sku)&&this.be.sku.length>0&&(t.sku=this.be.sku),q(this.be.merchant)&&this.be.merchant.length>0&&(t.me=this.be.merchant),t}}return s})(),da=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),q(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Pt(t)&&Xt(t.revenue)&&q(t.currency)&&t.currency.length<=10&&(!Pt(t.id)||q(t.id))}}return s})(),Rp=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Ol(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Z(t.sku)&&(e.sku=t.sku),Z(t.category)&&(e.category=t.category),Z(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Hc)),e}static Ol(t){return Pt(t)&&q(t.id)&&q(t.name)&&Xt(parseFloat(t.price))&&ms(parseInt(t.quantity,10))&&(!Z(t.sku)||q(t.sku))&&(!Z(t.category)||q(t.category))&&(!Z(t.merchant)||q(t.merchant))}}return s})(),Cp=(()=>{class s extends Ut{constructor(t,e,i){super(),this.D=t,this.Bf=e,this.F=i,this.Nl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Nl,t=>{this.fe=t.transaction,this.Tn=t.transactionItems,this.sendTransaction()}),this.Nl=[]}onStop(){}addTransaction(t){let e=this.D.anonymizeFields(t,["id"]);this.fe=da.from(e)}getTransaction(){return this.fe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Nl,{transaction:this.fe,transactionItems:[...this.Tn]}),this.clear();return}if(!(this.Bf===null||this.F===null)&&(this.F.refreshSession(),!!this.F.isSessionValid())){if(!this.fe.hasValidRevenue()){F.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Bf.send()}}addItem(t){if(Ze(t))throw new Rt(Bc[1]);let e=this.D.anonymizeFields(t,["id","name","sku","category"]),i=Rp.from(e);i!==null&&csArray.prototype.push.call(this.Tn,i)}getItems(){return this.Tn}clear(){this.fe=da.from({revenue:NaN}),this.Tn=[]}getRequestParameters(){let t={id:this.fe.id?`${this.fe.id}`:"",revenue:`${this.fe.revenue}`};return Z(this.fe.tax)&&(t.tax=`${this.fe.tax}`),Z(this.fe.shipping)&&(t.shipping=`${this.fe.shipping}`),Z(this.fe.currency)&&(t.cu=`${this.fe.currency}`),t.items=window.csJSON.stringify(this.Tn),t}}return s})(),Ip=["ecommerce:addToCart","ec:cart:add"],Pp=["ecommerce:addTransaction","ec:transaction:create"],Bc=["ecommerce:addItem","ec:transaction:items:add"],Op=["ecommerce:send","ec:transaction:send"],Np=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.mt=e,this.O=i,this.S=n,this.D=o,this.F=c,this.C=l}init(){let t=new Bs(this.E.getTrackerUri(),"transaction"),e=new Bs(this.E.getTrackerUri(),"addtocart");this.xe=new Cp(this.D,t,this.F),this.gr=new bp(e,this.F);let i=new Ei(this.mt,this.O,this.C,this.xe);t.setRequestParametersProviders(i),t.after(()=>{this.xe.clear()});let n=new Ei(this.mt,this.O,this.C,this.gr);e.setRequestParametersProviders(n),e.after(()=>{this.gr.clear()}),this.S.register(Pp,o=>{this.xe.addTransaction(o)}),this.S.register(Bc,o=>this.xe.addItem(o)),this.S.register(Op,()=>this.xe.sendTransaction()),this.S.register(Ip,o=>{this.gr.addToCart(o)})}onStartTracking(){this.xe.start(),this.gr.start()}onArtificialPageViewEnd(t){t&&(this.xe.stop(),this.gr.stop())}onAfterArtificialPageView(t){t&&(this.xe.start(),this.gr.start())}}return s})();var _s;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(_s||(_s={}));var fa=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function Pn(s){return s.tagDeploymentMode===_s.DualCollectionReview||s.tagDeploymentMode===_s.DualCollection}function Mp(s){return Pn(s)||s.tagDeploymentMode===_s.LoadClicktalePtc}var Dp="@ETP@",pa="@user-identifier@",kp=(()=>{class s extends Ut{constructor(t,e,i,n){super(),this.E=t,this.kv=e,this.de=i,this.Q=n,this.Ml=[],this.Mi=[]}onStart(){csArray.prototype.forEach.call(this.Ml,t=>this.Ff(t)),this.Ml=[],csArray.prototype.forEach.call(this.Mi,t=>this.Gf(t)),this.Mi=[]}onStop(){}Ff(t){this.Lv(t)?oi.isSupported()&&this.xv(t):this.Uv(t)}trackPageEvent(t){if(!s.$f(t))throw new Rt(Fc[0]);this.isStarted?this.Ff(t):csArray.prototype.push.call(this.Ml,t)}Lv(t){return Tn(t,pa)}async xv(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,pa.length);if(e.length>oi.MAX_DIGEST_INPUT_SIZE){F.warn("UserIdentifier event: invalid user identifier");return}let i=await oi.digest(e);i?(this.mr={eventName:i,isETR:!1,isCustomHashId:!0},this.Ea()):F.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.Q.emitUserIdentifierEvent(e)}Uv(t){this.Q.emitPageEvent(t),this.mr={eventName:t,isETR:!1,isCustomHashId:!1},this.Ea(),this.E.tagDeploymentMode===_s.LoadClicktalePtc&&fa.sendPageEvent(t)}Gf(t){this.E.malkaEtrEnabled?this.jv(t):this.Hv(t)}trackEventTriggerRecording(t){if(!s.$f(t))throw new Rt(Gc[0]);this.isStarted?this.Gf(t):csArray.prototype.push.call(this.Mi,t)}jv(t){Tn(t,Dp)?this.Q.emitEventTriggerRecording(t,Je.ETR_PAGE):this.Q.emitEventTriggerRecording(t,Je.ETR_SESSION),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.Ea()}Hv(t){Mp(this.E)&&(this.Q.emitEventTriggerRecording(t,Je.ETR_LEGACY),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.Ea(),this.E.tagDeploymentMode===_s.LoadClicktalePtc&&fa.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.de.compressSync(this.mr.eventName,"base64"),ct:this.de.algorithm,isETR:`${this.mr.isETR}`,isCustomHashId:`${this.mr.isCustomHashId}`}}Ea(){this.kv.send()}static $f(t){return q(t)&&!!csString.prototype.trim.call(t)}}return s})(),Fc=["trackPageEvent"],Gc=["trackEventTriggerRecording"],Lp=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.de=i,this.Le=n,this.Q=o}init(){let t=new Bs(this.E.getTrackerUri(),"pageEvent");this.yr=new kp(this.E,t,this.de,this.Q),t.setRequestParametersProviders(this.yr,this.Le),this.S.register(Fc,e=>{this.yr.trackPageEvent(e)}),this.S.register(Gc,e=>{this.yr.trackEventTriggerRecording(e)})}onStartTracking(){this.yr.start()}onArtificialPageViewEnd(t){t&&this.yr.stop()}onAfterArtificialPageView(t){t&&this.yr.start()}}return s})();function Te(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var ri=s=>s instanceof HTMLFormElement?"form":s.localName,ga=new Map,Xr=!Ai&&document.implementation.createHTMLDocument("");function $c(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function xp(s){if(!yr(s))return null;let r=zc(s);if(r===null||r.length===0)return null;let t="";if(zn(s.textContent))J(r,e=>t+=e.cssText);else{let e=Vp(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];J(i,n=>t+=n.cssText)}return t}function Vp(s){if(!Xr)return 0;let r=ga.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Xr.head.appendChild(t);let e=zc(t);return r=e?e.length:0,ga.set(s.textContent,r),Xr.head.removeChild(t),r}function zc(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var Qe={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var bs=(()=>{class s{constructor(t){this.csId=G(t),this.props=li.getAll(t)}}return s})(),qc=(()=>{class s extends bs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),_e=(()=>{class s extends bs{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=Qe.ELEMENT_NODE,this.localName=ri(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=xp(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new qc(c);csArray.prototype.push.call(this.children,l)}(yr(t)||Kn(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===Qe.ELEMENT_NODE}static getAttribute(t,e){return bi(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function Up(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function jp(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=Bp(r);return t===""||(r=Fp(r,t),r.length===0)?"":Wc(r[0])}function Hp(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Bp(s){return s.length>0?Wc(s[0]):""}function Fp(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function Wc(s){let r="",t;Hp(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Gp=s=>s;function $p(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let f=c[l],d=Reflect.set(c,l,h);return e.forEach(m=>m(this,h,f,"subproperty")),d}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){it.error(h)}return l}})}function zp(s,r,t){let e=qp(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function qp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,$p(s,r,i,e),e):(it.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(it.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Wp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return it.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call($s(i),f=>f(c))}catch(f){it.critical(f)}let h=n.apply(this,c);return As(()=>{let f={result:h,context:this,args:c};csArray.prototype.forEach.call(l,d=>d(f))},[he.MonkeyPatch,`${csString(r)}`]),h};Xp(o,n),s[r]=o}return i}function hs({target:s,methodName:r,hook:t,hookPrepareArgs:e=Gp,options:i}){let n=Wp(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:jp()}:{};return f=>t({...f,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function Yp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);if(!i)return e;if(!i.configurable)return it.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[t]=e;let n=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var o;let c=this[r],l=arguments;return As(()=>{e.forEach(h=>h(this,l[0],c,"property"))},[he.MonkeyPatch,n]),(o=i.set)===null||o===void 0?void 0:o.apply(this,l)}}),e}function gr(s,r,t){let e=Yp(s,r);if(!e)return null;let i=(n,o,c)=>t(n,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Xp(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var wr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return $s(this.set)}get count(){return this.set.size}}return s})(),Kp=(()=>{class s extends wr{constructor(t="high"){super(),this.Bv=t}add(t){this.set.add(t),this.set.size===1&&Ft(()=>{this.set.clear()},this.Bv)}}return s})();function Ar(s,r=!1){let t=new wr;return{push(e){t.count===0&&(r?Ft:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Se=csSymbol(),lo=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,f,d,m,E,v,C;this.A=t,this.Dl=null,this.kl=null,this.Ll=null,this.xl=null,this.Vl=null,this.Fv=Ar(P=>this.processUpdateRulesInATick(P)),this.Ul=null,this.jl=null,this.Hl=null,this.A=P=>Ft(()=>t(P)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Dl=hs({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:P,args:S})=>{this.processInsertRule(P,S)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.kl=hs({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:P,args:S})=>{this.processDeleteRule(P,S)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Ll=hs({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:P})=>this.processUpdateRule(P)})),typeof((f=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||f===void 0?void 0:f.deleteRule)=="function"&&(this.xl=hs({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:P})=>this.processUpdateRule(P)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Vl=gr(window.StyleSheet.prototype,"disabled",(P,S,w)=>{S!==w&&this.Gv(P,S)})),typeof((E=(m=window.CSSStyleDeclaration)===null||m===void 0?void 0:m.prototype)===null||E===void 0?void 0:E.setProperty)=="function"&&(this.Ul=hs({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:P})=>{let S=P.parentRule;S instanceof CSSStyleRule&&this.processUpdateRule(S)}})),typeof((C=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||C===void 0?void 0:C.removeProperty)=="function"&&(this.jl=hs({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:P})=>{let S=P.parentRule;S instanceof CSSStyleRule&&this.processUpdateRule(S)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Hl=zp(window.CSSStyleRule.prototype,"style",P=>{this.processUpdateRule(P)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.Dl)===null||t===void 0||t.activate(),(e=this.kl)===null||e===void 0||e.activate(),(i=this.Ll)===null||i===void 0||i.activate(),(n=this.xl)===null||n===void 0||n.activate(),(o=this.Vl)===null||o===void 0||o.activate(),(c=this.Ul)===null||c===void 0||c.activate(),(l=this.jl)===null||l===void 0||l.activate(),(h=this.Hl)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.Dl)===null||t===void 0||t.deactivate(),(e=this.kl)===null||e===void 0||e.deactivate(),(i=this.Ll)===null||i===void 0||i.deactivate(),(n=this.xl)===null||n===void 0||n.deactivate(),(o=this.Vl)===null||o===void 0||o.deactivate(),(c=this.Ul)===null||c===void 0||c.deactivate(),(l=this.jl)===null||l===void 0||l.deactivate(),(h=this.Hl)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Se]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Fv.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(gi(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(o)}}processDeleteRule(t,[e]){if(t[Se]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}Gv(t,e){if(t[Se]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return lt([V()],s.prototype,"observe",null),lt([V()],s.prototype,"disconnect",null),lt([V()],s.prototype,"processInsertRule",null),lt([V()],s.prototype,"processUpdateRule",null),lt([V()],s.prototype,"processUpdateRulesInATick",null),lt([V()],s.prototype,"processDeleteRule",null),s})(),Ws=(()=>{var s;class r{static $v(e){this.si.forEach(i=>{e(i,"initial")})}static bn(e){if(this.L||(this.L=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&J(n.addedNodes,this.zv),J(n.removedNodes,this.qv)})),csArray.prototype.push.call(this.Re,e),!this.Y){this.Y=!0,this.L.observe(document,this.Rn);for(let i of ps.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.si.add(n),this.L.observe(n,this.Rn)}this.Bl||(this.Bl=hs({target:Element.prototype,methodName:"attachShadow",hook:i=>this.Er(i.result)&&this.zf(i.result)})),this.Bl.activate()}this.$v(e)}static Er(e){return e.isConnected&&e.ownerDocument===document}static Cn(e){var i,n;this.Re=csArray.prototype.filter.call(this.Re,o=>o!==e),this.Re.length===0&&(this.Re=[],this.Y=!1,(i=this.L)===null||i===void 0||i.disconnect(),(n=this.Bl)===null||n===void 0||n.deactivate(),this.si.clear())}constructor(e){this.A=e,this.A=ys("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return $s(s.si)}takeRecords(){var e,i;return(i=(e=s.L)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ps.isSupported()&&s.bn(this.A)}disconnect(){ps.isSupported()&&s.Cn(this.A)}}return s=r,r.Re=[],r.si=new Set,r.Y=!1,r.Rn={childList:!0,subtree:!0},r.zf=t=>{s.si.has(t)||(s.L.observe(t,s.Rn),s.si.add(t),J(s.Re,e=>e(t,"added")))},r.zv=t=>{te(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.zf)},r.qv=t=>{t.isConnected||te(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.si.has(e)&&(s.si.delete(e),J(s.Re,i=>i(e,"removed")))})},lt([V()],r.prototype,"observe",null),lt([V()],r.prototype,"disconnect",null),r})(),Jp=(()=>{class s{constructor(t){this.Wv=1,this.Sa=new Set,this.Fl=null,this.Gl=null,this.$l=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Yv=e=>{let i=e.sheet;if(this.Sa.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Se],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Se],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Se],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Se],disabled:e.disabled};this.A(n)}}},this.A=e=>Ft(async()=>{await nc(2),t(e)}),this.pe=new Ws(this.$l),"adoptedStyleSheets"in Document.prototype&&(this.Fl=gr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Gl=gr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.qf=new lo(this.Yv)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.pe.observe(),(t=this.Fl)===null||t===void 0||t.activate(),(e=this.Gl)===null||e===void 0||e.activate(),this.qf.observe()}disconnect(){var t,e;this.Sa.clear(),this.pe.disconnect(),(t=this.Fl)===null||t===void 0||t.deactivate(),(e=this.Gl)===null||e===void 0||e.deactivate(),this.qf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Xv(e);let i=Ke(e,o=>o[Se]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}Xv(t){J(t,e=>{if(this.Sa.has(e))return;let i=this.Wv++;e[Se]=i,this.Sa.add(e);let n=this.Kv(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(o)})}Kv(t){let e=[];try{e=Ke(t.cssRules,i=>i.cssText)}catch{}return e}}return lt([V()],s.prototype,"observe",null),lt([V()],s.prototype,"disconnect",null),lt([V()],s.prototype,"setStyleSheets",null),s})(),Qp=Ts(sg,"optimizeMutations"),Zp=csSymbol.for("ignoreNextSerialization");function tg(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,f=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){f.delete(d),s.add(d)},isDetachedMove(d){return!!ft.findAncestor(d,m=>f.has(m),!0)},isAddedNode(d){let m=ft.findAncestor(d,E=>r.has(E)||l.has(E)||s.has(E),!0);return!!m&&!s.has(m)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!ft.findAncestor(d,m=>r.has(m)||l.has(m),!0)},markAsAddedNode(d){f.delete(d),l.delete(d),r.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!ft.findAncestor(d,m=>t.has(m),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,m){let E=m==="previous"?n:i;return d&&E.has(d)?E.get(d)||null:d},getSiblings(d){let m=d.addedNodes.length,E=this.getPlaceholder(d.previousSibling,"previous"),v=this.getPlaceholder(d.nextSibling,"next");if(m){let C=E,P=v,S=d.previousSibling!==E,w=d.nextSibling!==v;for(let I=0;I<m;I++){let O=d.addedNodes[I],T=d.addedNodes[m-I-1];this.isLatestNodeMutation(O,d)?(n.delete(O),d.previousSibling&&S&&(i.set(d.previousSibling,O),S=!1),C=O):n.set(O,C),this.isLatestNodeMutation(T,d)?(i.delete(T),d.nextSibling&&w&&(n.set(d.nextSibling,T),w=!1),P=T):i.set(T,P)}}else d.previousSibling&&d.previousSibling!==E&&i.set(d.previousSibling,v),d.nextSibling&&d.nextSibling!==v&&n.set(d.nextSibling,E);return{previousSibling:E,nextSibling:v}},setAttributeMutation(d,m){let E=o.get(d)||new Set;E.add(m),o.set(d,E)},isAttributeMutated(d,m){var E;return!!(!((E=o.get(d))===null||E===void 0)&&E.has(m))},setLatestNodeMutation(d,m){h.set(d,m)},isLatestNodeMutation(d,m){return h.get(d)===m},markAsFutureAddedNode(d){h.has(d)||f.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function eg(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function sg(s){let r=tg(),t=[];for(let e of s)e.type==="childList"&&eg(e,r);for(let e of s)switch(e.type){case"attributes":rg(e,r,t);break;case"characterData":ig(e,r,t);break;case"childList":ag(e,r,t);break}return t}function ig(s,r,t=[]){let e=s.target;return ft.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!og(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function rg(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ft.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var ng=30;function og(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=M.now(),n=s[e];return n&&i<n?!0:(s[e]=i+ng,!1)}function ag(s,r,t=[]){let e=ft.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,f=()=>{if(h){let{childListType:E,movedNodes:v,...C}=h;csArray.prototype.push.call(t,E==="added"?C:{...C,movedNodes:v}),h=null}},d=E=>E===(h==null?void 0:h.childListType)?h:(f(),{childListType:E,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let E=0;E<s.addedNodes.length;E++){let v=s.addedNodes[E];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,v)):(r.markAsAddedNode(v),n||(h=d("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):ft.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}f()}let m=cc(s.removedNodes,E=>{if(ft.isConnected(E)){if(!i&&!r.isPendingInsert(E)){if(r.isDetachedMove(E))return!0;r.markAsMovedNode(E),r.isMovedNodeIntoAddedNode(E)&&(E[Zp]=!0)}return!1}return r.isUselessNode(E)?!1:(r.markAsRemovedNode(E),!0)});return m.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:m,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var ma={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ts=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static zl(e){if(s.shadowRootFilters.length>0&&mi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,ma)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Ft(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,ma)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ps.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.zl(document),this.shadowRootObserver=new Ws(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,J(this.shadowRootObserver.shadowRoots,n=>{this.zl(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Wf=i;let n=Ar(o=>e(o,this),!0);this.A=ys("DocumentMutationObserver:callback",o=>{J(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?au(i,n):i!=null?i:n}observe(){s.observe(this.A,this.Wf)}disconnect(){s.disconnect(this.A,this.Wf)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{kt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{J(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.zl(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,lt([V()],r.prototype,"observe",null),lt([V()],r.prototype,"disconnect",null),r})(),cg=(()=>{class s{constructor(t){this.A=t,this.ql=!1,this.Jv=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>Ft(()=>t(e)),this.Yf=new lo(e=>Ft(async()=>{await nc(),this.Jv(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Xf=new Jp(t))}observe(){var t;this.ql=!1,this.L=new ts(e=>this.Qv(e),(e,i)=>{i==="added"&&this.Zv(e)}),this.L.observe(),this.Yf.observe(),(t=this.Xf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.L)===null||t===void 0||t.disconnect(),this.Yf.disconnect(),(e=this.Xf)===null||e===void 0||e.disconnect(),this.ql=!0}Qv(t){if(this.ql)return;let e=Qp(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){it.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:it.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ft.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:gi(t.addedNodes)};this.A(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Ke(t.removedNodes,c=>c)};this.A(o)}}Zv(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return lt([V()],s.prototype,"processAttributeChanged",null),lt([V()],s.prototype,"processCharacterDataChanged",null),lt([V()],s.prototype,"processChildListChanged",null),s})(),lg=(()=>{class s extends bs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),hg=(()=>{class s extends bs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),ug=(()=>{class s extends bs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),dg=(()=>{class s extends bs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),fg=(()=>{class s extends bs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),pg=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Kn(t)&&(i[n].value=$c(t))}return i}}return s})(),ya={workTime:40,async:!0,initialDOM:!0};var hi=csSymbol("InitialDom"),Ea=csSymbol.for("ignoreNextSerialization");function Yc(s){return s[Ea]?(delete s[Ea],!0):!1}function gg(s=ya){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=ya.workTime);let n=ys("serialize:callback",m=>e(m)),o=new Ti,c=(m,E)=>{m.hasChildNodes()&&o.push({node:m,serializedNode:E});let v=m instanceof Element&&csElementshadowRoot.apply(m);if(v){let C=E.shadowRoot=ui(v);s.async&&s.initialDOM&&et.setProperty(v,hi,!0),c(v,C)}},l,h=!0,f=8,d=ys("work",()=>{var m;if(h)l=ui(t),s.async&&s.initialDOM&&et.setProperty(t,hi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let E=Eg(100);for(;!o.isEmpty;){if(s.async&&E.elapsed()>=s.workTime){--f<=0&&csSetTimeout(d);return}let{node:v,serializedNode:C}=o.pop(),P=(m=C.children)!==null&&m!==void 0?m:[];if(Sr(v))continue;let S=0;for(let w=csNodefirstChild.apply(v);w;w=csNodenextSibling.apply(w)){if(Yc(w))continue;let I=ui(w);s.async&&s.initialDOM&&et.setProperty(w,hi,!0),P[S++]=I,c(w,I)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let m=0;m<f;m++)csSetTimeout(d,1)}}function mg(s){let r=ui(s),t=r;if(Sr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Yc(n)||(t.children[e++]=On(n));let i=s.shadowRoot;return i&&(t.shadowRoot=On(i)),r}var On=Ts(mg,"serializeSync");function ui(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new _e(s),r.attributes=Sg(s);break;case 3:t=new qc(s);break;case 4:t=new lg(s);break;case 8:t=new hg(s);break;case 10:t=new ug(s);break;case 9:t=new dg(s);break;case 11:t=new fg(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function yg(){hi=csSymbol("InitialDom")}function Eg(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=M.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=M.elapsed()),t-this.started}}}function Sg(s){return Sr(s)?[]:pg.create(s)}var ho=(()=>{class s{constructor(t){this.type="asyncEvent",this.Wl=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Wl)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.ii=t,this.Wl=!0,this.A&&this.A(this.ii)}complete(t){this.Wl&&t(this.ii),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),be=(()=>{class s{constructor(){this.It=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:M.now(),t.timestamp==null&&(t.timestamp=M.now()),csArray.prototype.forEach.call(this.It,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.It=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.It,t),()=>{let e=csArray.prototype.indexOf.call(this.It,t);csArray.prototype.splice.call(this.It,e,1)}}}return s})(),vg=gg(),_g=(()=>{class s extends be{constructor(){super(...arguments),this.va=!1}onStart(){this.va=!0,this.A=Up(this.t_,this),this.z=new cg(this.A),this.z.observe();let t=kt.mutations.initialDOM.asyncMeasure(),e=()=>{this.va=!1,yg(),t()};this.produceEvent(new ho(i=>vg(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.va=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.z)===null||e===void 0||e.disconnect()}Xt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=G(e.target),i.targetProps=et.getProperties(e.target)),[e,i]}t_(t){if(!this.e_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Xt(t.type,t);i.attribute=e.attribute,i.isSvg=zs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=ri(e.target),i.linkRel=uc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?ri(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Xt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?ri(e.target.parentElement):null,i.parentProps=e.target.parentElement?et.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Xt(t.type,t);i.targetLocalName=ct(e.target)?ri(e.target):null,i.nextSibling=e.nextSibling?G(e.nextSibling):null,i.previousSibling=e.previousSibling?G(e.previousSibling):null,kt.mutations.serializedMutations.measure(()=>{i.nodes=Ke(e.nodes,On)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Xt(t.type,t);i.previousSibling=e.previousSibling?G(e.previousSibling):null,i.nextSibling=e.nextSibling?G(e.nextSibling):null,i.nodesIds=Ke(e.nodes,G),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Xt(t.type,t);i.nodesIds=Ke(e.nodes,G),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Xt(t.type,t);i.shadowRoot=ui(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Xt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Xt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Xt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Xt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Xt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}_a(t){return this.va&&!et.getProperty(t,hi)}e_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this._a(t.target)||D.isMaskedElement(t.target)||D.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this._a(e)||D.isMaskedElement(e)||D.isMaskedElementChild(e))}case"attributeChanged":return this._a(t.target)||D.isMaskedElementChild(t.target)||D.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this._a(t.target)||D.isMaskedElementChild(t.target);default:return!1}}}return s})(),Fs=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),Ii=(()=>{class s{constructor(){this.It=[]}start(){}stop(){this.It.length=0,this.It=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.It;csSetTimeout(()=>{let n=ys("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.It,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.It,t),()=>{this.It=csArray.prototype.filter.call(this.It,e=>e!==t)}}emitEvent(t){Ft(()=>csArray.prototype.forEach.call(this.It,e=>e(t)))}}return s.pendingEvents=0,s})(),wg=(()=>{class s extends Ii{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Fs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof _e){let c=D.getMaskedAttributeDetails(n);n.attributes=this.wa(n,c)}if(D.getMaskedElementDetails(n).state===D.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}et.traverse(n,c=>{if(c instanceof _e){let l=D.getMaskedAttributeDetails(c);c.attributes=this.wa(c,l);let h=D.getMaskedElementDetails(c);h.state===D.MaskedElementState.Parent&&(this.Aa(c,h),e++)}})}return e>0&&$.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=D,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n!=null?n:{}){let l=n[c],h=o[c],f=D.getMaskedElementDetails(h);if(f.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let d=D.getMaskedAttributeDetails(h);for(let m of(e=d.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[m];f.state===i.Parent&&this.Aa(l,f)}}wa(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Aa(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),_e.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return Te([Ot("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),ce=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return et.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){et.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){et.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Ag=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Tg="\uFF41",bg=/[^\s]/g,Rg="a";function Kr(s){let r=csString.prototype.replace.call(s,Ag,Tg);return csString.prototype.replace.call(r,bg,Rg)}var Cg=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.us=t,this.In=e,this.D=i,this.Ta=n,this.s_=o,this.Pn=so(this.In)}sanitize(t,e){return et.traverse(t,(i,n)=>{if(i.anonymized=this.us,i.nodeType===Qe.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?et.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(_e.isElement(i))return this.i_(i);if(i.nodeType===Qe.CDATA_SECTION_NODE){let o=i;o.data=this.us?Kr(o.data):this.D.checkAndAnonymizePII(o.data,this.Ta);return}}),t}setAnonymization(t){this.us=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[ce.ANONYMIZED_TEXT_STATUS_PROP])===ce.WHITELISTED_STATUS;return this.us&&!n?{anonymizedValue:Kr(t),withAnonymization:!0}:{anonymizedValue:this.D.checkAndAnonymizePII(t,this.Ta),withAnonymization:!1}}i_(t){let e=bi(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.us,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.r_(e,i,o))return n;if(ad(i))return cd(e,i,n)?this.D.anonymizePII(n):n;let c=this.s_&&i==="placeholder";return this.us&&(ld(e,i,o)||c)?Kr(n):this.us?"":this.D.checkAndAnonymizePII(n,null)}r_(t,e,i){return od(t,e,i)||this.Pn.has(e)}}return s})();var Ig=()=>(s,r,t)=>{t.value=Pg(t.value)};function Pg(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,Yn(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}Ig.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var Og=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return et.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){et.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){et.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),ze=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?et.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){et.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){et.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var Sa=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Ng=(()=>{class s extends Ii{constructor(t,e,i=new qs,n=null,o=!1){super(),this.D=i,this.Ta=n,this.captureAnonymizedPlaceholders=o,this.Sr=new Cg(t,e,i,n,o)}setAnonymization(t){this.Sr.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Sa.isTextVisibilityEvent(t)||Fs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.h_(t);if(Sa.isTextVisibilityEvent(t))return t.text=this.D.checkAndAnonymizePII(t.text,this.Ta),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Zl(t);break;case"attributeChanged":this.u_(t);break;case"characterDataChanged":this.d_(t);break}return t}h_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case Qe.TEXT_NODE:case Qe.COMMENT_NODE:{let f=n[c];if(Z(f.data)){if(h.localName==="script"){f.data="";continue}}else continue;f.data=this.Sr.getAnonymizedValue((e=f.data)!==null&&e!==void 0?e:"",h.localName,h.metadata).anonymizedValue;break}case Qe.ELEMENT_NODE:{let f=n[c];if(f.attributes)for(let d in f.attributes){let m=f.attributes[d],E=l.localName==="input"?(i=l.attributes)===null||i===void 0?void 0:i.type:void 0;f.attributes[d]=this.Sr.getAnonymizedAttributeValue(l.namespaceURI,l.localName,d,m,E)}break}}}return t}Zl(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Sr.sanitize(n,i)}u_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Sr.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}d_(t){t.newValue=this.Sr.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Te([Ot("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var K=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function uo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Mg(r);return e?(wi(t,",")||(e=Dg(e)),[va(t),...uo(e)]):[va(t)]}function Mg(s){return csString.prototype.split.call(s,/\s(.+)/)}function va(s){return csString.prototype.split.call(s,/,$/)[0]}function Dg(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var kg=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function Lg(s,r){return csString.prototype.replace.call(s,kg,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=Vg((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${xg(l)})`})}function xg(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function di(s){let r=new Set;return Lg(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),$s(r)}function Vg(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var _a=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.m_(t);if(!n)return null;let o=await s.sp(n),c=ae(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.y_(t,n),c=ve(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(f=>{f&&csArray.prototype.push.call(h.nestedResources,{hash:f.hash,data:f.data})})),h}static async sp(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.ip,e);return yn(i)}static async m_(t){let e;if(!ae(t))e=await(await window.fetch(t)).blob();else{let i=jo(t);if(!i)return null;e=i}return e}static async y_(t,e){let i=new Map,n=ve(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!ae(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let E=await fetch(l.resourceAbsolutePath);l.data=await E.text()}l.nestedResources||(l.nestedResources=di(l.data));let d=!1,m=!1;for(let E of l.nestedResources){let v=ae(E)?E:l.resourceAbsolutePath?Hd(E,l.resourceAbsolutePath):ve(E),C=i.get(v);if(C!==void 0){if(C!==null){let S=s.E_(C,E);l.data=oe.stringReplaceAll(l.data,E,S)}continue}bi(c,S=>S.resourceAbsolutePath===v)!==void 0||(d=!0,m||(csArray.prototype.push.call(c,l),m=!0),csArray.prototype.push.call(c,{resourceRawPath:E,resourceAbsolutePath:v}))}if(!d){let E=await s.S_(l.data);i.set(l.resourceAbsolutePath,{hash:E.hash,data:E.data})}}else{let d;if(!ae(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let E=jo(l.resourceAbsolutePath);if(!E){i.set(l.resourceAbsolutePath,null);continue}d=E}let m=await s.sp(d);i.set(l.resourceAbsolutePath,{hash:m,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static E_(t,e){let i=`cs://resources/${t.hash}`;return ae(e)||(i+=`?${s.eh}=${e}`),i}static async S_(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.ip,i);return{data:e,hash:yn(n)}}}return s.ip="SHA-256",s.eh="original-resource-name",s})(),Nn=(()=>{class s extends Ii{get busy(){return this.ih>0}constructor(){super(),this.v_="cssrm://",this.__=1,this.ds=!1,this.ih=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!Fs.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.w_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.A_(t);break;case"attributeChanged":this.T_(t);break;case"characterDataChanged":this.b_(t);break}return t}disableOnlineAssets(){this.ds=!1}enableOnlineAssets(){this.ds=!0}isOnlineAssetsActivated(){return this.ds}w_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case K.TEXT_NODE:this.rp(o,l==null?void 0:l.localName);break;case K.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let f=o.cssRules[h],d=this.vr(f);d!==null&&(o.cssRules[h]=d)}break}case K.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.vr(h.style)),(this.np(c.localName)||this.op(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this.rh(h.src)),"srcset"in h&&(h.srcset=this.nh(h.srcset))),this.ds&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let f=this.Di(ve(h.href),!0);h["data-cs-original-href"]=h.href,h.href=f}}}}return t}A_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)et.traverse(i,(n,o)=>{if(n.nodeType===Qe.TEXT_NODE&&o){this.rp(n,o.localName);return}if(!_e.isElement(n))return;let c=_e.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.vr(c.value)),this.np(n.localName)||this.op(n.localName,o==null?void 0:o.localName)){let l=_e.getAttribute(n,"src");l!=null&&l.value&&(l.value=this.rh(l.value));let h=_e.getAttribute(n,"srcset");if(h){h.value=this.nh(h.value);return}}if(this.R_(n)&&this.ds){let l=bi(n.attributes,f=>f.name==="href");if(!l||!l.value)return;let h=this.Di(ve(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}rp(t,e){if(!t||e!=="style")return;let i=this.vr(t.data);i!==null&&(t.data=i)}b_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.vr(t.newValue);e!==null&&(t.newValue=e)}T_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.vr(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.rh(t.newValue)),i&&(t.newValue=this.nh(t.newValue)))}rh(t){return ae(t)||this.ds?this.Di(t,!1,M.now()):t}nh(t){if(!this.ds)return t;let e=t,i=uo(t);for(let n of i){let o=this.Di(ve(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}vr(t){let e=di(t),i=t,n=M.now();for(let o of e){let c=ae(o);if(!(c||this.ds)||this.C_(o))continue;let l=id(o),h=o;c?h=this.Di(o,!1,n):this.ds&&(l?h=this.Di(o,!0,n):h=this.Di(ve(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}Di(t,e,i=M.now()){let n=this.__++;this.ih++;let o=e?_a.toCSSStaticResourceEvent:_a.toStaticResourceEvent,c=new ho(async l=>{try{let h=await o(t,n,i,this.ds);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.ih--}});return this.emitEvent(c),this.v_+n}np(t){return t==="img"}op(t,e){return t==="source"&&e==="picture"}R_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return ic()&&Kh()&&!!csArray.from}C_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Te([Ot("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),si=console;var gs={debug:(...s)=>si.debug(...s),log:(...s)=>si.log(...s),info:(...s)=>si.info(...s),warn:(...s)=>si.warn(...s),error:(...s)=>si.error(...s)},Mn=(()=>{class s{push(t){let e={value:t};this._r?(this.oh.next=e,this.oh=e):(this._r=e,this.oh=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this._r)return;let t=this._r;return this._r=t.next,this._r||(this.oh=void 0),t.value}isEmpty(){return!this._r}}return s})(),Si=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),fo=(()=>{class s{constructor(){this.ap=new Mn,this.cp=new Mn,this.length=0}push(t,e=Si.Low){return e===Si.High?this.ap.push(t):this.cp.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.ap.shift()||this.cp.shift()}isEmpty(){return this.length===0}}return s})(),Ug=(()=>{class s{get length(){return this.yt.length}constructor(){this.Mn=[],this.yt=new fo,this.ah=new Set}I_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}P_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${G(t.target)}-${t.type}${this.I_(t)}`}O_(t){switch(t.type){case"state":return Si.High;default:return Si.Low}}N_(t){let e=this.P_(t);if(e){if(this.ah.has(e))return;this.ah.add(e)}return this.yt.push({mutation:t,key:e},this.O_(t))}M_(){this.Mn.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Mn),t=>this.N_(t)),this.Mn=[])}push(t){csArray.prototype.push.call(this.Mn,t)}shift(){this.M_();let t=this.yt.shift();if(t)return t.key&&this.ah.delete(t.key),t.mutation}isEmpty(){return this.yt.isEmpty()&&this.Mn.length===0}}return s})(),Jr=new WeakMap,Qr=new WeakMap;function wa(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(Jr.has(s))return Jr.get(s);let t=r();return Jr.set(s,t),t}function Dn(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function jg(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return wa(o,()=>{let c=new Proxy(o,{get(l,h){let f=Reflect.get(l,h);return typeof f!="function"?f:wa(f,()=>i&2?Dn(function(...d){let m=Qr.get(this)||this,E=Reflect.apply(f,m,d);return e(m,[r,h],d,E),E},f):Dn(function(...d){let m=Qr.get(this)||this;return Reflect.apply(f,m,d)},f))},set:i&1?(l,h,f)=>{let d=Reflect.set(l,h,f);return e(l,[r,h],[f],d),d}:Reflect.set});return Qr.set(c,o),c})}})}function Hg(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=Dn(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function ut(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return gs.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let f of o)try{f(...h)}catch(d){gs.warn(`Error in spy hook for ${r} on target`,i,d)}};return e.mode?jg(i,r,c,l,e.mode):Hg(i,r,c,l),()=>o.delete(t)}function Ht(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var Bg=(()=>{class s{constructor(t){this.$e=t,this.It=new WeakMap,this.ge=e=>this.$e({type:"state",target:e}),this.lp=e=>this.$e({type:"setAdoptedStyleSheets",target:e}),this.wr=e=>this.$e({type:"styleSheetUpdated",target:e}),this.Dn=e=>{var i;let n=(i=this.D_(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.wr(n)},this.k_=e=>this.$e({type:"styleSheetDisabledChanged",target:e}),this.hp=e=>this.$e({type:"activeElementChanged",target:e.ownerDocument})}L_(t){return csNodenodeType.apply(t)===K.DOCUMENT_NODE}x_(t){let e=[Ht(t,"input",this.ge),Ht(t,"change",this.ge),Ht(t,"checked",this.ge),Ht(t,"scroll",this.ge),Ht(t,"toggle",this.ge),Ht(t,"focusin",this.hp),Ht(t,"focusout",this.hp),Ht(t,"pointerover",i=>{this.$e({type:"pointerOverElement",target:i.ownerDocument,element:i})}),Ht(t,"pointerout",i=>{this.$e({type:"pointerOverElement",target:i.ownerDocument,element:null})}),Ht(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.$e({type:"loaded",target:i});break}})];this.ch(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}V_(t){let e=t.defaultView;if(!e)return;let i=[Ht(e,"resize",()=>this.ge(t)),Ht(t,"visibilitychange",()=>this.ge(t)),Ht(t,"fullscreenchange",()=>this.ge(t)),ut(e.Document,"adoptedStyleSheets",this.lp,{mode:2}),ut(e.ShadowRoot,"adoptedStyleSheets",this.lp,{mode:2}),ut(e.Element,"attachShadow",(n,o,c,l)=>{this.$e({type:"attachShadow",target:n,shadowRoot:l})}),ut(e.HTMLInputElement,"value",this.ge),ut(e.HTMLInputElement,"checked",this.ge),ut(e.HTMLSelectElement,"selectedIndex",this.ge),ut(e.CSSStyleSheet,"insertRule",this.wr),ut(e.CSSStyleSheet,"deleteRule",this.wr),ut(e.CSSStyleSheet,"replace",this.wr),ut(e.CSSStyleSheet,"replaceSync",this.wr),ut(e.CSSStyleSheet,"addRule",this.wr),ut(e.CSSStyleRule,"style",this.Dn,{mode:1}),ut(e.CSSGroupingRule,"insertRule",this.Dn),ut(e.CSSGroupingRule,"deleteRule",this.Dn),ut(e.CSSStyleDeclaration,"setProperty",this.Dn),ut(e.CSSStyleDeclaration,"removeProperty",this.Dn),ut(e.StyleSheet,"disabled",this.k_),ut(e.HTMLDialogElement,"show",this.ge),ut(e.HTMLDialogElement,"showModal",this.ge),ut(e.HTMLDialogElement,"close",this.ge),ut(e.CustomElementRegistry,"define",(n,o,c)=>{this.$e({type:"customElementRegistration",target:t,name:c[0]})})];this.ch(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}D_(t){for(;t.parentRule!==null;)t=t.parentRule;return t}U_(t){let e=new csMutationObserver(i=>{this.$e(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.ch(t,()=>{e.disconnect()})}ch(t,e){this.It.get(t)==null||csArray.prototype.push.call(this.It.get(t),e)}observe(t){this.It.has(t)||(this.It.set(t,[]),this.x_(t),this.L_(t)&&this.V_(t),this.U_(t))}disconnect(t){let e=this.It.get(t)||[];for(let i of e)try{i()}catch(n){gs.warn(n)}this.It.delete(t)}}return s})(),Xc=new fo,nt,Fg=40,Gg=10;function $g(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%Gg===0&&(t=performance.now(),i=t-e<Fg),r++,i}})},0)}function Aa(){var s;let r=(s=nt==null?void 0:nt.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=nt==null?void 0:nt.subTasks,r):Xc.shift()}function Kc(){$g(s=>{for(nt||(nt=Aa());s.hasTimeLeft&&nt;){nt.isRunning=!0;try{nt.isEnded=nt.run(s)!==!0}catch(r){gs.error("Error occurred while running task:",r),nt.isEnded=!0}nt.isRunning=!1,(nt.isEnded||nt.isAborted)&&(nt=Aa())}nt&&Kc()})}function ii(s,r=Si.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return nt!=null&&nt.isRunning?(nt.subTasks=nt.subTasks||new fo,nt.subTasks.push(t,r)):Xc.push(t,r)===1&&!nt&&Kc(),t}var zg=40;function Ta(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function Zr(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var tn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function en(s,r){return!!s&&r in s&&!!s[r]}var ba={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},qg=(()=>{class s{constructor(t){this.A=t,this.z=new Bg(e=>{this.lh.push(e),this.j_()}),this.ze={},this.qe=new Map,this.lh=new Ug,this.kn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.up=0,this.dp=zg}disconnect(){for(let t of this.kn.values())this.z.disconnect(t);this.kn.clear()}observe(t){return this.disconnect(),this.Ia(t),this}getState(t=!0){let e=this.ze;return this.ze={...e},t&&this.fp(),e}getChanges(){let t={};for(let[i,n]of this.qe){let o=this.ze[i];if(!(n&&!o))if(o&&!n)t[i]=Us(o);else{let c=Oc(n,o);c!==void 0&&(t[i]=c)}}return this.fp(),Pc(t)?t:void 0}setFrameRate(t){return this.dp=t/1e3,this}onChange(t){return this.A=t,()=>{this.A===t&&(this.A=void 0,this.Ln&&(csClearTimeout(this.Ln),this.Ln=void 0))}}async getStateAsync(t=!0){return await this.pp(),this.getState(t)}async getChangesAsync(){return await this.pp(),this.getChanges()}async pp(){return new Promise(t=>{ii(()=>t())})}fp(){this.qe.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=Ta(e);return t?`${Ta(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:Zr(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:Zr(n),name:Zr(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=m=>{c.has(m)?c.delete(m):o.add(m)},h=m=>{o.has(m)?o.delete(m):c.add(m)};function f(m,E){for(let v of tn)v in E&&(en(m,v)&&l(m[v]),en(E,v)&&h(E[v]))}for(let[m,E]of Object.entries(e)){if(E===null)continue;let v=m,C=n[v],P=C===void 0?E:Nc(C,E);f(C,E),n[v]=P}let d=m=>{if(c.has(m))return;let E=n[m];if(E){delete n[m],i==null||i(m);for(let{nodeId:v}of s.nodeRelationsEntries(E))d(v)}};for(let m of o)d(m);return n}static nodeRelationsEntries(t,e=!1){let i=e?tn.filter(o=>o!=="nextSibling"):tn,n=[];for(let o of i)en(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}At(t){if(t in this.ze&&!this.qe.has(t)){let e=this.ze[t];this.qe.set(t,Us(e)),this.ze[t]=Us(e)}return this.ze[t]}H_(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:K.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:K.CSS_STYLESHEET_NODE,cssRules:{}}}}B_(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}F_(t){let e=li.getAll(t);switch(csNodenodeType.apply(t)){case K.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.B_(i);return{type:K.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&G(n),hoveredId:o&&G(o),...this.gp(t),metadata:e}}case K.DOCUMENT_FRAGMENT_NODE:return{type:K.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case K.COMMENT_NODE:return{type:K.COMMENT_NODE,data:void 0,metadata:e};case K.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:K.ELEMENT_NODE,namespaceURI:n in ba?ba[n]:n,localName:i.localName,attributes:this.G_(i),state:this.mp(i),metadata:e}}case K.TEXT_NODE:return{type:K.TEXT_NODE,data:t.data||"",metadata:e};case K.CDATA_SECTION_NODE:return{type:K.CDATA_SECTION_NODE,data:t.data,metadata:e};case K.DOCUMENT_TYPE_NODE:return{type:K.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}G_(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}gp(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}mp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}j_(){var t;((t=this.$_)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.$_=ii(e=>(this.Ar(e),this.yp(),!this.lh.isEmpty())))}yp(){if(!this.A||this.Ln)return;let t=performance.now()-this.up,e=Math.max(0,this.dp-t);this.Ln=csSetTimeout(()=>{this.Ln=void 0;let i=this.getChanges();this.up=performance.now(),i&&this.A(i,this.getState())},e)}z_(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.fs(e))return G(e)}q_(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.fs(i))return G(i)}Ia(t){let e=new Mn;e.pushMany(this.Ep(t,!1)),!e.isEmpty()&&ii(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.Ep(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}W_(t){switch(t){case K.DOCUMENT_NODE:return"contentDocument";case K.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Tr(t){ii(()=>{let e=t.ownerNode;if(e&&(!this.Er(e)||!this.fs(e)))return!1;if(this.fs(t)||!e||e.localName==="style"?this.Sp(t):this.hh(G(t),{type:K.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.fs(e)){let i=G(e);this.At(i).sheetId=G(t)}return!1})}vp(t){let e=0,i=G(t),n=t.adoptedStyleSheets||[],o=n.length,c={};ii(l=>{if(!this.fs(t)||!this.Er(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let f=n[e];c[e]=this.fs(f)?G(f):this.Sp(f),e+=1}if(e<o)return!0;let h=this.At(i);return h&&(h.adoptedStyleSheets=c),!1})}Sp(t){let e=G(t);return this.hh(e,this.H_(t)),e}hh(t,e){this.serializedNodeCount++,this.ze[t]=e,this.yp(),this.qe.has(t)||this.qe.set(t,null)}fs(t){return G(t)in this.ze}_p(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}wp(t){let e=G(t),i=this.ze[e];if(!i){gs.warn(`No serialized node id ${e}`);return}let n=this.q_(t);if(!n){gs.warn("No parent id for node",t);return}let o=this.W_(i.type);if(o==="childList"){let c=this.z_(t);this.uh(e,c,n,!0)}else{let c=this.At(n);c[o]=e,i.parent=n}}*Ep(t,e=!0){var i,n,o,c;if(!this.Er(t))return;if(this.fs(t)){e&&this.wp(t);return}let l=G(t),h=this.F_(t);if(!h){gs.warn("Node was not serialized",t);return}switch(this.hh(l,h),e&&this.wp(t),h.type){case K.DOCUMENT_NODE:case K.DOCUMENT_FRAGMENT_NODE:{let d=t;this.kn.set(l,d),this.z.observe(d),!((i=d.adoptedStyleSheets)===null||i===void 0)&&i.length&&this.vp(d);break}case K.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case K.ELEMENT_NODE:{let d=t;switch(h.localName){case"iframe":this._p(d)&&(yield d.contentDocument);break;case"link":d.rel==="stylesheet"&&d.sheet&&this.Tr(d.sheet);break;case"style":{let m=d.sheet;m&&this.Tr(m);break}default:Mf(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Ap(G(t.ownerDocument),h.localName),csElementshadowRoot.apply(d)&&(yield csElementshadowRoot.apply(d));break}break}}let f=csNodefirstChild.apply(t);f&&(yield f)}Ap(t,e){let i=this.At(t),n=i.customElements||(i.customElements={});n[e]=1}fh(t){let e=this.At(t);if(e){switch(e.type){case K.DOCUMENT_NODE:case K.DOCUMENT_FRAGMENT_NODE:this.z.disconnect(this.kn.get(t)),this.kn.delete(t)}delete this.ze[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.fh(i)}}uh(t,e,i,n){let o;if(e){let c=this.At(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.At(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.At(t);if(c.nextSibling=o,o){let l=this.At(o);l.previousSibling=t}}if(t){let c=this.At(t);c.parent=i,c.previousSibling=e}}Y_(t){var e;let i=this.At(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.At(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}Er(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}X_(t){let e=this.At(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}Ar(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.lh.shift());){if(this.processedMutationsCount++,!this.fs(n.target)||!this.Er(n.target))continue;let o=G(n.target);switch(n.type){case"attachShadow":{this.Ia(n.shadowRoot),this.At(o).shadowRoot=G(n.shadowRoot);break}case"childList":{let c,l=this.Y_(o);for(let f=csNodefirstChild.apply(n.target);f;f=csNodenextSibling.apply(f)){this.fs(f)||this.Ia(f);let d=G(f);l.delete(d),this.uh(d,c,o),c=d}this.uh(void 0,c,o);for(let f of l)this.X_(f),this.fh(f);let h=this.At(o);if(h.type===K.ELEMENT_NODE&&h.localName==="style"){let f=n.target.sheet;f&&this.Tr(f)}break}case"characterData":{let c=this.At(o);if(c.type===K.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Tr(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.At(o),f=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},f===null?delete h.attributes[c]:h.attributes[c]=f;break}case"state":{let c=this.At(o);c.type===K.DOCUMENT_NODE?Object.assign(c,this.gp(n.target)):c.state=this.mp(n.target);break}case"setAdoptedStyleSheets":{this.vp(n.target);break}case"styleSheetUpdated":{this.Tr(n.target);break}case"styleSheetDisabledChanged":{let c=this.At(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Tr(c.sheet);break}case"iframe":{let c=n.target,l=this.At(o),h=c.contentDocument,f=h&&G(h);l.contentDocument&&l.contentDocument!==f&&(this.fh(l.contentDocument),delete l.contentDocument),this._p(c)&&this.Ia(h);break}}break}case"activeElementChanged":{let c=this.At(o),l=n.target.activeElement||void 0;c.activeId=l&&G(l);break}case"pointerOverElement":{let c=this.At(o),l=n.element||void 0;c.hoveredId=l&&G(l);break}case"customElementRegistration":{this.Ap(o,n.name);break}}}}}return s.trackIframeContent=!1,s})(),Wg=(()=>{class s extends Ii{constructor(t){super(),this.tt=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||Fs.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(Fs.isDOMEvent(t))t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI);else for(let e of qg.findNodes(t.state,i=>i.type===K.DOCUMENT_NODE))e&&e.type===K.DOCUMENT_NODE&&(e.baseURI=this.tt.anonymizeUrl(e.baseURI));return t}}return Te([Ot("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Yg="textarea",Xg=(()=>{class s extends Ii{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Fs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.K_(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.J_(t);break;case"characterDataChanged":this.Q_(t);break}return t}K_(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n of Object.keys(e)){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.Tp(o,c.metadata,l.localName)}}J_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)et.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.Tp(n,h,l)})}Tp(t,e,i){this.bp(i,e)&&(t.data=this.Rp(t.data))}Q_(t){this.bp(t.parentLocalName,t.targetProps)&&(t.newValue=this.Rp(t.newValue))}Rp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}bp(t,e){return t===Yg||(e==null?void 0:e[ze.EDITABLE_NODE_PROP])===!0}}return Te([Ot("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Jc=!0,nr=csSymbol("safe"),Ra=csSymbol("task");function Lt(s,r=Jc){var t;(t=s[nr])!==null&&t!==void 0||(s[nr]=function(e){let i=arguments;As(()=>(e[Ra]=Dt,s.listener.apply(s.boundElement,i)),[he.EventListener,s.type],e[Ra])}),s.boundElement.addEventListener(s.type,s[nr],r)}function xt(s,r=Jc){s.boundElement.removeEventListener(s.type,s[nr],r)}var Kg=(()=>{class s{constructor(t){this.A=t,this.Kt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){Lt(this.Kt),this.ph()}ph(){this.resizeListener()}disconnect(){xt(this.Kt)}resizeListener(){let t={width:gt.windowWidth(),height:gt.windowHeight()};this.A(t)}}return lt([V("resize")],s.prototype,"resizeListener",null),s})(),$e=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Ki=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Ji=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Jg=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=st.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in st;function e(){return $e.LANDSCAPE}function i(){var c;switch((c=st.screen.orientation)===null||c===void 0?void 0:c.type){case Ki.PORTRAIT_PRIMARY:case Ki.PORTRAIT_SECONDARY:return $e.PORTRAIT;case Ki.LANDSCAPE_PRIMARY:case Ki.LANDSCAPE_SECONDARY:return $e.LANDSCAPE;default:return $e.PORTRAIT}}function n(){switch(window.orientation){case Ji.PORTRAIT:case Ji.PORTRAIT_REVERSE:return $e.PORTRAIT;case Ji.LANDSCAPE:case Ji.LANDSCAPE_REVERSE:return $e.LANDSCAPE;default:return $e.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),Qg=(()=>{class s extends be{constructor(){super(...arguments),this.gh=null,this.mh=null,this.ai=new Kg(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Jg.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.Z_(t);if(e!==this.gh||i!==this.mh){this.gh=e,this.mh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}Z_(t){let e,i,n=gt.screenWidth(),o=gt.screenHeight();return t===$e.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ai.observe()}onStop(){this.gh=null,this.mh=null,this.ai.disconnect()}}return s})();function Zg(s){let r=csEventtarget.apply(s);return r&&ct(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Gs=(()=>{class s{get selectors(){return this.We===""?null:this.We}constructor(t,e={closest:!1}){this.A=t,this.Pt=e,this.We="",this.Vn=new wr,this.Ar=Ts(i=>{if(this.We==="")return;let n=[];for(let o of ac(i,c=>c.addedNodes)){if(!(Nu(o)||this.Pt.closest&&lr(o)))continue;let c=this.Pt.closest?this.tw(o,this.We):this.findMatchingElements(o,this.We);zo(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.ew=(i,n)=>{if(this.We===""||n!=="added")return;let o=this.findMatchingElements(i,this.We);o.length&&this.A(o,"added")},this.z=new ts(this.Ar,this.ew)}observe(t){this.We===""?this.z.observe():this.We+=",",this.We+=t;let e=this.findMatchingElements(document,t);for(let i of this.z.shadowRoots){let n=this.findMatchingElements(i,t);zo(n,e)}e.length&&(J(e,i=>{this.Vn.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.Ar(this.z.takeRecords())}disconnect(){this.z.disconnect(),this.Vn.clear(),this.We=""}tw(t,e){let i=[];if(lr(t)){if(t.parentElement){let n=Rn(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Vn.has(n)===!1)}else{if(_i(t)){let n=Rn(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Vn.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=gi(window.csquerySelectorAll[t.nodeType].call(t,e));return ct(t)&&ee.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Vn.has(n)===!1)}}return lt([V()],s.prototype,"observe",null),lt([V()],s.prototype,"disconnect",null),lt([Ot("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),tm=(()=>{class s extends be{constructor(){super(),this.Cp=t=>{let e=Zg(t);e&&this.yh(e,t.type)},this.pe=new Ws((t,e)=>{switch(e){case"initial":case"added":this.Ip(t);break;case"removed":this.Pp(t);break}}),this.W=new Gs((t,e)=>{(e==="initial"||e==="added")&&this.iw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ft.isConnected(t)&&!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Ip(document),this.pe.observe(),this.W.observe("video")}onStop(){this.Pp(document),this.pe.disconnect(),this.W.disconnect()}yh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=G(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Yn(()=>this.produceEvent(o))}}iw(t){for(let e of t)this.yh(e,"seeked"),s.isPlaying(e)&&this.yh(e,"play")}Ip(t){for(let e of["play","pause","seeked"])Lt({type:e,listener:this.Cp,boundElement:t})}Pp(t){for(let e of["play","pause","seeked"])xt({type:e,listener:this.Cp,boundElement:t})}}return s})();function em(s){return s.nodeName==="SELECT"}function po(s){return s.nodeName==="INPUT"}function sm(s){return s.nodeName==="TEXTAREA"||po(s)&&!Qc(s)&&!Zc(s)}function Qc(s){return po(s)&&s.type==="number"}function Zc(s){return po(s)&&(s.type==="checkbox"||s.type==="radio")}var im=(()=>{class s extends be{constructor(t){super(),this.ht=t,this.Eh=new Kp("low"),this.Rr=e=>this.inputHandler(e),this.ki=[],this.rw(),this.nw(),this.W=new Gs(e=>{for(let i of e)this.Sh(i)&&Ft(()=>{this.vh(i,G(i))},"low")}),this.pe=new Ws((e,i)=>{switch(i){case"initial":case"added":Lt({type:"change",listener:this.Rr,boundElement:e});break;case"removed":xt({type:"change",boundElement:e,listener:this.Rr});break}})}onStart(){Lt({type:"keyup",boundElement:document,listener:this.Rr}),Lt({type:"change",boundElement:document,listener:this.Rr}),J(this.ki,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.ow,",")),this.pe.observe()}onStop(){xt({type:"keyup",boundElement:document,listener:this.Rr}),xt({type:"change",boundElement:document,listener:this.Rr}),J(this.ki,t=>t.deactivate()),this.W.disconnect(),this.pe.disconnect(),this.Eh.clear()}vh(t,e){var i,n,o;if(this.Eh.has(t))return;if(this.Eh.add(t),em(t)){let h={type:"InputEvent",inputType:"select",target:G(t),selectedIndex:t.selectedIndex,timestamp:M.now()};this.produceEvent(h);return}if(Zc(t)){let h={type:"InputEvent",inputType:"checkable",target:G(t),checked:t.checked,timestamp:M.now()};this.produceEvent(h);return}let c=sm(t),l=Qc(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ht)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ht)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:M.now()});return}let f=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:G(t),value:csString.prototype.replace.call(h,/\S/g,f),timestamp:M.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=mt(t),i=G(e);!i||!this.Sh(e)||ft.isConnected(e)&&Ft(()=>{this.vh(e,i)},"low")}rw(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}nw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=gr(t.prototype,e,(o,c,l)=>{if(l!==c&&ft.isConnected(o)){let h=i?o.parentElement:o;this.aw(h)}});n&&csArray.prototype.push.call(this.ki,n)}Sh(t){return!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)&&(Er(t)||Qn(t)||Jn(t))}aw(t){if(this.isStarted&&ft.isConnected(t)){let e=G(t);e&&this.Sh(t)&&Ft(()=>{this.vh(t,e)},"low")}}}return s.ow=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Te([Tt()],s.prototype,"inputHandler",null),Te([V()],s.prototype,"trackChanges",null),s})();var rm=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.ci=[],this.ot=[],this.lw=t}next(t){this.ot.length===this.lw&&csArray.prototype.shift.call(this.ot),csArray.prototype.push.call(this.ot,t),this.ot.length===1&&csSetTimeout(()=>this.clear());for(let e of this.ci)e(t)}subscribe(t){if(bi(this.ci,i=>t===i))return()=>{this.ci=csArray.prototype.filter.call(this.ci,i=>i!==t)};csArray.prototype.push.call(this.ci,t);for(let i of this.ot)t(i);return()=>{this.ci=csArray.prototype.filter.call(this.ci,i=>i!==t)}}clear(){this.ot=[]}hasObservers(){return this.ci.length>0}}return s})(),tl=(()=>{var s;class r{constructor(e){this.A=e}observe(){this.hw=s.Un.subscribe(e=>this.A(e)),s.Pa||(s.Pa=!0,s.Nn.observe(),te(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Os.add(i),s.Un.next(i)}))}disconnect(){s.Pa&&(this.hw(),s.Un.hasObservers()||(s.Pa=!1,s.Nn.disconnect(),s.Un.clear(),s.Os.clear()))}}return s=r,r.Os=new wr,r.Un=new rm,r.uw=Ts(t=>{Ft(()=>{for(let e of t)e.type==="childList"&&J(e.addedNodes,i=>{te(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Os.has(o)||(s.Os.add(o),s.Un.next(o))})})})},"ElementObserver.findAllElements"),r.Pa=!1,r.Nn=new ts(s.uw),lt([V()],r.prototype,"observe",null),lt([V()],r.prototype,"disconnect",null),r})(),nm=(()=>{class s extends be{constructor(){super(),this.Ns=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.fw=ys("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)D.isMaskedElement(i)||D.isMaskedElementChild(i)||Du(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Ar(this.fw);this.Hn=new tl(e=>t.push(e)),this.oi=new Set}onStart(){this.Ns&&this.Hn.observe()}onStop(){this.oi.clear(),this.Hn.disconnect()}async register(t){this.oi.has(t)||(this.oi.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Te([V()],s.prototype,"register",null),s})(),Ca=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Op(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.pw(t))}static pw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Li=i,s.Cr(i))}static bn(t){this.gw(t),this.Li&&t(this.Li),this.Ve||this.mw()}static gw(t){this.xt.add(t)}static yw(t){this.xt.delete(t)}static mw(){if(this.Bn||(this.Bn=this.Op()),!this.Bn){this.Li||(this.Li={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Cr(this.Li);return}this.Bn.observe({type:"navigation",buffered:!0}),this.Ve=!0}static Cr(t){this.xt.forEach(e=>e(t))}static Cn(t){this.yw(t),this.xt.size===0&&this.Fn()}static Fn(){var t;this.Ve&&((t=this.Bn)===null||t===void 0||t.disconnect(),this.Ve=!1,this.Li=null,this.Bn=this.Op())}constructor(t){this.A=t}observe(){s.bn(this.A)}disconnect(){s.Cn(this.A)}}return s.Ve=!1,s.xt=new Set,s.Li=null,s})(),om=(()=>{class s extends be{constructor(){super(...arguments),this.Oa=null,this.Np=new Ca(t=>{if(this.Oa)return;let e=this.Ew(t);e&&(this.Oa=e,this.produceEvent(e))})}onStart(){if(this.Oa){this.produceEvent(this.Oa);return}this.Np.observe()}onStop(){this.Np.disconnect()}Ew(t){let e=Ca.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:M.now()}}}return s})(),yt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Qi=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),am=(()=>{class s{compute(t,e){let i=this.li(e.x)-this.li(t.x),n=this.li(e.y)-this.li(t.y),o=e.time-t.time;return{duration:o,distance:this.Mp(i,n),direction:this.Sw(i,n),velocity:this.vw(i,n,o)}}computePinchMetrics(t,e){let i=this.li(e.x)-this.li(t.x),n=this.li(e.y)-this.li(t.y);return{duration:e.time-t.time,distance:this.Mp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}li(t){return t/window.devicePixelRatio}Mp(t,e){return Math.round(Math.sqrt(t*t+e*e))}vw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}Sw(t,e){return Math.abs(t)>Math.abs(e)?t>0?Qi.RIGHT:Qi.LEFT:e>0?Qi.DOWN:Qi.UP}}return s})(),el=typeof performance!="undefined"&&!!performance.now,Ia=el?()=>performance.now():()=>csDate.now(),cm=(()=>{var s;return el?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Zi={now(){return Math.round(Ia()+cm)},elapsed(){return Ia()}};function Pa(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var lm=1e3,hm=100,um=.1,kn=(()=>{class s{constructor(){this.Jt={},this._h=()=>{},this.Na=new am,this.Ce()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this._h=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this._w(t))return;this.Aw(t)&&this.Ce();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Zi.now()};if(t.touches.length===1)this.Jt.startPinchTime=e.time,this.Jt.firstTouch=e;else if(t.touches.length===2&&(this.Jt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Zi.now()},this.Jt.firstTouch&&this.Jt.secondTouch)){let i=this.Na.computePinchMetrics(this.Jt.firstTouch,this.Jt.secondTouch);this.Ir=i.distance}csArray.prototype.push.call(this.Gn,e),this.Ma=mt(t)}processActionMove(){this.Ah=!0}processActionUp(t){if(this.Tw(t)){if(csArray.prototype.push.call(this.Gn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Zi.now()}),this.bw(t)&&this.Jt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Jt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Zi.now()};this.Jt.firstTouch&&(this.Jt.firstTouch=e,this.Jt.secondTouch=i),this.Rw(t)}this.Ir||this.Cw()&&this.Iw(t)}}Ce(){this.Gn=[],this.Ma=null,this.Ah=!1,this.Ir=null,this.$n=!0}Iw(t){let e=this.Na.compute(this.Gn[0],this.Gn[1]);this.$n=t.isTrusted;let i=this.Ah?this.Pw(e):this.Ow(e);if(this.Nw(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Pa(n.pageX,1),i.pageY=Pa(n.pageY,1)}this._h(i,t)}Rw(t){if(!(this.Jt.firstTouch&&this.Jt.secondTouch))return;let e=this.Na.computePinchMetrics(this.Jt.firstTouch,this.Jt.secondTouch);this.$n=t.isTrusted;let i=this.Mw(e);i&&this._h(i,t)}Mw(t){return!this.Ir||this.Na.getScale(this.Ir,t.distance)<um?void 0:{type:this.Ir>t.distance?yt.PINCH_IN:yt.PINCH_OUT,target:this.Ma,distance:t.distance,isTrusted:this.$n}}Pw(t){return{type:t.velocity<hm?yt.DRAG:yt.FLICK,target:this.Ma,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.$n}}Ow(t){return{type:t.duration<lm?yt.TAP:yt.LONG_PRESS,target:this.Ma,isTrusted:this.$n}}Nw(t,e){return t===yt.TAP&&e&&e.length===1}Aw(t){return t.touches.length===1}Cw(){return this.Gn.length===2}_w(t){return t.touches.length>0}Tw(t){return t.changedTouches.length>0}bw(t){return this.Ah&&!!this.Ir&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),dm="touchstart",fm="touchmove",pm="touchend",gm=(()=>{class s{constructor(t){this.A=t}observe(){s.Dp&&s.Th(this.A)}disconnect(){s.Dp&&s.xn(this.A)}static Dw(t,e){csArray.prototype.forEach.call($s(s.xt),i=>i(t,e))}static Th(t){s.xt.has(t)||(s.xt.add(t),s.xt.size===1&&(s.zn.onGesture(s.Dw),csArray.prototype.forEach.call(s.hi,e=>Lt(e))))}static xn(t){s.xt.delete(t),s.xt.size===0&&csArray.prototype.forEach.call(s.hi,e=>xt(e))}static bh(t){if(s.zn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.zn.processActionDown(t);break;case"touchmove":s.zn.processActionMove();break;case"touchend":s.zn.processActionUp(t);break}}}return s.hi=[{boundElement:st.document,type:dm,listener:r=>s.bh(r)},{boundElement:st.document,type:fm,listener:r=>s.bh(r)},{boundElement:st.document,type:pm,listener:r=>s.bh(r)}],s.Dp=kn.isGestureDetectionSupported(),s.xt=new Set,s.zn=new kn,s})(),mm=(()=>{class s extends be{constructor(){super(),this.qn=new gm(this.Rh.bind(this))}onStart(){this.qn.observe()}onStop(){this.qn.disconnect()}Rh(t){let e=this.kw(t);e&&this.produceEvent(e)}kw(t){return this.Lw(t)?{type:"Gesture",targetId:G(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Lw(t){return t.target!==null&&!(ct(t.target)&&D.isMaskedElementChild(t.target))}}return s})();var xs=[],Ln=!1,sl=Ts(Em,"executeTasks");function ym(s){if(csArray.prototype.push.call(xs,s),!Ln){for(let r=0;r<3;r++)csSetTimeout(sl);Ln=!0}}function Em(){let s=csDate.now();for(let r=0;r<xs.length;r++)if(xs[r](),csDate.now()-s>=35){xs=csArray.prototype.slice.call(xs,r+1),csSetTimeout(sl);return}xs=[],Ln=!1}var Be=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),il=(()=>{class s{constructor(){this.yt=new Ti,this.Dt=Be.Stopped,this.A=null,this.xp=t=>{this.Dt===Be.Stopped||!t||(this.A(t),this.Vp())}}get queueLength(){return this.yt.length}start(t){if(this.A)throw new Error("callback already set");this.Dt=Be.Started,this.A=t}push(t){this.yt.push(t),this.Mh()}stop(){this.A=null,this.Dt=Be.Stopped,this.yt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),J(i,h=>h.subscribe(f=>l.push(f))),i=[c]}let o=new Sm(n);return J(i,c=>c.subscribe(l=>o.push(l))),o}Up(){return this.Dt===Be.Stopped}ps(){return this.Dt===Be.Processing}Vp(){if(!this.Up()){if(this.yt.isEmpty){this.Dt=Be.Completed;return}this.Dt=Be.Processing,ym(()=>{let t=this.yt.pop();t instanceof ho?t.complete(this.xp):this.xp(t)})}}Mh(){this.Up()||this.ps()||this.Vp()}}return s})(),Sm=(()=>{class s extends il{constructor(t){super(),this.jp=t}get queueLength(){return csArray.prototype.reduce.call(this.jp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),J(this.jp,t=>t.stop())}}return s})(),vm=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.Y=!1,this.xt=[]}get pendingEvents(){var t,e;return(e=(t=this.yt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.Y)throw new Error("Recording is already started.");let t=this.xt;this.yt=il.pipe(this.producers,this.processors),this.yt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),J(this.producers,e=>e.start()),J(this.processors,e=>e.start()),this.Y=!0}stop(){this.yt.stop(),this.xt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.Y=!1,this.xt=[]}subscribe(t){if(this.Y)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.xt,t),()=>this.xt=csArray.prototype.filter.call(this.xt,e=>e!==t)}}return s})(),_m=2,go=(()=>{class s{constructor(t){this.Bw=t,this.ka=0}addString(t){this.ka+=t.length*_m}addArrayBuffer(t){this.ka+=t.byteLength}isThresholdReached(){return this.ka>this.Bw}reset(){this.ka=0}}return s})(),wm=(()=>{class s{constructor(t){this.La={},this.Ie=new go(t)}save({key:t,metadata:e,events:i}){this.Ie.isThresholdReached()||(this.Ie.addString(t),typeof i=="string"?this.Ie.addString(i):this.Ie.addArrayBuffer(i),!this.Ie.isThresholdReached()&&(this.La[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.Fw(),i=>{let n=this.La[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.Gw(i))}),e.length!==0&&(t(e),this.Ie.reset())}Fw(){return Object.keys(this.La)}Gw(t){delete this.La[t]}}return s})(),Fe=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Am=(()=>{class s{constructor(t,e,i){this.Pr=t,this.$w=i,this.xi=Fe.NOT_STARTED,this.xa=[],this.Dh=0,this.zw=self.origin,this.Pe=typeof window=="object"?"":"worker-",this.Ie=new go(e),this.Yl()}async Yl(){await this.Hp(),this.xi===Fe.READY?this.qw():this.$w(this.xa)}qw(){csArray.prototype.forEach.call(this.xa,t=>{this.save(t)}),this.xa=[]}async save(t){try{if(this.xi===Fe.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.xa,t);return}if(this.xi!==Fe.READY||this.Ie.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ie.addString(e),typeof n=="string"?this.Ie.addString(n):this.Ie.addArrayBuffer(n),this.Ie.isThresholdReached())return;await this.re.put(`${this.zw}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.re&&(await this.Hp(),this.xi!==Fe.READY)||this.Ww(t)}async Hp(){try{this.xi=Fe.OPEN_IN_PROGRESS,this.re=await self.caches.open(`${this.Pe}${this.Pr}`),this.xi=Fe.READY}catch{this.xi=Fe.OPEN_FAILED}}async Ww(t){try{if(this.Dh++,this.Dh>1)return;let e=await this.re.keys();if(e.length===0)return;let i=await this.re.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((f,d)=>{l[d]=f}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(f=>({metadata:l,events:f})):c.arrayBuffer().then(f=>({metadata:l,events:f}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.re.delete(c))),t(o),this.Ie.reset()}catch{}finally{this.Dh--}}}return s})(),Tm=(()=>{class s{constructor(t){try{this.Yw(t)}catch{this.kh()}}Yw(t){self.caches?this.Xw(t):this.kh()}save(t){this.Va.save(t)}recover(t){this.Va.recover(t)}Xw(t){this.Va=new Am(t,s.Bp,e=>{this.kh(e)})}kh(t){this.Va=new wm(s.Bp),t&&csArray.prototype.forEach.call(t,e=>{this.Va.save(e)})}}return s.Bp=1024*1024*16,s})(),Tr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),rl=(()=>{class s{}return s})(),nl=(()=>{class s{constructor(t){this.Fp=[],this.Gp=[],this.Ye={},this.Ua=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Ye[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Ye[e]}):this.Ye={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Fp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Gp,t)}send(t){let e=yi.toQuery({...this.Ye,ct:Tr.UNCOMPRESSED}),i=this.Kw(e,t);return i?csArray.prototype.forEach.call(this.Fp,n=>n()):csArray.prototype.forEach.call(this.Gp,n=>n(this.Ye)),i}Kw(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Ua}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Ua}?${t}`,e||"")}}return s})(),bm=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.Wn=Wt.ETR_DISABLED,this.ja=Wt.ETR_PENDING,this.Lh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.$p()&&e===Wt.ETR_SAVED_SESSION?e:this.Wn}onEventTriggerRecording(t,e){switch(e){case Je.ETR_PAGE:this.zp(Wt.ETR_SAVED_PAGE);break;case Je.ETR_LEGACY:case Je.ETR_SESSION:this.zp(Wt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===N.RECORDING_TEMPORARILY?this.Lh=!0:this.Lh=!1,t===N.ANALYTICS_ONLY&&e===Kt.ETR_ON?this.qp(this.ja):this.qp(Wt.ETR_DISABLED)}qp(t){this.Wn=t,this.ja=Wt.ETR_PENDING,this.Wp(t),this.w.emitRecordingContextChange()}zp(t){this.Lh?Number(t)>Number(this.ja)&&(this.ja=t):this.$p()&&Number(t)>Number(this.Wn)&&(this.Wn=t,this.Wp(t),this.w.emitRecordingContextChange())}Wp(t){let e=this.R.getSession();e!==null&&e.etrStatus===Wt.ETR_NOT_SAVED_SESSION&&t===Wt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}$p(){return this.Wn!==Wt.ETR_DISABLED}}return s})(),Rm=(()=>{class s{constructor(t=100){this.Jw=t,this.Ha={},this.Yn=null,this.eh="original-resource-name"}onEvent(t){this.Qw=t}processEvent(t){this.Zw(t.resourceId,t.resource.hash,t.originalResourceName),this.tA(t)}flushEvents(){this.Yn&&csClearTimeout(this.Yn),this.Yp()}onSendStaticResource(t){this.tA=t}Yp(){if(!Object.keys(this.Ha).length)return;let t={type:k.RESOURCE_HASHES,date:M.now(),args:[this.Ha]};this.Yn=null,this.Ha={},this.Qw(t)}Zw(t,e,i){let n=e;i&&(n+=`?${this.eh}=${i}`),this.Ha[t]=n,!this.Yn&&(this.Yn=window.csSetTimeout(()=>this.Yp(),this.Jw))}}return s})();function Cm(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:k.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:k.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:k.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:k.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:k.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:k.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=Z(o)?[i,n,o]:[i,n];r({type:k.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:k.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:k.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:k.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:k.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:k.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:k.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=Z(o)?[i,n,o]:[i,n];r({type:k.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:k.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:k.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:k.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:F.error("translateDOMEvent: DOMEvent not supported");break}}function Im(s){let r=Pm(s.data);return{type:k.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function Pm(s){let r={type:Om(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Om(s){switch(s){case yt.DRAG:case yt.FLICK:return ei.SWIPE;case yt.LONG_PRESS:return ei.LONG_PRESS;case yt.TAP:return ei.TAP;case yt.PINCH_IN:return ei.PINCH_IN;case yt.PINCH_OUT:return ei.PINCH_OUT}}function Nm(s){switch(s.inputType){case"text":return{type:k.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:k.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:k.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var sn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function Mm(s){return{type:k.PERFORMANCE_TIMINGS,args:[{performanceTiming:sn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:sn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:sn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var Dm=500,rn=0;function km(){return{processEvent(s,r){if(s.originalEvent.type===k.PERFORMANCE_RESOURCE_TIMING)return rn>=Dm?null:(rn+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){rn=0}}}function Lm(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var xm=20;function Vm(s){return Lm(r=>{let t={visibleInViewPort:r},e={type:k.TEXT_VISIBILITY,date:M.now(),args:[t]};s(e)},{batchSize:xm,autoFlushDelay:1e3})}function Um(s){switch(s.videoEventType){case"play":return{type:k.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:k.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:k.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var jm=(()=>{class s{get pendingEvents(){return this.Ba.pendingEvents}constructor(t,e,i,n,o){this.Ba=t,this.w=e,this.Oe=i,this.Ms=n,this.Ds=o,this.Qt=()=>{},this.Fa=()=>{},this.Xp=Vm(c=>this.Qt(c))}start(){var t,e;this.Kp=km(),this.Ba.subscribe(i=>{var n,o,c,l,h,f;let d=i,{timestamp:m}=d;switch(d.type){case"Legacy":{let E=d.eventType==="user"?(n=this.Fa)!==null&&n!==void 0?n:()=>{}:this.Qt;this.Kp.processEvent(d,E)}break;case"CustomElementRegistration":{this.Qt({type:k.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[d.tagName]});break}case"DomEvent":{Cm(d,this.Qt,this.w);break}case"InputEvent":{let E=Nm(d);(o=this.Fa)===null||o===void 0||o.call(this,E);break}case"encryptedCharacterDataChanged":{let{target:E,rawData:v,encryptedData:C,encryptionMetadata:P}=d;this.Qt({type:k.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[E,v,C,P]});break}case"StaticResource":{let{url:E}=d;this.Qt({type:k.STATIC_RESOURCE_URL,date:m,args:[E]});break}case"ResizeMaskedElement":{let{target:E,width:v,height:C}=d;this.Qt({type:k.MUTATION_ATTRIBUTE,date:m,args:[E,"","style",`width:${v}px !important;height:${C}px !important;`]});break}case"Gesture":{let E=Im(i);(c=this.Fa)===null||c===void 0||c.call(this,E);break}case"TextVisibility":{this.Xp.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.Oe)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:E,height:v}=d,C={type:k.SCREEN_RESIZE,date:m,args:[E,v]};this.Qt(C);break}case"viewportResize":{let{width:E,height:v}=d,C={type:k.RESIZE,date:m,args:[E,v]};this.Qt(C);break}case"PerformanceTiming":{this.Qt(Mm(d));break}case"CustomError":{let E=(h=this.Ds)===null||h===void 0?void 0:h.translate(d);E&&this.Qt(E);break}case"JSError":{let E=(f=this.Ms)===null||f===void 0?void 0:f.translate(d);E&&this.Qt(E);break}case"VideoEvent":{let E=Um(d);E&&this.Qt(E);break}case"DOM_INITIAL_STATE":{let E={type:k.DOM_INITIAL_STATE,date:m,args:[d.state]};this.w.emitInitialDomDone(E);break}case"DOM_PATCH":{let E={type:k.DOM_PATCH_STATE,date:m,args:[d.diff]};this.Qt(E);break}case"warning":{F.warn(d.message);break}default:F.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.w.emitInitialDomStart(),(t=this.Ms)===null||t===void 0||t.start(),(e=this.Ds)===null||e===void 0||e.start(),this.Ba.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Ba.stop(),(t=this.Oe)===null||t===void 0||t.flushEvents(),(e=this.Ms)===null||e===void 0||e.stop(),(i=this.Ds)===null||i===void 0||i.stop()}flush(){this.Xp.flush()}onEvent(t,e){var i;this.Qt=t,this.Fa=e,(i=this.Oe)===null||i===void 0||i.onEvent(n=>this.Qt(n))}reset(){this.Kp.reset()}}return s})();var Hm=(()=>{class s extends be{constructor(t){super(),this.Ue=t}subscribe(t){return super.subscribe(t)}onStart(){J(this.Ue,t=>{t.onEvent(e=>{var i;return this.Or(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),J(this.Ue,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){J(this.Ue,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Or(t,e){this.produceEvent({timestamp:M.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),ol=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.sA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.iA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static iA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.sA="cs.tracking.",s})(),Yt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),al=(()=>{class s{constructor(){this.U=!1,this.pi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ne(Yt.Hidden):this.ne(Yt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ne(Yt.PagehideHidden):this.ne(Yt.PagehideVisible);case"blur":return this.ne(Yt.Blur);case"navigate":return this.rA(t)?this.ne(Yt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.U||(this.U=!0,this.xh(),this.nA(),this.oA(),Fo()&&this.aA())}stop(){this.U&&(this.U=!1,this.Vh(),this.cA(),this.lA(),Fo()&&this.hA())}onEvent(t){this.ne=t}aA(){window.navigation.addEventListener("navigate",this.pi)}hA(){window.navigation.removeEventListener("navigate",this.pi)}xh(){document.addEventListener("visibilitychange",this.pi)}Vh(){document.removeEventListener("visibilitychange",this.pi)}nA(){window.addEventListener("pagehide",this.pi)}cA(){window.removeEventListener("pagehide",this.pi)}oA(){window.addEventListener("blur",this.pi)}lA(){window.removeEventListener("blur",this.pi)}rA(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),bt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),Bm=(()=>{class s{constructor(t,e,i=[]){this.Or=t,this.Uh=e,this.uA=i,this.Ga=null,this.Dt=bt.Active,this.ot=[]}reset(){this.Ga=null,this.ot=[],this.Dt=bt.Active}disconnect(){this.Dt=bt.Stopped}dA(){this.Uh(bt.Paused),this.Dt=bt.Paused,csSetTimeout(()=>{this.Dt===bt.Paused&&this.jh()},s.STOP_TIMEOUT)}fA(){this.Uh(bt.Active),this.Dt=bt.Active,J(this.ot,this.Or),this.ot=[]}jh(){this.ot=[],this.Uh(bt.Stopped),this.Dt=bt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Ga=t.date,this.Dt!==bt.Active)){this.fA(),this.Or(t);return}if(this.pA(t)){this.Or(t);return}switch(this.Dt){case bt.Active:if(this.gA(t,e)){this.dA(),csArray.prototype.push.call(this.ot,t);return}this.Or(t);break;case bt.Paused:csArray.prototype.push.call(this.ot,t);break;case bt.Stopped:break}}gA(t,e){return!e.isUserEvent&&this.Ga!==null&&t.date-this.Ga>s.INACTIVITY_TIMEOUT}pA(t){return csArray.prototype.indexOf.call(this.uA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Fm=2e3,Gm=(()=>{class s extends Ut{constructor(t,e,i,n,o,c,l,h,f,d,m,E,v,C=[],P,S,w,I,O){super(),this.E=t,this.G=e,this.mA=i,this.F=n,this.R=o,this.Xe=c,this.Et=l,this.je=h,this.ht=f,this.X=d,this.Vt=m,this.Ot=E,this.He=v,this.Ue=C,this.Jp=P,this.Zt=S,this.Kn=w,this.Ms=I,this.Ds=O,this.gi=0,this.mi=new ol,this.Nr={allowFromQuotaService:!0,allowFromSerialization:!0},this.Qp=_r(()=>{this.G.eventsCount()>0&&this.Zp()},Fm),this.ks=T=>this.processBrowserEvent(T),this.Jn=T=>this.Ut(T),this.$a=0,this.Qn=0,this.Ke=new al,this.Hh=!1,this.tg=50*1024,this.ji=!1,this.Zn=!1,this.Mi=[],this.za=new Bm(T=>this.Z(T),T=>{switch(T){case bt.Active:this.yA();break;case bt.Stopped:this.EA();break}},[k.RESOURCE_HASHES,k.TEXT_VISIBILITY,k.API_ERROR,k.JAVASCRIPT_ERROR]),this.eg=T=>{this.Vt.removeBatchInProgress(`${T.params.sn}.${T.params.pn}.${T.params.ri}`)}}init(){this.Bh(),this.X.onLoad(this.eg),this.X.onError(this.eg)}yA(){csArray.prototype.forEach.call(this.Jp,t=>t.start())}EA(){csArray.prototype.forEach.call(this.Jp,t=>t.stopForInactivity())}Bh(){var t,e,i;this.He.onEvent(this.ks,this.Jn),(t=this.ht)===null||t===void 0||t.onInputNodeToEncrypt(this.Jn),(e=this.ht)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.sg(n)}),(i=this.ht)===null||i===void 0||i.onUserIdentifierToEncrypt(this.ks),this.Ke.onEvent(n=>{if(csSetTimeout(()=>this.Hi("page-state",n)),n!==Yt.Visible){if(n===Yt.Blur)return this.ig();if(!this.Hh)return this.Hh=!0,csSetTimeout(()=>{this.Hh=!1}),n===Yt.Hidden?this.ig():this.SA()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}ig(){if(!this.canSendEvents())return;this.He.flush(),this.Vt.saveBatchesInProgress(),J(this.Ue,c=>{var l,h;return J((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],f=>this.G.addEvent(f))});let t=this.G.getEvents();if(t.length===0)return;this.Hi("pending-events",this.He.pendingEvents);let e=this.X.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Qn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.G.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Ot.removeQueryParams(),this.Ot.setQueryParams(e);let o=this.G.stringifyEvents();if(o.length>this.tg){let c=this.rg();if(c.length>0){let l=vs(c);this.Ot.send(l)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.G.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.G.stringifyEvents();this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Ot.send(o)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Ot.removeQueryParams(),this.G.clearEvents()}SA(){if(!this.canSendEvents())return;this.He.flush();let t=this.X.getQueryParams();this.Vt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Ot.removeQueryParams(),J(this.Ue,n=>{var o,c;return J((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.G.addEvent(l))});let e=this.G.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Ot.setQueryParams(t),this.Ot.send(),this.Ot.removeQueryParams();return}this.Hi("pending-events",this.He.pendingEvents),this.Qn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Ot.setQueryParams(t);let i=this.G.stringifyEvents();if(i.length>this.tg){let n=this.rg();if(n.length>0){let o=vs(n);this.Ot.send(o)||this.Vt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Ot.removeQueryParams(),this.Ot.setQueryParams(t),this.Ot.send(),this.Ot.removeQueryParams();if(this.G.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.G.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.G.stringifyEvents();this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Ot.send(i)||(this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.G.getCurrentRequestIndex().increment());this.Ot.removeQueryParams(),this.G.clearEvents()}blockSendingEventsFromQuotaService(){this.Nr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Nr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Nr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Nr.allowFromSerialization=!0}canSendEvents(){return this.Nr.allowFromQuotaService&&this.Nr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Xe&&this.Ms){(e=this.Xe)===null||e===void 0||e.anonymize(t);let i=this.Ms.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:M.now(),type:"JSError"});i&&this.ks(i)}}onIframeCustomError(t){if(this.Ds){let e=this.Ds.translate({...t,timestamp:M.now(),type:"CustomError"});e&&this.ks(e)}}onIframeDetailedApiError(t){this.ng(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Ut(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.F.isCurrentPageviewValid()&&this.za.pushEvent(t,{isUserEvent:!1})}Ut(t){this.F.refreshSession(),this.F.isSessionValid()&&this.za.pushEvent(t,{isUserEvent:!0})}Z(t){kt.general.nbEvents.increase(),this.G.addEvent(t),this.G.isThresholdReached()?this.pushEvents():this.G.isFull()&&this.Qp(),this.og(t)}og(t){this.E.emitDebugEvents&&this.mi.emit("recordingEvent",{...t,typeName:k[t.type]})}onStart(){var t;this.Hi("tag-version","15.154.4"),this.Hi("page-state",document.visibilityState),this.za.reset(),this.Ke.start(),this.initStates(),this.He.start(),this.Et&&this.je&&this.Et.subscribe(s.jt,e=>this.ng(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.mi.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Mi,e=>this.ag(e)),this.Mi=[],this.ji&&((t=this.Zt)===null||t===void 0||t.enableOnlineAssets(),this.ji=!1)}onStop(){var t;this.Ke.stop(),this.Et&&this.Et.unsubscribe(s.jt),this.He.stop(),this.za.disconnect(),(t=this.Zt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.He.flush(),this.Qp.cancel(),this.pushEvents(),this.X.removeQueryParams()}initStates(){this.$a=M.now(),this.G.getCurrentRequestIndex().reset(),this.gi=0,this.X.setQueryParams(this.mA.getRequestParameters())}pushEvents(){J(this.Ue,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.G.eventsCount()>0&&(this.isStarted?this.Zp():this.G.clearEvents())}Zp(){if(!this.canSendEvents())return;let t=this.G.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Qn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.$a>this.Qn?i[0].date:this.$a;this.X.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.X.getQueryParams();this.Vt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.X.getQueryParams()},i),this.X.send(i),n.increment(),e.batch.clearEvents(),this.cg&&this.cg()}this.G.clearEmptyBatchSlots()}addInitialDom(t){this.G.addEventByTimestamp(t),this.og(t)}ng(t){if(this.Kn&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Kn.truncate(t),this.ht){this.ht.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.sg(t)}sg(t){if(this.gi<s.vA){let e={type:k.API_ERROR,date:M.now(),args:[this.je.anonymize(t)]};this.ks(e),this.gi=this.gi+1,$.counters.networkRequests.count("collected")}}_A(t){t===Je.ETR_SESSION?this.X.setQueryParams({[s.wA]:s.lg}):t===Je.ETR_PAGE&&this.X.setQueryParams({[s.AA]:s.lg})}clearEvents(){this.G.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Ms)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:M.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.ks(i)}onCustomErrorEvent(t){var e;let i=(e=this.Ds)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:M.now(),message:t.message,attributes:t.attributes});i&&this.ks(i)}onPageEvent(t){this.hg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:M.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ht)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.ag({eventName:t,eventType:e}):csArray.prototype.push.call(this.Mi,{eventName:t,eventType:e})}ag(t){this._A(t.eventType),this.hg(t.eventName),this.pushEvents()}hg(t){let e={type:k.PAGE_EVENT,date:M.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.TA)}]};this.G.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:M.now(),type:k.UNANONYMIZED_CONSENT_GRANTED};this.G.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:M.now(),type:k.UNANONYMIZED_CONSENT_WITHDRAWN};this.G.addEvent(t)}triggerRecordingForSessionGranted(){this.Hi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Hi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Zn=!0}getStaticResourceManagerStatus(){return this.Zt?{isStarted:this.E.useStaticResourceManager&&Nn.isSupported(),onlineAssets:{activated:this.Zt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Zn}}:null}resetOnlineAssetsOnPageview(){this.ji=!1,this.Zn=!1}updateOnlineAssetsOnPageview(){this.Zt&&this.Zn&&(this.ji=!0,this.Zn=!1)}onRecordingRequestSent(t){this.cg=t}getRecordingStartTimestamp(){return this.$a.toString()}getRecordingLastEventTimestamp(){return this.Qn.toString()}onOptOut(){J(this.Ue,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:M.now(),type:k.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.G.addEvent(i)}rg(){return this.G.extractEvents(k.API_ERROR,k.JAVASCRIPT_ERROR,k.CUSTOM_ERROR,k.TEXT_VISIBILITY,k.POINTER_DOWN)}}return s.jt="RecordingService",s.TA=255,s.vA=20,s.AA="etrp",s.wA="etrs",s.lg="1",B([Ot("addInitialDom")],s.prototype,"addInitialDom",null),s})(),$m=(()=>{class s extends Ut{constructor(t,e,i){super(),this.oe=t,this.Ot=e,this.X=i,this.Fh=!1,this.to={},this.bA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.RA(c.rt)&&this.X.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.to={}}onStop(){}recover(){this.oe.recover(this.bA)}addBatchInProgress(t,e,i){this.to[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.to[t]}blockSendingLastMessage(){this.Fh=!1}allowSendingLastMessage(){this.Fh=!0}sendLastMessageBeacon(){if(this.Fh){let{ri:t,rst:e,let:i,...n}=this.X.getQueryParams();n.hlm="true",this.Ot.setQueryParams(n),this.Ot.send()}}RA(t){return!!t&&csString.prototype.indexOf.call(t,N.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.to),t=>{let{metadata:e,events:i}=this.to[t];this.oe.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.oe.save(t)}}return B([V("RecordingRecovery")],s.prototype,"recover",null),s})(),zm=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),qm=8*1024*1024,Wm=(()=>{class s extends Ut{constructor(t,e,i){super(),this.Oe=t,this.ug=e,this.mt=i,this.Gh={},this.dg=new Set,this.ps=!1}initState(){ic()&&(this.Le=this.mt.getRequestParameters(),this.CA=`${this.ug}/exist?${yi.toQuery(this.Le)}`,this.IA=`${this.ug}/putTag?${yi.toQuery(this.Le)}`,this.fg=pi(async()=>{if(this.ps){this.fg();return}this.ps=!0;try{await this.PA()}finally{this.ps=!1}},300),this.Oe.onSendStaticResource(t=>{this.pg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.pg(t)}pg(t){this.gg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.gg(e.hash,e.data)})}gg(t,e){this.dg.has(t)||(this.dg.add(t),this.Gh[t]=e,this.fg())}async PA(){let t=this.Gh;this.Gh={};let e=await this.OA(t);if(!e.length)return;let i=this.NA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.IA,{method:"POST",body:n})))}async MA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Le.pid,filter:zm.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.CA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async OA(t){let e=[],i=await this.MA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):F.warn("SRM: received unknown hash: "+n)}),e}NA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<qm)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),cl=2*1e3*1024,Ym=200,Oa=(()=>{class s{constructor(t=cl){this.Ht=[],this.$h=new go(t)}addEvent(t){this.$h.addString(vs(t)),csArray.prototype.push.call(this.Ht,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ht.length&&!(this.Ht[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ht,e,0,t)}eventsCount(){return this.Ht.length}clearEvents(){this.$h.reset(),this.Ht=[]}isFull(){return this.eventsCount()>=Ym}isThresholdReached(){return this.$h.isThresholdReached()}getEvents(){return this.Ht}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ht,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Ht=i,e}stringifyEvents(){return vs(this.Ht)}pO(t){t.type===k.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return B([Ot("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function Xm(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var Na=(()=>{class s{constructor(){this.qa=1}getCurrentIndex(){return this.qa}increment(){this.qa+=1}reset(){this.qa=1}getRequestParameters(){return{ri:`${this.qa}`}}}return s})(),Km=3,Jm=8,Qm=(()=>{class s{constructor(t,e=cl,i=Km){this.DA=t,this.mg=e,this.zh=i,this.Wa={}}addEvent(t){this.yg().addEvent(t)}addEventByTimestamp(t){this.yg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Bi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Bi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Bi();return t.length>=this.zh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return vs(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Bi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Wa[t[e].metadata.pageNumber]}Bi(){return Xm(this.Wa)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Bi(),Zm)}Eg(){let t=this.DA();if(t<=0)return{batch:new Oa(this.mg),metadata:{pageNumber:0,requestIndex:new Na}};let e=this.Wa[t];if(e)return e;let i={batch:new Oa(this.mg),metadata:{pageNumber:t,requestIndex:new Na}};return this.Wa[t]=i,this.Bi().length>Math.max(this.zh,Jm)&&F.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Bi().length}/${this.zh})`),i}yg(){return this.Eg().batch}getCurrentRequestIndex(){return this.Eg().metadata.requestIndex}}return s})();function Zm(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function Mt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var ty=(()=>{class s{constructor(t,e){this.Lt=t,this.D=e,this.hi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.V=t}start(){this.Fi(),this.triggerInitialEvents()}stop(){this.Gi()}Fi(){csArray.prototype.forEach.call(this.hi,t=>Lt(t))}Gi(){csArray.prototype.forEach.call(this.hi,t=>xt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:k.HASH_CHANGE,args:[this.D.anonymizePII(this.Lt.href)],date:M.now()};this.V(t)}visibilityChangeListener(){let t={type:k.VISIBILITY_CHANGE,args:[document.visibilityState],date:M.now()};this.V(t)}}return B([V("hashChange")],s.prototype,"hashChangeListener",null),B([V("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),js=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),W=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function ey(s){if(!q(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Ma="data-cs-scroll-container";function sy(s){try{if(Pt(csEventtarget.apply(s)))return!0}catch{}return!1}var Hs=(()=>{let s;return function(r){function t(i){return!!(Pt(i)&&sy(i)&&_i(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ma)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ma}]`)}r.getScrollContainer=e}(s||(s={})),s})(),iy=33,ry=(()=>{class s{constructor(){this.eventType="user",this.Wh=[],this.BA=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.FA=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Xa=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Yh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=ey(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Yh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.pe=new Ws((e,i)=>{switch(i){case"initial":case"added":this.Fi(e);break;case"removed":this.Gi(e);break}})}init(){this.GA(),this.$A(),this.Xh()}onEvent(t){csArray.prototype.push.call(this.Wh,t)}ae(t,e=!1){csArray.prototype.forEach.call(this.Wh,i=>i(t,e))}start(){this.ph(),this.Fi(document),this.pe.observe()}stop(){this.Gi(document),this.pe.disconnect(),this.Wh=[]}$A(){this.zA()&&csArray.prototype.push.call(this.Xa,...this.BA)}GA(){this.qA()&&csArray.prototype.push.call(this.Xa,...this.FA)}Fi(t){hr(t)?csArray.prototype.forEach.call(this.Xa,e=>Lt(e)):csArray.prototype.forEach.call(this.Yh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Lt(i)})}Gi(t){hr(t)?csArray.prototype.forEach.call(this.Xa,e=>xt(e)):csArray.prototype.forEach.call(this.Yh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};xt(i)})}zA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}qA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}ph(){this.WA()}WA(){let t=Hs.getScrollContainer()||document,e=G(t),i=this.Sg(t);if(i.top!==0||i.left!==0){let n={type:k.SCROLL,args:[e,i.left,i.top],date:M.now()};this.ae(n,!0)}}Sg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(D.isMaskedElement(t)||D.isMaskedElementChild(t))return;let e=G(t),i=this.Sg(t),n={type:k.SCROLL,args:[e,i.left,i.top],date:M.now()};this.ae(n)}mouseOverListener(t){if(D.isMaskedElementChild(t.target))return;let e=G(t.target),i={type:k.MOUSE_OVER,args:[e],date:M.now()};this.ae(i)}clickListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n={type:k.CLICK,args:[i],date:M.now()};this.ae(n)}keyUpListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n=this.B[t.key];if(n===void 0)return;let o={type:k.KEY_UP,args:[i,n],date:M.now()};this.ae(o)}keyDownListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n=this.B[t.key];if(n===void 0)return;let o={type:k.KEY_DOWN,args:[i,n],date:M.now()};this.ae(o)}copyListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n={type:k.CLIPBOARD_COMMAND,args:[i,js.COPY],date:M.now()};this.ae(n)}cutListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n={type:k.CLIPBOARD_COMMAND,args:[i,js.CUT],date:M.now()};this.ae(n)}pasteListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n={type:k.CLIPBOARD_COMMAND,args:[i,js.PASTE],date:M.now()};this.ae(n)}pointerUpListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n={type:k.POINTER_UP,args:[t.pointerId,t.pointerType,Mt(t.clientX,1),Mt(t.clientY,1),i,t.button],date:M.now()};this.ae(n)}pointerMoveListener(t){let e={type:k.POINTER_MOVE,args:[t.pointerId,t.pointerType,Mt(t.clientX,1),Mt(t.clientY,1)],date:M.now()};this.ae(e)}pointerDownListener(t){let e=mt(t);if(D.isMaskedElementChild(e))return;let i=G(e),n={type:k.POINTER_DOWN,args:[t.pointerId,t.pointerType,Mt(t.clientX,1),Mt(t.clientY,1),i,t.button,{pageX:Mt(t.pageX,1),pageY:Mt(t.pageY,1)}],date:M.now()};this.ae(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:k.TOUCH_START,args:[n.identifier,Mt(n.clientX,1),Mt(n.clientY,1)],date:M.now()};this.ae(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:k.TOUCH_MOVE,args:[n.identifier,Mt(n.clientX,1),Mt(n.clientY,1)],date:M.now()};this.ae(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?k.TOUCH_END:k.TOUCH_CANCEL,args:[n.identifier,Mt(n.clientX,1),Mt(n.clientY,1)],date:M.now()};this.ae(o)}}Xh(){this.B={},this.B[" "]=W.SPACE,this.B.Spacebar=W.SPACE,this.B.Backspace=W.BACKSPACE,this.B.Enter=W.ENTER,this.B.Delete=W.DELETE,this.B.ArrowUp=W.ARROWUP,this.B.ArrowDown=W.ARROWDOWN,this.B.ArrowLeft=W.ARROWLEFT,this.B.ArrowRight=W.ARROWRIGHT,this.B.Up=W.ARROWUP,this.B.Down=W.ARROWDOWN,this.B.Left=W.ARROWLEFT,this.B.Right=W.ARROWRIGHT,this.B.CapsLock=W.CAPSLOCK,this.B.Shift=W.SHIFT,this.B.Tab=W.TAB,this.B.Escape=W.ESCAPE,this.B.Esc=W.ESCAPE,this.B.End=W.END,this.B.Alt=W.ALT,this.B.Control=W.CTRL,this.B.Meta=W.META}}return B([Ot("RecordingPageEvents.start")],s.prototype,"start",null),B([V("scroll")],s.prototype,"scrollListener",null),B([V("mouseOver"),Tt(),Rf()],s.prototype,"mouseOverListener",null),B([V("click"),Tt()],s.prototype,"clickListener",null),B([V("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([V("Event handler type: keydown")],s.prototype,"keyDownListener",null),B([V("Event handler type: copy")],s.prototype,"copyListener",null),B([V("Event handler type: cut")],s.prototype,"cutListener",null),B([V("Event handler type: paste")],s.prototype,"pasteListener",null),B([V("Event handler type: pointerup"),Tt()],s.prototype,"pointerUpListener",null),B([V("Event handler type: pointermove"),Tt(),oo({wait:iy})],s.prototype,"pointerMoveListener",null),B([V("Event handler type: pointerdown"),Tt()],s.prototype,"pointerDownListener",null),B([V("Event handler type: touchstart"),Tt()],s.prototype,"touchStartListener",null),B([V("Event handler type: touchmove"),Tt()],s.prototype,"touchMoveListener",null),B([V("Event handler type: touchend-cancel"),Tt()],s.prototype,"touchEndCancelListener",null),s})(),ny=(()=>{class s{constructor(){}onScannedAsset(t){this.Ka=t}Ja(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.Kh(di(t))}scanElement(t,e){D.getMaskedElementDetails(t).state!==D.MaskedElementState.NotMasked||e&&D.isMaskedAttribute(t,e)||(yr(t)?this.YA(t):Kn(t)?this.KA(t,e):(this.JA(t,e),this.QA(t,e),this.ZA(t,e)))}KA(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.Ja(),assetRawPath:$c(t)};this.Ka({type:"stylesheet",asset:o})}}YA(t){var e;let i=new Set;if(t.textContent)for(let o of di(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||F.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of di(c))i.add(l)}this.Kh($s(i))}Jh(t){return!this.tT(t)&&!ae(t)&&!sd(t)}JA(t,e){if(Au(t)||wu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Jh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.Ja()};this.Ka({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.eT(t.srcset)}}QA(t,e){if(csNodenodeType.apply(t)!==1){it.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}eT(t){this.Kh(uo(t))}ZA(t,e){if((Cu(t)||Iu(t)||Pu(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Jh(i)){let n={assetId:ve(i),assetRawPath:i,assetBasePath:this.Ja()};this.Ka({type:"asset",asset:n})}}}Kh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Jh(e)),e=>({rawUrl:e,absoluteUrl:ve(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.Ja(),assetRawPath:e.rawUrl};this.Ka({type:"asset",asset:i})})}tT(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),oy=30,ay=0,ll=(()=>{class s{constructor(t,e=oy,i=ay){this.sT=t,this.iT=e,this.rT=i,this.Qe=new Ti,this.Fe=!1,this.Qh=0,this.vg=()=>{for(this.Qh=0;this.Qe.length;){if(this.Qh>=this.iT){csSetTimeout(this.vg,this.rT);return}let n=M.elapsed(),o=this.Qe.pop();if(!o)break;this.runTask(o);let c=M.elapsed()-n;this.Qh+=c}this.Fe=!1}}schedule(t,e=!1){if(!this.sT||e){t();return}kt.general.pendingTasks.increase(),this.Qe.push(t),this.nT()}nT(){this.Fe||(this.Fe=!0,csSetTimeout(()=>{this.vg()}))}runTask(t){kt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Qe.forEach(t=>{this.runTask(t)}),this.Qe.clear()}clearQueue(){kt.general.pendingTasks.clear(),kt.mutations.pendingMutations.clear(),this.Qe.clear()}isEmpty(){return this.Qe.length===0}}return B([V("TaskScheduler"),Ot("runTask")],s.prototype,"runTask",null),B([Ot("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),cy=(()=>{class s{constructor(){this.Y=!1,this._g=new lo(t=>t.type==="cssRuleInserted"&&this.oT(t)),this.aT=Ar(t=>{this.Y&&t.length>0&&this.M.schedule(()=>J(t,e=>this.io.scanElement(e)))}),this.cT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.lT)===null||i===void 0||i.call(this,e)),(n=this.hT)===null||n===void 0||n.call(this,e);let c={date:M.now(),type:k.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.V)===null||o===void 0||o.call(this,c)},this.M=new ll(!0,30,0),this.Hn=new tl(t=>this.uT(t)),this.L=new ts(t=>this.Ar(t)),this.io=new ny,this.io.onScannedAsset(this.cT)}onEvent(t){this.V=t}onAsset(t){this.hT=t}onStyleSheetFound(t){this.lT=t}start(){this.Y||(this.Y=!0,this._g.observe(),this.Hn.observe(),this.L.observe())}stop(){this.Y&&(this._g.disconnect(),this.Hn.disconnect(),this.L.disconnect(),this.Y=!1)}oT(t){!t.rule||!this.Y||this.io.scanCssString(t.rule)}uT(t){this.Y&&D.getMaskedElementDetails(t).state===D.MaskedElementState.NotMasked&&this.aT.push(t)}Ar(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.io.scanElement(e.target,e.attributeName);break;case"characterData":this.dT(e.target);break;case"childList":}})}dT(t){lr(t)&&csNodeparentNode.apply(t)&&yr(csNodeparentNode.apply(t))&&this.io.scanCssString(t.data)}}return s})(),ly="csPersisted",Da="v2/recording",hy=["isRecording"],uy=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],dy=["replay:resourceManager:getStatus","cssrm:getStatus"],fy=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,d,m,E,v,C,P,S,w,I,O,T,U,tt){this.yi=t,this.R=e,this.E=i,this.Le=n,this.S=o,this.D=c,this.F=l,this.ye=h,this.Xe=f,this.Et=d,this.je=m,this.Tt=E,this.w=v,this.Ei=C,this.wg=P,this.qt=S,this.Ee=w,this.tt=I,this.Kn=O,this.it=T,this.gO=U,this.ht=tt}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new wg),this.ro=new Ng(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits),this.$i();let o=new Tm(ly);this.fT(o),this.G=new Qm(()=>{var I;return((I=this.R.getSession())===null||I===void 0?void 0:I.pageNumber)||0});let c=new cy;csArray.prototype.push.call(i,c),this.E.useStaticResourceManager&&Nn.isSupported()&&(this.Zt=new Nn,this.Oe=new Rm,this.Ag=new Wm(this.Oe,this.E.getStaticResourceManagerUri(),this.Le),this.wg.addListener(this.Ag),csArray.prototype.push.call(n,this.Zt));let l=new Ei(this.Le,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")})}),h=new nl(`${this.E.getRecordingUri()}/${Da}`);csArray.prototype.push.call(n,this.ro),csArray.prototype.push.call(n,new Wg(this.tt)),csArray.prototype.push.call(n,new Xg),this.zi=new ry,this.zi.init(),csArray.prototype.push.call(i,this.zi),this.Vt=new $m(o,h,this.X),csArray.prototype.push.call(i,new ty(window.location,this.D));let f=new _g,d=new Qg,m=new tm,E=new im(this.ht),v=new nm,C=[d,this.ye,f,new Hm(csArray.prototype.filter.call(i,I=>I)),v,new om,new mm,E,m],P=new vm(C,n),S=new jm(P,this.w,this.Oe,this.Ms,this.Ds),w=[f,d,m,E,v];this.recordingService=new Gm(this.E,this.G,l,this.F,this.R,this.Xe,this.Et,this.je,this.ht,this.X,this.Vt,h,S,i,w,this.Zt,this.Kn,this.Ms,this.Ds),this.Ei.addListener(this.recordingService),this.wg.addListener(this.recordingService),this.recordingService.init(),this.S.register(hy,()=>this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()),this.S.register(uy,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(dy,()=>this.recordingService.getStaticResourceManagerStatus()),this.no=new bm(this.w,this.R),this.Ei.addListener(this.no),this.yi.enableRecordingContext(this.recordingService,this.R,this.no),this.Zh()}onAfterNaturalPageView(){var t;this.qt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ag)===null||t===void 0||t.initState()}onStartTracking(){this.Vt.recover(),this.$i(),this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Qa())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Vt.sendLastMessageBeacon(),this.recordingService.clearStates(),this.oo()}onAfterArtificialPageView(){this.$i(),this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Qa()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.oo()}onOptout(){this.oo(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.$i(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.$i(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===N.QUOTA_REACHED||t===N.ANALYTICS_ONLY&&e===Kt.ETR_OFF?(this.recordingService.clearEvents(),this.oo()):(this.X.setQueryParams({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.no.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.Qa()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Vt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Vt.allowSendingLastMessage(),this.zi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Qa(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.oo())}Zh(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;J(l,h=>{ci(h)&&ts.setShadowRootFilter(f=>{try{return ee.call(f.host,h)}catch{return!1}})})}}Qa(){this.recordingService.start(),this.Vt.start(),this.w.emitRecordingContextChange()}oo(){this.recordingService.stop(),this.Vt.stop(),this.w.emitRecordingContextChange()}fT(t){let e="byteArray";this.X=this.Ee.create(`${this.E.getRecordingUri()}/${Da}`,e,t)}$i(){var t;let e=this.it.shouldUseAnonymization();this.ro.setAnonymization(e),(t=this.pT)===null||t===void 0||t.setAnonymization(e)}}return B([Ot("Recording.onStartTracking")],s.prototype,"onStartTracking",null),B([Ot("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})();var py=1024,gy=512,nn=1024,on="||",my=(()=>{let s;return function(r){function t(c,l){return q(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),Ye.CHAMELEON)!==-1?Ye.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let f=i(h);return{type:z.CUSTOM_EVENT,ts:0,customEventName:oe.truncate(c,py,oe.ELLIPSIS),sourceLibrary:df(l)?l:Ye.WEB,...mn(f)?{}:{properties:f}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>gy)continue;let f=c[h];if(Xt(f)||or(f))l[h]=csString(f);else if(o(f))l[h]=oe.truncate(f,nn,oe.ELLIPSIS);else if(cu(f)){let d=n(f);d!==""&&(l[h]=d)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let f=c[h];if(!Xt(f)&&!or(f)&&!o(f))continue;let d=csString(f);if(l==="")l=oe.truncate(d,nn,oe.ELLIPSIS);else if(l.length+on.length+d.length<=nn)l+=on+d;else break}return l}function o(c){return q(c)&&!zn(c)&&!csString.prototype.includes.call(c,on)}}(s||(s={})),s})(),It=(()=>{class s{static buildFromCustomEvent(t,e){return this.Tg(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.Tg(t,e,i)}static Tg(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var yy=(()=>{class s extends Ut{constructor(t,e,i,n,o,c,l,h,f,d,m,E,v,C,P,S,w,I,O,T,U,tt){super(),this.E=t,this.Si=e,this.Bt=i,this.Mr=n,this.tu=o,this.Ze=c,this.Ne=l,this.eu=h,this.F=f,this.oe=d,this.J=m,this.su=E,this.Ke=v,this.X=C,this.Ft=P,this.Za=S,this.Ls=w,this.xs=I,this.iu=O,this.qi=T,this.Wi=U,this.Yi=tt,this.mi=new ol,this.tc=!1,this.Xi=[]}init(){var t,e,i,n,o,c,l;this.Si.onEvent(h=>this.Ut(h)),this.Bt.onEvent(h=>this.Ut(h)),this.Mr.onEvent(()=>{let h=this.Mr.getRequestParameters();this.X.setQueryParams(h),this.Ne.setQueryParams(h)}),this.su.onEvent(h=>this.ce(h)),this.ru(),(t=this.Za)===null||t===void 0||t.onEvent(h=>this.Ut(h)),(e=this.qi)===null||e===void 0||e.onEvent(h=>this.Ut(h)),(i=this.Ls)===null||i===void 0||i.onEvent(h=>this.Ut(h)),(n=this.xs)===null||n===void 0||n.onEvent(h=>this.Ut(h)),this.gT(),(o=this.iu)===null||o===void 0||o.onEvent(h=>this.ce(h)),(c=this.Wi)===null||c===void 0||c.onEvent(h=>this.ce(h)),(l=this.Yi)===null||l===void 0||l.onEvent(h=>this.ce(h))}gT(){this.Ne.onBeaconSuccess(()=>{this.Ze.clearEvents()}),this.Ne.onBeaconFailure(t=>{this.mT(t)})}initStates(){let t=this.eu.getRequestParameters(),e=this.tu.getRequestParameters(),i=this.Mr.getRequestParameters();this.X.setQueryParams(t),this.X.setQueryParams(e),this.X.setQueryParams(i),this.Ne.setQueryParams(t),this.Ne.setQueryParams(e),this.Ne.setQueryParams(i),this.nu()}clearStates(t){var e,i;this.Si.flushPendingDebouncedListeners(),(e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.xs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.ou(),this.sendLastMessageBeacon()):this.sendEvents(),this.Mr.reset(),this.X.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.iu)===null||e===void 0||e.start(),this.Ke.start(),this.Si.start(),this.Mr.start(),this.Bt.start(),(i=this.Za)===null||i===void 0||i.start(),(n=this.xs)===null||n===void 0||n.start(),t||this.su.start(),(o=this.Ls)===null||o===void 0||o.start(),(c=this.qi)===null||c===void 0||c.start(),(l=this.Wi)===null||l===void 0||l.start(),(h=this.Yi)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.Xi,f=>{this.ce(f)}),this.Xi=[]}collectInitialEvents(){var t;(t=this.Za)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.ce(t)}onIframeAnalysisUserEvent(t){this.Ut(t)}onExternalEvent(t){this.Z(t)}ce(t){this.isStarted&&this.F.isCurrentPageviewValid()&&this.Z(t)}Ut(t){this.isStarted&&(this.F.refreshSession(),this.F.isSessionValid()&&this.Z(t))}Z(t){this.Ze.addEvent(this.yT(t)),this.Ze.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.mi.emit("analysisEvent",{...t,typeName:z[t.type]})}yT(t){return t.ts=this.Ki(),t}ou(){this.Ne.setQueryParams({hlm:"true"}),this.tc=!0}sendLastMessageBeacon(){this.Ne.removeQueryParams(["i"]),this.Ne.setQueryParams(this.eu.getRequestParameters()),this.Ne.setQueryParams(this.tu.getRequestParameters()),this.Ne.send(this.Ze.stringifyEvents()),this.Ne.removeQueryParams(["hlm"]),this.tc=!1}sendEvents(){this.Ze.isEmpty()||(this.Ne.removeQueryParams(["i"]),this.X.setQueryParams(this.eu.getRequestParameters()),this.X.setQueryParams(this.tu.getRequestParameters()),this.X.send(this.Ze.getEvents()),this.Ze.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.Ke.stop(),this.Si.stop(),this.Mr.stop(),this.Bt.stop(),this.su.stop(),(t=this.Za)===null||t===void 0||t.stop(),(e=this.Ls)===null||e===void 0||e.stop(),(i=this.xs)===null||i===void 0||i.stop(),(n=this.qi)===null||n===void 0||n.stop(),this.Ze.empty(),(o=this.iu)===null||o===void 0||o.stop(),(c=this.Wi)===null||c===void 0||c.stop(),(l=this.Yi)===null||l===void 0||l.stop()}nu(){this.gs=M.now()}Ki(){return M.now()-this.gs}ru(){this.Ke.onEvent(t=>{var e,i;t!==Yt.Visible&&((e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.xs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Yt.PagehideVisible?this.ou():t===Yt.PagehideHidden?(this.ou(),this.sendLastMessageBeacon()):(!this.Ze.isEmpty()||this.tc)&&this.sendLastMessageBeacon())})}mT(t){try{(!this.Ze.isEmpty()||this.tc)&&this.oe.save({requestParameters:t,events:this.Ze.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!uf(t)||!_i(e))throw new Rt(El[0]);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.J.getElementPath(e)};i.tgt!==we.INVALID_ELEMENT&&this.ce(i)}pushCustomEvent(t,e,i){if(!(q(t)&&!zn(t))||i!==void 0&&!tc(i))throw new Rt(Bn[0]);let n=my.buildCustomEvent(t,e,i),o=It.buildFromCustomEvent(n,this.Ft);this.isStarted?this.ce(o):csArray.prototype.push.call(this.Xi,o)}}return s})(),Pi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Ey=(()=>{class s extends Pi{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.ET=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=mt(t);return Er(i)&&csArray.prototype.indexOf.call(this.ET,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})(),Bt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var hl=(()=>{class s extends Pi{constructor(t){super(),this.pt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.pt.getEventTargetPath(t)),e}}return s})(),ka=65535,Sy=(()=>{let s;return function(r){function t(e){let i=mt(e);if(!i||!ct(i)||!Ze(i.getBoundingClientRect)||!Pt(e.pageX)||!Pt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-gt.windowOffsetX(),c=e.pageY-n.top-gt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),f=Math.round(o/l*ka),d=Math.round(c/h*ka);return{xRel:f,yRel:d,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),vy=(()=>{class s extends Pi{constructor(t,e){super(),this.As=t,this.pt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.hu=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=Sy.getRelativePosition(t);if(i){let c=this.pt.getEventTargetPath(t);c!==we.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===z.MOUSEMOVE&&(c!==this.hu||this.As.iframesTracking?(this.hu=c,e.tgtHM=c,this.As.isChild||(e.tgtHMH=Ic(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.hu="");return e}}return s})(),ul=(()=>{class s extends Pi{constructor(t,e){super(),this.pt=t,this.Gt=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.Gt.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.pt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),La=100,dl=(()=>{class s extends Pi{constructor(t,e,i){super(),this.E=t,this.Gt=e,this.D=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}MT(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Qn(n.parentElement)||Jn(n.parentElement)||this.Gt.getElementSensitiveStatus(n.parentElement)!==Bt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=La)break;n=i.nextNode()}return!1}DT(t){let e=Rn(t,"button,a");return e||(this.E.collectTargetText===An.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(_i(csEventtarget.apply(t))){let i=this.DT(csEventtarget.apply(t));if(i&&q(i.textContent)&&!this.MT(i)&&!this.D.hasPII(i.textContent,this.E.anonymizeDigits)){let n=oe.truncate(csString.prototype.trim.call(i.textContent),La);n.length>0&&(e.text=n)}}return e}}return s})();function _y(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new vy(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new dl(s,t,new qs)),s.collectHierarchy&&csArray.prototype.push.call(n,new ul(r,t)),csArray.prototype.push.call(n,new Ey,new hl(r)),n}function wy(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new dl(s,t,new qs)),s.collectHierarchy&&csArray.prototype.push.call(n,new ul(r,t)),csArray.prototype.push.call(n,new hl(r)),n}var Ay=(()=>{class s extends Ut{constructor(t,e){super(),this.oe=t,this.X=e,this.Pg=()=>{document.visibilityState==="visible"&&this.Og()}}onStart(){this.Og(),this.xh()}onStop(){this.Vh()}getRecoveryStorage(){return this.oe}Og(){let t=this.oe.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.X.send(i,e)}}xh(){document.addEventListener("visibilitychange",this.Pg)}Vh(){document.removeEventListener("visibilitychange",this.Pg)}}return s})(),Ty=(()=>{class s{constructor(t){this.Pr=t}save(t){localStorage.setItem(this.Pr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Pr)}recover(){let t=localStorage.getItem(this.Pr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{F.error(`Invalid item in localStorage.
         (key:${this.Pr}; value:${t})`)}finally{this.clear()}return e}}return s})(),by=50,Ry=(()=>{class s{constructor(t=[]){this.Ht=t}stringifyEvents(){return csJSON.stringify(this.Ht)}addEvent(t){csArray.prototype.push.call(this.Ht,t)}eventsCount(){return this.Ht.length}clearEvents(){this.Ht=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=by}isEmpty(){return this.Ht.length===0}getEvents(){return this.Ht}}return s})(),Cy=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Ft=t,this.pt=e,this.$t=i,this.kT=n,this.Ng="select, select *, input, textarea",this.LT="select, select *, input, textarea",this.Mg="a, a *, button, button *, select, select *, input, textarea",this.co="input, select, textarea",this.xT="form",this.rc=150,this.VT=400,this.Dg=!1,this.lo=pi((o,c)=>this.scrollListener(o,c),this.rc),this.kg=pi(o=>this.resizeListener(o),this.rc),this.UT=_r(o=>this.mouseMoveListener(o),this.VT),this.jT=[{boundElement:window,type:"resize",listener:()=>this.kg()},{boundElement:document,type:"scroll",listener:o=>this.lo(o)},{boundElement:window,type:"mousemove",listener:o=>{this.UT(bf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Lg=[{type:"change",listener:this.$t.on(this.LT,o=>this.changeListener(o))},{type:"submit",listener:this.$t.on(this.xT,o=>this.submitListener(o))}],this.HT=[{boundElement:document,type:"mouseover",listener:this.$t.on(this.Mg,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.$t.on(this.Mg,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.$t.on(this.Ng,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.$t.on(this.Ng,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.$t.on(this.co,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.$t.on(this.co,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.$t.on(this.co,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.$t.on(this.co,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.$t.on(this.co,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Lg,o=>({...o,boundElement:document}))],this.B={},this.$l=(o,c)=>{switch(c){case"initial":case"added":this.Fi(o);break;case"removed":this.Gi(o);break}},this.pe=new Ws(this.$l),this.Xh()}Fi(t){if(hr(t)){let e=this.xg();csArray.prototype.forEach.call(e,i=>Lt(i))}else{let e=this.Vg();csArray.prototype.forEach.call(e,i=>{Lt({...i,boundElement:t})})}}Gi(t){if(hr(t)){let e=this.xg();csArray.prototype.forEach.call(e,i=>xt(i))}else{let e=this.Vg();csArray.prototype.forEach.call(e,i=>{xt({...i,boundElement:t})})}}onEvent(t){this.V=t}start(){this.pe.observe(),this.Fi(document),this.resizeListener()}stop(){this.Gi(document),this.pe.disconnect()}flushPendingDebouncedListeners(){this.lo.flushPending(),this.kg.flushPending()}Ug(t){return csArray.prototype.some.call(this.kT,e=>e===t)}Vg(){return this.$t.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Lg,t=>!this.Ug(t.type)):(F.warn("Element.matches is not implemented yet"),[])}xg(){let t=[];return csArray.prototype.push.call(t,...this.jT),this.$t.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.HT):F.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Ug(e.type))}resizeListener(t){let e=Hs.getScrollContainer(),i=_i(e);i&&(this.Dg=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:gt.windowWidth(),y:i?e.clientHeight:gt.windowHeight()};t!==void 0&&(n.d=t),this.V(n)}scrollListener(t,e){let i=Hs.isEventOnScrollContainer(e);!this.Dg&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:gt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:gt.windowOffsetY(),d:t},o=It.buildFromAnalysisEvent(e,n,this.Ft);this.V(o)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.V(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.pt.getEventTargetPath(t)},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.pt.getEventTargetPath(t)},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.pt.getEventTargetPath(t)},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:js.COPY};this.Se(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:js.CUT};this.Se(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:js.PASTE};this.Se(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.jg(t)};this.Se(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.jg(t)};this.Se(e)}jg(t){let e=this.B[t.key];return e===void 0?W.ALPHANUMERICAL:e}Se(t){Cc(t)&&t.tgt!==we.INVALID_ELEMENT&&this.V(t)}Xh(){this.B[" "]=W.SPACE,this.B.Spacebar=W.SPACE,this.B.Enter=W.ENTER,this.B.Backspace=W.BACKSPACE,this.B.Delete=W.DELETE,this.B.ArrowUp=W.ARROWUP,this.B.ArrowDown=W.ARROWDOWN,this.B.ArrowLeft=W.ARROWLEFT,this.B.ArrowRight=W.ARROWRIGHT,this.B.Up=W.ARROWUP,this.B.Down=W.ARROWDOWN,this.B.Left=W.ARROWLEFT,this.B.Right=W.ARROWRIGHT,this.B.CapsLock=W.CAPSLOCK,this.B.Shift=W.SHIFT,this.B.Tab=W.TAB}}return B([V("Event handler type: resize")],s.prototype,"resizeListener",null),B([V("Event handler type: scroll")],s.prototype,"scrollListener",null),B([V("Event handler type: mouseMove"),Tt()],s.prototype,"mouseMoveListener",null),B([V("Event handler type: mouseDown"),Tt()],s.prototype,"mouseDownListener",null),B([V("Event handler type: mouseUp"),Tt()],s.prototype,"mouseUpListener",null),B([V("Event handler type: click"),Tt()],s.prototype,"clickListener",null),B([V("Event handler type: mouseOver"),Tt()],s.prototype,"mouseOverListener",null),B([V("Event handler type: mouseOut"),Tt()],s.prototype,"mouseOutListener",null),B([V("Event handler type: focusIn")],s.prototype,"focusInListener",null),B([V("Event handler type: focusOut")],s.prototype,"focusOutListener",null),B([V("Event handler type: change")],s.prototype,"changeListener",null),B([V("Event handler type: submit"),Tt()],s.prototype,"submitListener",null),B([V("Event handler type: copy")],s.prototype,"copyListener",null),B([V("Event handler type: cut")],s.prototype,"cutListener",null),B([V("Event handler type: paste")],s.prototype,"pasteListener",null),B([V("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([V("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Iy=(()=>{class s{constructor(t,e,i){this.Ft=t,this.Bt=e,this.Pt=i}processGesture(t,e){switch(t.type){case yt.TAP:this.BT(e);break;case yt.FLICK:this.FT(t,e);break;case yt.DRAG:this.GT(t,e);break;default:break}}BT(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=It.buildFromAnalysisEvent(t,e,this.Ft);i.tgt!==we.INVALID_ELEMENT&&this.V(i)}GT(t,e){var i,n;let o={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Pt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Pt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=It.buildFromAnalysisEvent(e,o,this.Ft);c.tgt!==we.INVALID_ELEMENT&&this.V(c)}FT(t,e){var i,n;let o={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Pt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Pt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=It.buildFromAnalysisEvent(e,o,this.Ft);c.tgt!==we.INVALID_ELEMENT&&this.V(c)}onEvent(t){this.V=t}start(){this.Bt.subscribe(s.Hg,(t,e)=>this.processGesture(t,e))}stop(){this.Bt.unsubscribe(s.Hg)}}return s.Hg="AnalysisGestureTracker",B([Tt()],s.prototype,"processGesture",null),s})();var Py=(()=>{class s{constructor(){this.Kg=100,this.fo=0,this.po=gt.documentHeight(),this.Jg={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.fo=this.Eu(Hs.getScrollContainer()).maxScrollRate}onEvent(t){this.V=t}start(){Lt(this.Jg)}stop(){xt(this.Jg)}reset(){let t=Hs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Eu(t);this.po=i,this.fo=e,this.V()}Eu(t){let e=0,i=0;if(t===null)i=gt.documentHeight(),e=this.eb(i);else{let n=this.sb(t);i=this.Qg(t,n),e=this.ib(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Hs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Eu(e);(i>this.fo||n>this.po)&&(this.fo=i,n>this.po&&(this.po=n),this.V())}eb(t){let e=Math.round(this.rb()/t*100);return Math.min(e,this.Kg)}rb(){let t=gt.windowHeight();return gt.windowOffsetY()+t}ib(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Qg(t,e),o=Math.round(i/n*100);return Math.min(o,this.Kg)}sb(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Qg(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.fo}`,mdh:`${this.po}`}}}return B([V("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Oy=(()=>{class s{constructor(t){this.go=t,this.mo=e=>this.processMetric(e),this.U=!1}onEvent(t){this.V=t}start(){this.U||(this.U=!0,this.go.onFCP(this.mo),this.go.onCLS(this.mo),this.go.onLCP(this.mo),this.go.onTTFB(this.mo),this.go.onINP(this.mo))}stop(){this.U=!1}processMetric(t){if(!this.U)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.V(e)}}return B([V("Performance metric handler")],s.prototype,"processMetric",null),s})(),Ny=(()=>{class s{constructor(t){this.cc=t.performance}getRequestParameters(){if(this.nb())return{};let t=this.ob();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}ob(){let t=this.cc.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}nb(){return!(this.cc&&this.cc.timing&&this.cc.timing.loadEventEnd>0)}}return s})();var fl=-1,Ys=s=>{addEventListener("pageshow",r=>{r.persisted&&(fl=r.timeStamp,s(r))},!0)},ue=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},mo=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},yo=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Oi=()=>{var r;let s=yo();return(r=s==null?void 0:s.activationStart)!=null?r:0},de=(s,r=-1)=>{let t=yo(),e="navigate";return fl>=0?e="back-forward-cache":t&&(document.prerendering||Oi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},an=new WeakMap;function Eo(s,r){return an.get(s)||an.set(s,new r),an.get(s)}var xn=class{constructor(){pe(this,"t");pe(this,"i",0);pe(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Ni=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},So=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Vs=-1,xa=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,mr=s=>{document.visibilityState==="hidden"&&Vs>-1&&(Vs=s.type==="visibilitychange"?s.timeStamp:0,My())},Va=()=>{addEventListener("visibilitychange",mr,!0),addEventListener("prerenderingchange",mr,!0)},My=()=>{removeEventListener("visibilitychange",mr,!0),removeEventListener("prerenderingchange",mr,!0)},pl=()=>{var s;if(Vs<0){let r=Oi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Vs=t!=null?t:xa(),Va(),Ys(()=>{setTimeout(()=>{Vs=xa(),Va()})})}return{get firstHiddenTime(){return Vs}}},br=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Ua=[1800,3e3],gl=(s,r={})=>{br(()=>{let t=pl(),e,i=de("FCP"),n=Ni("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Oi(),0),i.entries.push(c),e(!0)))});n&&(e=ue(s,i,Ua,r.reportAllChanges),Ys(o=>{i=de("FCP"),e=ue(s,i,Ua,r.reportAllChanges),mo(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},ja=[.1,.25],Dy=(s,r={})=>{gl(So(()=>{let t,e=de("CLS",0),i=Eo(r,xn),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Ni("layout-shift",n);o&&(t=ue(s,e,ja,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ys(()=>{i.i=0,e=de("CLS",0),t=ue(s,e,ja,r.reportAllChanges),mo(()=>t())}),setTimeout(t))}))},ml=0,cn=1/0,tr=0,ky=s=>{for(let r of s)r.interactionId&&(cn=Math.min(cn,r.interactionId),tr=Math.max(tr,r.interactionId),ml=tr?(tr-cn)/7+1:0)},Vn,Ha=()=>{var s;return Vn?ml:(s=performance.interactionCount)!=null?s:0},Ly=()=>{"interactionCount"in performance||Vn||(Vn=Ni("event",ky,{type:"event",buffered:!0,durationThreshold:0}))},Ba=0,Un=class{constructor(){pe(this,"u",[]);pe(this,"l",new Map);pe(this,"m");pe(this,"p")}v(){Ba=Ha(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Ha()-Ba)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},yl=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=So(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Fa=[200,500],xy=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&br(()=>{var c;Ly();let t,e=de("INP"),i=Eo(r,Un),n=l=>{yl(()=>{for(let f of l)i.h(f);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Ni("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=ue(s,e,Fa,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ys(()=>{i.v(),e=de("INP"),t=ue(s,e,Fa,r.reportAllChanges)}))})},jn=class{constructor(){pe(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Ga=[2500,4e3],Vy=(s,r={})=>{br(()=>{let t=pl(),e,i=de("LCP"),n=Eo(r,jn),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Oi(),0),i.entries=[h],e())},c=Ni("largest-contentful-paint",o);if(c){e=ue(s,i,Ga,r.reportAllChanges);let l=So(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>yl(l),{capture:!0,once:!0});Ys(h=>{i=de("LCP"),e=ue(s,i,Ga,r.reportAllChanges),mo(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},$a=[800,1800],Hn=s=>{document.prerendering?br(()=>Hn(s)):document.readyState!=="complete"?addEventListener("load",()=>Hn(s),!0):setTimeout(s)},Uy=(s,r={})=>{let t=de("TTFB"),e=ue(s,t,$a,r.reportAllChanges);Hn(()=>{let i=yo();i&&(t.value=Math.max(i.responseStart-Oi(),0),t.entries=[i],e(!0),Ys(()=>{t=de("TTFB",0),e=ue(s,t,$a,r.reportAllChanges),e(!0)}))})},jy=(()=>{class s{onFCP(t){try{gl(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Dy(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{Vy(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{Uy(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{xy(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("INP")}}}return s})();var Hy="csAnalysisEventsPersisted",za="v2/events",El=["submit"],Bn=["trackEvent"];var By=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,d,m,E,v,C,P){this.E=t,this.mt=e,this.O=i,this.J=n,this.$t=o,this.S=c,this.F=l,this.Bt=h,this._t=f,this.Ee=d,this.Q=m,this.Gt=E,this.St=v,this.es=C,this.ss=P}init(){let t=new Ry,e=this.Ee.create(`${this.E.getTrackerUri()}/${za}`,"base64");this.xr=this.vb(e),this.he=this._b(t,this.xr.getRecoveryStorage(),e),this.he.init(),this.Q.addListener(this.he),this._t.addListener(this.he),this.S.register(El,(i,n)=>{this.he.pushSubmitCommandEvent(i,n)}),this.S.register(Bn,i=>{if(!tc(i))throw new Rt(Bn[0]);this.he.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.xr.start(),this.he.start(t)}onAfterNaturalPageView(){this.he.initStates()}onArtificialPageViewEnd(t){this.he.clearStates(!0),t&&(this.he.stop(),this.xr.stop())}onAfterArtificialPageView(t){this.he.initStates(),t&&(this.he.start(),this.xr.start()),this.he.collectInitialEvents()}onBeforeSessionRenewal(){this.he.clearStates(),this.he.stop(),this.xr.stop()}onOptout(){this.he.stop(),this.xr.stop()}_b(t,e,i){var n,o;let c=new Ny(window),l=new Py,h=_y(this.E,this.J,this.Gt,this.es,this.ss),f=[];this.E.collectSubmit||csArray.prototype.push.call(f,"submit");let d=new Cy(h,this.J,this.$t,f),m=wy(this.E,this.J,this.Gt,this.es,this.ss),E=new Iy(m,this.Bt),v=new Oy(new jy),C=new al,P,S,w,I=new nl(`${this.E.getTrackerUri()}/${za}`),O=new Ei(this.mt,this.O),T,U,tt,ot;return new yy(this.E,d,E,l,c,t,I,O,this.F,e,this.J,v,C,i,h,P,S,w,T,U,tt,ot)}vb(t){return new Ay(new Ty(Hy),t)}}return s})();var er=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Xe=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Fy=(()=>{class s{constructor(t,e,i,n){this.O=t,this.R=e,this.E=i,this.hs=n,this.gm=!1}isNaturalPageViewSent(){return this.gm}setNaturalPageViewSent(t){this.gm=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.hs.getPageViewType(),l=this.R.isReplayRecorded(),h=this.Rb(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.O.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Rb(t){return Xe.isReplayConsentNeeded(this.E)?t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?er.NOT_EXPRESSED:t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?er.WITHDRAWN:er.GRANTED:er.NOT_NEEDED}}return s})(),Gy=(()=>{class s{constructor(t){this.kt=t,this.ue=[]}handleCommand(t){if(Ze(t)&&(this.Eo(t),this.kt.isNaturalPageViewSent())){let e=this.kt.getTrackingContext();e!==null&&this.zt(t,e)}}Eo(t){csArray.prototype.push.call(this.ue,t)}executeRegisteredCallbacks(){let t=this.kt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ue,e=>this.zt(e,t))}zt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),$y=(()=>{class s{constructor(t){this.kt=t,this.Qi=[]}handleCommand(t){if(this.kt.isNaturalPageViewSent())return this.Cb(t);this.So(t)}Cb(t){let e=this.kt.getSessionKey();return this.mm(t)&&e!==null&&this.zt(t.callback,e),e}So(t){this.mm(t)&&csArray.prototype.push.call(this.Qi,t.callback)}flushPendingCallbacks(){let t=this.kt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Qi,e=>{this.zt(e,t)}),this.Qi=[]}mm(t){return t&&typeof t.callback=="function"}zt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function zy(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,f,d]=l;n?h=`${c}/sites/${n}/player?uu=${f}&sn=${d}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${f}&sn=${d}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${M.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var qy=(()=>{class s{constructor(t){this.kt=t}handleCommand(t,e){fi(t)&&Ze(e)&&this.zt(t,e)}zt(t,e){csSetTimeout(()=>{let i=this.kt.getTrackingContext();if(i){let n=zy(i,t);e(n)}})}}return s})(),Wy=(()=>{class s{constructor(){this.ue=new Set}handleCommand(t,e){return!Ze(t)||this.ue.has(t)?null:(this.ue.add(t),e&&(this.Pe=e,this.ym(t,e)),()=>this.ue.delete(t))}executeCallbacks(t){this.Ib(t)&&(this.Pe=t,this.ue.forEach(e=>this.ym(e,t)))}ym(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Ib(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Pe&&(this.Pe.isRecording!==e||this.Pe.recordingStartTimestamp!==i||this.Pe.etrState!==n||this.Pe.etrStatus!==o||this.Pe.collectState!==c)}}return s})(),Yy=["afterPageView"],Xy=["getSessionKey"],Ky=["onRecordingContextChange","onRecordingStateChange"],Jy=["replay:link:generate"],Qy=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.O=t,this.R=e,this.S=i,this._t=n,this.et=o,this.E=c,this.hs=l,this.yi=h,this.Em=null}init(){this.kt=new Fy(this.O,this.R,this.E,this.hs),this.wu=new Gy(this.kt),this.Sm=new $y(this.kt),this.vo=new Wy,this.Pb=new qy(this.kt),this.S.register(Xy,t=>this.Sm.handleCommand(t)),this.S.register(Yy,t=>this.wu.handleCommand(t)),this.S.register(Ky,t=>this.vo.handleCommand(t,this.yi.getRecordingContext())),this.S.register(Jy,(t,e)=>{this.Vr&&this.Pb.handleCommand({...t,recordingStartTimestamp:this.yi.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.kt.setNaturalPageViewSent(!0),this.Sm.flushPendingCallbacks(),this.wu.executeRegisteredCallbacks(),(t=this.Em)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.wu.executeRegisteredCallbacks(),(t=this.Em)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.vo.executeCallbacks(this.yi.getRecordingContext())}setRecordingService(t){this.Vr=t}}return B([oo({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})();var Zy=["optout"];var tE=(()=>{class s{constructor(t,e){this.S=t,this.ls=e}init(){this.S.register(Zy,()=>{this.ls.activate()})}}return s})(),ni="_cs_optout",eE=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.Nt=i}get(){return this.E.cookielessTrackingEnabled?this.Nt.getItem(ni):this.N.get(ni)}set(t){this.E.cookielessTrackingEnabled?this.Nt.setItem(ni,t):this.N.set(ni,t,Wn)}}return s})(),qa="1",sE=(()=>{class s{constructor(t,e,i){this.w=t,this.Lt=e,this.ft=i}init(){!this.isActive()&&this.Gb()&&this.activate()}isActive(){return this.ft.get()===qa}activate(){this.w.emitOptout(),this.ft.set(qa)}Gb(){return csString.prototype.indexOf.call(this.Lt.href,ni)>0}}return s})(),iE=(()=>{class s{constructor(){this.gc=null,this.$b=1}startInterval(){this.gc=window.csSetInterval(()=>{let t=this.$b++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){$.counters.tasks.flush(t),$.counters.longTasks.flush(t)}clear(){$.counters.tasks.reset(),$.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.gc&&(csClearInterval(this.gc),this.gc=null)}}return s})(),rE=(()=>{class s{constructor(){this.zb=["clicktale.net","contentsquare.net","hotjar.com","heap-api.com"],this.To=!1,this.bo=null,this.Fs=new iE}onStartTracking(){this.qb()}qb(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{if(e.initiatorType!=="script")return!1;let i=csString.prototype.split.call(e.name,"/")[2]||"";return csArray.prototype.some.call(this.zb,n=>csString.prototype.endsWith.call(i,n))});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize,c=e.duration-i,l=csString.prototype.split.call(e.name,"/")[2];i>=0&&$.counters.downloadTime.add(l,i),n>=0&&$.counters.transferSize.add(l,n),c>=0&&$.counters.evalTime.add(l,c)}),t.length>0&&($.counters.downloadTime.flush(),$.counters.transferSize.flush(),$.counters.evalTime.flush())}Im(){$.counters.blockingTime.flush(),$.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.Im(),this.bo&&csClearTimeout(this.bo),this.Fs.stopInterval(),this.To=!0}onBeforeNaturalPageView(){this.Im()}onAfterNaturalPageView(t){t===us.Natural?(this.Fs.flush("boot"),this.Fs.startInterval()):(this.bo&&csClearTimeout(this.bo),this.Fs.stopInterval(),this.To=!0)}onInitialDomStart(){this.To||this.Fs.stopInterval()}onInitialDomDone(){this.To||(this.To=!0,this.Fs.flush("initial-dom"),this.bo=window.csSetTimeout(()=>{this.Fs.flush("post-initial-dom"),this.Fs.startInterval()},5e3))}onOptout(){this.Fs.clear()}}return s})(),nE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),oE=(()=>{class s{constructor(){}static init(t){(!this.Mu||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Mu=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Mu.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Mu)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(nE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;aE(s.getString("debugLog"),t)&&(n.value=function(...f){return console.log(l,...f),h.bind(this)(...f)})}}}return s})();function aE(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var cE=(()=>{class s{constructor(t){this.Wb=t,this.Pm=[],this.Du={},this.Yb=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.jr().catch(o=>{it.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i.ve:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.Om(c,l):n?Promise.resolve(n[c]):i.Om(c,[])}})}Om(t,e){let i=++this.Yb;return new Promise((n,o)=>{this.Du[i]=(c,l)=>{delete this.Du[i],c?o(c):n(l)},this.ve.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.Pm,t.toString())}jr(){try{let t=Wa.toString()+`
`+csArray.prototype.join.call(this.Pm,`
`)+`

const klass = (${this.Wb.toString()});

${Wa.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.ve=new Worker(i),this.ve.addEventListener("message",n=>{var o,c,l,h,f;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){it.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(f=(h=this.Du)[n.data.id])===null||f===void 0||f.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.ve.onerror=i=>e(new Error(i.message)),this.ve.onmessage=()=>{this.ve.onmessage=this.ve.onerror=null,t()}})}}return s})();function Wa(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function Fn(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,f=29,d=256,m=d+1+f,E=30,v=19,C=2*m+1,P=15,S=16,w=7,I=256,O=16,T=17,U=18,tt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ot=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Gt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Nt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$t=512,_=new Array((m+2)*2);i(_);let L=new Array(E*2);i(L);let x=new Array($t);i(x);let H=new Array(h-l+1);i(H);let ht=new Array(f);i(ht);let Et=new Array(E);i(Et);function fe(a,p,g,y,u){this.static_tree=a,this.extra_bits=p,this.extra_base=g,this.elems=y,this.max_length=u,this.has_stree=a&&a.length}let es,Rs,Cs;function Re(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Ce=a=>a<256?x[a]:x[256+(a>>>7)],Jt=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},St=(a,p,g)=>{a.bi_valid>S-g?(a.bi_buf|=p<<a.bi_valid&65535,Jt(a,a.bi_buf),a.bi_buf=p>>S-a.bi_valid,a.bi_valid+=g-S):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=g)},zt=(a,p,g)=>{St(a,g[p*2],g[p*2+1])},Mi=(a,p)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--p>0);return g>>>1},Rr=a=>{a.bi_valid===16?(Jt(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Cr=(a,p)=>{let g=p.dyn_tree,y=p.max_code,u=p.stat_desc.static_tree,b=p.stat_desc.has_stree,A=p.stat_desc.extra_bits,R=p.stat_desc.extra_base,X=p.stat_desc.max_length,j,jt,xe,rt,os,Os,Yi=0;for(rt=0;rt<=P;rt++)a.bl_count[rt]=0;for(g[a.heap[a.heap_max]*2+1]=0,j=a.heap_max+1;j<C;j++)jt=a.heap[j],rt=g[g[jt*2+1]*2+1]+1,rt>X&&(rt=X,Yi++),g[jt*2+1]=rt,!(jt>y)&&(a.bl_count[rt]++,os=0,jt>=R&&(os=A[jt-R]),Os=g[jt*2],a.opt_len+=Os*(rt+os),b&&(a.static_len+=Os*(u[jt*2+1]+os)));if(Yi!==0){do{for(rt=X-1;a.bl_count[rt]===0;)rt--;a.bl_count[rt]--,a.bl_count[rt+1]+=2,a.bl_count[X]--,Yi-=2}while(Yi>0);for(rt=X;rt!==0;rt--)for(jt=a.bl_count[rt];jt!==0;)xe=a.heap[--j],!(xe>y)&&(g[xe*2+1]!==rt&&(a.opt_len+=(rt-g[xe*2+1])*g[xe*2],g[xe*2+1]=rt),jt--)}},Di=(a,p,g)=>{let y=new Array(P+1),u=0,b,A;for(b=1;b<=P;b++)y[b]=u=u+g[b-1]<<1;for(A=0;A<=p;A++){let R=a[A*2+1];R!==0&&(a[A*2]=Mi(y[R]++,R))}},Ir=()=>{let a,p,g,y,u,b=new Array(P+1);for(g=0,y=0;y<f-1;y++)for(ht[y]=g,a=0;a<1<<tt[y];a++)H[g++]=y;for(H[g-1]=y,u=0,y=0;y<16;y++)for(Et[y]=u,a=0;a<1<<ot[y];a++)x[u++]=y;for(u>>=7;y<E;y++)for(Et[y]=u<<7,a=0;a<1<<ot[y]-7;a++)x[256+u++]=y;for(p=0;p<=P;p++)b[p]=0;for(a=0;a<=143;)_[a*2+1]=8,a++,b[8]++;for(;a<=255;)_[a*2+1]=9,a++,b[9]++;for(;a<=279;)_[a*2+1]=7,a++,b[7]++;for(;a<=287;)_[a*2+1]=8,a++,b[8]++;for(Di(_,m+1,b),a=0;a<E;a++)L[a*2+1]=5,L[a*2]=Mi(a,5);es=new fe(_,tt,d+1,m,P),Rs=new fe(L,ot,0,E,P),Cs=new fe(new Array(0),Gt,0,v,w)},ki=a=>{let p;for(p=0;p<m;p++)a.dyn_ltree[p*2]=0;for(p=0;p<E;p++)a.dyn_dtree[p*2]=0;for(p=0;p<v;p++)a.bl_tree[p*2]=0;a.dyn_ltree[I*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Li=a=>{a.bi_valid>8?Jt(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},xi=(a,p,g,y)=>{Li(a),y&&(Jt(a,g),Jt(a,~g)),a.pending_buf.set(a.window.subarray(p,p+g),a.pending),a.pending+=g},Pr=(a,p,g,y)=>{let u=p*2,b=g*2;return a[u]<a[b]||a[u]===a[b]&&y[p]<=y[g]},Vi=(a,p,g)=>{let y=a.heap[g],u=g<<1;for(;u<=a.heap_len&&(u<a.heap_len&&Pr(p,a.heap[u+1],a.heap[u],a.depth)&&u++,!Pr(p,y,a.heap[u],a.depth));)a.heap[g]=a.heap[u],g=u,u<<=1;a.heap[g]=y},Or=(a,p,g)=>{let y,u,b=0,A,R;if(a.last_lit!==0)do y=a.pending_buf[a.d_buf+b*2]<<8|a.pending_buf[a.d_buf+b*2+1],u=a.pending_buf[a.l_buf+b],b++,y===0?zt(a,u,p):(A=H[u],zt(a,A+d+1,p),R=tt[A],R!==0&&(u-=ht[A],St(a,u,R)),y--,A=Ce(y),zt(a,A,g),R=ot[A],R!==0&&(y-=Et[A],St(a,y,R)));while(b<a.last_lit);zt(a,I,p)},Ui=(a,p)=>{let g=p.dyn_tree,y=p.stat_desc.static_tree,u=p.stat_desc.has_stree,b=p.stat_desc.elems,A,R,X=-1,j;for(a.heap_len=0,a.heap_max=C,A=0;A<b;A++)g[A*2]!==0?(a.heap[++a.heap_len]=X=A,a.depth[A]=0):g[A*2+1]=0;for(;a.heap_len<2;)j=a.heap[++a.heap_len]=X<2?++X:0,g[j*2]=1,a.depth[j]=0,a.opt_len--,u&&(a.static_len-=y[j*2+1]);for(p.max_code=X,A=a.heap_len>>1;A>=1;A--)Vi(a,g,A);j=b;do A=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Vi(a,g,1),R=a.heap[1],a.heap[--a.heap_max]=A,a.heap[--a.heap_max]=R,g[j*2]=g[A*2]+g[R*2],a.depth[j]=(a.depth[A]>=a.depth[R]?a.depth[A]:a.depth[R])+1,g[A*2+1]=g[R*2+1]=j,a.heap[1]=j++,Vi(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Cr(a,p),Di(g,X,a.bl_count)},Nr=(a,p,g)=>{let y,u=-1,b,A=p[0*2+1],R=0,X=7,j=4;for(A===0&&(X=138,j=3),p[(g+1)*2+1]=65535,y=0;y<=g;y++)b=A,A=p[(y+1)*2+1],!(++R<X&&b===A)&&(R<j?a.bl_tree[b*2]+=R:b!==0?(b!==u&&a.bl_tree[b*2]++,a.bl_tree[O*2]++):R<=10?a.bl_tree[T*2]++:a.bl_tree[U*2]++,R=0,u=b,A===0?(X=138,j=3):b===A?(X=6,j=3):(X=7,j=4))},_o=(a,p,g)=>{let y,u=-1,b,A=p[0*2+1],R=0,X=7,j=4;for(A===0&&(X=138,j=3),y=0;y<=g;y++)if(b=A,A=p[(y+1)*2+1],!(++R<X&&b===A)){if(R<j)do zt(a,b,a.bl_tree);while(--R!==0);else b!==0?(b!==u&&(zt(a,b,a.bl_tree),R--),zt(a,O,a.bl_tree),St(a,R-3,2)):R<=10?(zt(a,T,a.bl_tree),St(a,R-3,3)):(zt(a,U,a.bl_tree),St(a,R-11,7));R=0,u=b,A===0?(X=138,j=3):b===A?(X=6,j=3):(X=7,j=4)}},Tl=a=>{let p;for(Nr(a,a.dyn_ltree,a.l_desc.max_code),Nr(a,a.dyn_dtree,a.d_desc.max_code),Ui(a,a.bl_desc),p=v-1;p>=3&&a.bl_tree[Nt[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},bl=(a,p,g,y)=>{let u;for(St(a,p-257,5),St(a,g-1,5),St(a,y-4,4),u=0;u<y;u++)St(a,a.bl_tree[Nt[u]*2+1],3);_o(a,a.dyn_ltree,p-1),_o(a,a.dyn_dtree,g-1)},Rl=a=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<d;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},wo=!1,Cl=a=>{wo||(Ir(),wo=!0),a.l_desc=new Re(a.dyn_ltree,es),a.d_desc=new Re(a.dyn_dtree,Rs),a.bl_desc=new Re(a.bl_tree,Cs),a.bi_buf=0,a.bi_valid=0,ki(a)},Ao=(a,p,g,y)=>{St(a,(n<<1)+(y?1:0),3),xi(a,p,g,!0)},Il=a=>{St(a,o<<1,3),zt(a,I,_),Rr(a)},Pl=(a,p,g,y)=>{let u,b,A=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Rl(a)),Ui(a,a.l_desc),Ui(a,a.d_desc),A=Tl(a),u=a.opt_len+3+7>>>3,b=a.static_len+3+7>>>3,b<=u&&(u=b)):u=b=g+5,g+4<=u&&p!==-1?Ao(a,p,g,y):a.strategy===4||b===u?(St(a,(o<<1)+(y?1:0),3),Or(a,_,L)):(St(a,(c<<1)+(y?1:0),3),bl(a,a.l_desc.max_code+1,a.d_desc.max_code+1,A+1),Or(a,a.dyn_ltree,a.dyn_dtree)),ki(a),y&&Li(a)},Ol=(a,p,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,p===0?a.dyn_ltree[g*2]++:(a.matches++,p--,a.dyn_ltree[(H[g]+d+1)*2]++,a.dyn_dtree[Ce(p)*2]++),a.last_lit===a.lit_bufsize-1);var Nl=Cl,Ml=Ao,Dl=Pl,kl=Ol,Ll=Il,xl={_tr_init:Nl,_tr_stored_block:Ml,_tr_flush_block:Dl,_tr_tally:kl,_tr_align:Ll},To=(a,p,g,y)=>{let u=a&65535|0,b=a>>>16&65535|0,A=0;for(;g!==0;){A=g>2e3?2e3:g,g-=A;do u=u+p[y++]|0,b=b+u|0;while(--A);u%=65521,b%=65521}return u|b<<16|0};let Vl=()=>{let a,p=[];for(var g=0;g<256;g++){a=g;for(var y=0;y<8;y++)a=a&1?3988292384^a>>>1:a>>>1;p[g]=a}return p},Ul=new Uint32Array(Vl());var Ie=(a,p,g,y)=>{let u=Ul,b=y+g;a^=-1;for(let A=y;A<b;A++)a=a>>>8^u[(a^p[A])&255];return a^-1},ji={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:jl,_tr_stored_block:Hl,_tr_flush_block:Bl,_tr_tally:Pe,_tr_align:Fl}=xl,{Z_NO_FLUSH:ss,Z_PARTIAL_FLUSH:Gl,Z_FULL_FLUSH:$l,Z_FINISH:Oe,Z_BLOCK:Ro,Z_OK:se,Z_STREAM_END:Co,Z_STREAM_ERROR:qt,Z_DATA_ERROR:zl,Z_BUF_ERROR:Mr,Z_DEFAULT_COMPRESSION:ql,Z_FILTERED:Wl,Z_HUFFMAN_ONLY:Hi,Z_RLE:Yl,Z_FIXED:Xl,Z_DEFAULT_STRATEGY:Kl,Z_UNKNOWN:Jl,Z_DEFLATED:Bi}=bo,Ql=9,Zl=15,th=8,Dr=256+1+29,eh=30,sh=19,ih=2*Dr+1,rh=15,Y=3,Ne=258,Qt=Ne+Y+1,nh=32,Fi=42,kr=69,Gi=73,$i=91,zi=103,is=113,Xs=666,pt=1,Ks=2,rs=3,Is=4,oh=3,Me=(a,p)=>(a.msg=ji[p],p),Io=a=>(a<<1)-(a>4?9:0),De=a=>{let p=a.length;for(;--p>=0;)a[p]=0},ke=(a,p,g)=>(p<<a.hash_shift^g)&a.hash_mask,Le=a=>{let p=a.state,g=p.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),a.next_out),a.next_out+=g,p.pending_out+=g,a.total_out+=g,a.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},vt=(a,p)=>{Bl(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,Le(a.strm)},Q=(a,p)=>{a.pending_buf[a.pending++]=p},Js=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},ah=(a,p,g,y)=>{let u=a.avail_in;return u>y&&(u=y),u===0?0:(a.avail_in-=u,p.set(a.input.subarray(a.next_in,a.next_in+u),g),a.state.wrap===1?a.adler=To(a.adler,p,u,g):a.state.wrap===2&&(a.adler=Ie(a.adler,p,u,g)),a.next_in+=u,a.total_in+=u,u)},Po=(a,p)=>{let g=a.max_chain_length,y=a.strstart,u,b,A=a.prev_length,R=a.nice_match,X=a.strstart>a.w_size-Qt?a.strstart-(a.w_size-Qt):0,j=a.window,jt=a.w_mask,xe=a.prev,rt=a.strstart+Ne,os=j[y+A-1],Os=j[y+A];a.prev_length>=a.good_match&&(g>>=2),R>a.lookahead&&(R=a.lookahead);do if(u=p,!(j[u+A]!==Os||j[u+A-1]!==os||j[u]!==j[y]||j[++u]!==j[y+1])){y+=2,u++;do;while(j[++y]===j[++u]&&j[++y]===j[++u]&&j[++y]===j[++u]&&j[++y]===j[++u]&&j[++y]===j[++u]&&j[++y]===j[++u]&&j[++y]===j[++u]&&j[++y]===j[++u]&&y<rt);if(b=Ne-(rt-y),y=rt-Ne,b>A){if(a.match_start=p,A=b,b>=R)break;os=j[y+A-1],Os=j[y+A]}}while((p=xe[p&jt])>X&&--g!==0);return A<=a.lookahead?A:a.lookahead},ns=a=>{let p=a.w_size,g,y,u,b,A;do{if(b=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-Qt)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,y=a.hash_size,g=y;do u=a.head[--g],a.head[g]=u>=p?u-p:0;while(--y);y=p,g=y;do u=a.prev[--g],a.prev[g]=u>=p?u-p:0;while(--y);b+=p}if(a.strm.avail_in===0)break;if(y=ah(a.strm,a.window,a.strstart+a.lookahead,b),a.lookahead+=y,a.lookahead+a.insert>=Y)for(A=a.strstart-a.insert,a.ins_h=a.window[A],a.ins_h=ke(a,a.ins_h,a.window[A+1]);a.insert&&(a.ins_h=ke(a,a.ins_h,a.window[A+Y-1]),a.prev[A&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=A,A++,a.insert--,!(a.lookahead+a.insert<Y)););}while(a.lookahead<Qt&&a.strm.avail_in!==0)},ch=(a,p)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(ns(a),a.lookahead===0&&p===ss)return pt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let y=a.block_start+g;if((a.strstart===0||a.strstart>=y)&&(a.lookahead=a.strstart-y,a.strstart=y,vt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-Qt&&(vt(a,!1),a.strm.avail_out===0))return pt}return a.insert=0,p===Oe?(vt(a,!0),a.strm.avail_out===0?rs:Is):(a.strstart>a.block_start&&(vt(a,!1),a.strm.avail_out===0),pt)},Lr=(a,p)=>{let g,y;for(;;){if(a.lookahead<Qt){if(ns(a),a.lookahead<Qt&&p===ss)return pt;if(a.lookahead===0)break}if(g=0,a.lookahead>=Y&&(a.ins_h=ke(a,a.ins_h,a.window[a.strstart+Y-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-Qt&&(a.match_length=Po(a,g)),a.match_length>=Y)if(y=Pe(a,a.strstart-a.match_start,a.match_length-Y),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=Y){a.match_length--;do a.strstart++,a.ins_h=ke(a,a.ins_h,a.window[a.strstart+Y-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=ke(a,a.ins_h,a.window[a.strstart+1]);else y=Pe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(y&&(vt(a,!1),a.strm.avail_out===0))return pt}return a.insert=a.strstart<Y-1?a.strstart:Y-1,p===Oe?(vt(a,!0),a.strm.avail_out===0?rs:Is):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?pt:Ks},Ps=(a,p)=>{let g,y,u;for(;;){if(a.lookahead<Qt){if(ns(a),a.lookahead<Qt&&p===ss)return pt;if(a.lookahead===0)break}if(g=0,a.lookahead>=Y&&(a.ins_h=ke(a,a.ins_h,a.window[a.strstart+Y-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=Y-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-Qt&&(a.match_length=Po(a,g),a.match_length<=5&&(a.strategy===Wl||a.match_length===Y&&a.strstart-a.match_start>4096)&&(a.match_length=Y-1)),a.prev_length>=Y&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-Y,y=Pe(a,a.strstart-1-a.prev_match,a.prev_length-Y),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=ke(a,a.ins_h,a.window[a.strstart+Y-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=Y-1,a.strstart++,y&&(vt(a,!1),a.strm.avail_out===0))return pt}else if(a.match_available){if(y=Pe(a,0,a.window[a.strstart-1]),y&&vt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return pt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(y=Pe(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<Y-1?a.strstart:Y-1,p===Oe?(vt(a,!0),a.strm.avail_out===0?rs:Is):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?pt:Ks},lh=(a,p)=>{let g,y,u,b,A=a.window;for(;;){if(a.lookahead<=Ne){if(ns(a),a.lookahead<=Ne&&p===ss)return pt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=Y&&a.strstart>0&&(u=a.strstart-1,y=A[u],y===A[++u]&&y===A[++u]&&y===A[++u])){b=a.strstart+Ne;do;while(y===A[++u]&&y===A[++u]&&y===A[++u]&&y===A[++u]&&y===A[++u]&&y===A[++u]&&y===A[++u]&&y===A[++u]&&u<b);a.match_length=Ne-(b-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=Y?(g=Pe(a,1,a.match_length-Y),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=Pe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(vt(a,!1),a.strm.avail_out===0))return pt}return a.insert=0,p===Oe?(vt(a,!0),a.strm.avail_out===0?rs:Is):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?pt:Ks},hh=(a,p)=>{let g;for(;;){if(a.lookahead===0&&(ns(a),a.lookahead===0)){if(p===ss)return pt;break}if(a.match_length=0,g=Pe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(vt(a,!1),a.strm.avail_out===0))return pt}return a.insert=0,p===Oe?(vt(a,!0),a.strm.avail_out===0?rs:Is):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?pt:Ks};function ie(a,p,g,y,u){this.good_length=a,this.max_lazy=p,this.nice_length=g,this.max_chain=y,this.func=u}let Qs=[new ie(0,0,0,0,ch),new ie(4,4,8,4,Lr),new ie(4,5,16,8,Lr),new ie(4,6,32,32,Lr),new ie(4,4,16,16,Ps),new ie(8,16,32,32,Ps),new ie(8,16,128,128,Ps),new ie(8,32,128,256,Ps),new ie(32,128,258,1024,Ps),new ie(32,258,258,4096,Ps)],uh=a=>{a.window_size=2*a.w_size,De(a.head),a.max_lazy_match=Qs[a.level].max_lazy,a.good_match=Qs[a.level].good_length,a.nice_match=Qs[a.level].nice_length,a.max_chain_length=Qs[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=Y-1,a.match_available=0,a.ins_h=0};function dh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Bi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ih*2),this.dyn_dtree=new Uint16Array((2*eh+1)*2),this.bl_tree=new Uint16Array((2*sh+1)*2),De(this.dyn_ltree),De(this.dyn_dtree),De(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(rh+1),this.heap=new Uint16Array(2*Dr+1),De(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Dr+1),De(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Oo=a=>{if(!a||!a.state)return Me(a,qt);a.total_in=a.total_out=0,a.data_type=Jl;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Fi:is,a.adler=p.wrap===2?0:1,p.last_flush=ss,jl(p),se},No=a=>{let p=Oo(a);return p===se&&uh(a.state),p},fh=(a,p)=>!a||!a.state||a.state.wrap!==2?qt:(a.state.gzhead=p,se),Mo=(a,p,g,y,u,b)=>{if(!a)return qt;let A=1;if(p===ql&&(p=6),y<0?(A=0,y=-y):y>15&&(A=2,y-=16),u<1||u>Ql||g!==Bi||y<8||y>15||p<0||p>9||b<0||b>Xl)return Me(a,qt);y===8&&(y=9);let R=new dh;return a.state=R,R.strm=a,R.wrap=A,R.gzhead=null,R.w_bits=y,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=u+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+Y-1)/Y),R.window=new Uint8Array(R.w_size*2),R.head=new Uint16Array(R.hash_size),R.prev=new Uint16Array(R.w_size),R.lit_bufsize=1<<u+6,R.pending_buf_size=R.lit_bufsize*4,R.pending_buf=new Uint8Array(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=p,R.strategy=b,R.method=g,No(a)},ph=(a,p)=>Mo(a,p,Bi,Zl,th,Kl),gh=(a,p)=>{let g,y;if(!a||!a.state||p>Ro||p<0)return a?Me(a,qt):qt;let u=a.state;if(!a.output||!a.input&&a.avail_in!==0||u.status===Xs&&p!==Oe)return Me(a,a.avail_out===0?Mr:qt);u.strm=a;let b=u.last_flush;if(u.last_flush=p,u.status===Fi)if(u.wrap===2)a.adler=0,Q(u,31),Q(u,139),Q(u,8),u.gzhead?(Q(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),Q(u,u.gzhead.time&255),Q(u,u.gzhead.time>>8&255),Q(u,u.gzhead.time>>16&255),Q(u,u.gzhead.time>>24&255),Q(u,u.level===9?2:u.strategy>=Hi||u.level<2?4:0),Q(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(Q(u,u.gzhead.extra.length&255),Q(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=Ie(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=kr):(Q(u,0),Q(u,0),Q(u,0),Q(u,0),Q(u,0),Q(u,u.level===9?2:u.strategy>=Hi||u.level<2?4:0),Q(u,oh),u.status=is);else{let A=Bi+(u.w_bits-8<<4)<<8,R=-1;u.strategy>=Hi||u.level<2?R=0:u.level<6?R=1:u.level===6?R=2:R=3,A|=R<<6,u.strstart!==0&&(A|=nh),A+=31-A%31,u.status=is,Js(u,A),u.strstart!==0&&(Js(u,a.adler>>>16),Js(u,a.adler&65535)),a.adler=1}if(u.status===kr)if(u.gzhead.extra){for(g=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ie(a.adler,u.pending_buf,u.pending-g,g)),Le(a),g=u.pending,u.pending===u.pending_buf_size));)Q(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>g&&(a.adler=Ie(a.adler,u.pending_buf,u.pending-g,g)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=Gi)}else u.status=Gi;if(u.status===Gi)if(u.gzhead.name){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ie(a.adler,u.pending_buf,u.pending-g,g)),Le(a),g=u.pending,u.pending===u.pending_buf_size)){y=1;break}u.gzindex<u.gzhead.name.length?y=u.gzhead.name.charCodeAt(u.gzindex++)&255:y=0,Q(u,y)}while(y!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=Ie(a.adler,u.pending_buf,u.pending-g,g)),y===0&&(u.gzindex=0,u.status=$i)}else u.status=$i;if(u.status===$i)if(u.gzhead.comment){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ie(a.adler,u.pending_buf,u.pending-g,g)),Le(a),g=u.pending,u.pending===u.pending_buf_size)){y=1;break}u.gzindex<u.gzhead.comment.length?y=u.gzhead.comment.charCodeAt(u.gzindex++)&255:y=0,Q(u,y)}while(y!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=Ie(a.adler,u.pending_buf,u.pending-g,g)),y===0&&(u.status=zi)}else u.status=zi;if(u.status===zi&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&Le(a),u.pending+2<=u.pending_buf_size&&(Q(u,a.adler&255),Q(u,a.adler>>8&255),a.adler=0,u.status=is)):u.status=is),u.pending!==0){if(Le(a),a.avail_out===0)return u.last_flush=-1,se}else if(a.avail_in===0&&Io(p)<=Io(b)&&p!==Oe)return Me(a,Mr);if(u.status===Xs&&a.avail_in!==0)return Me(a,Mr);if(a.avail_in!==0||u.lookahead!==0||p!==ss&&u.status!==Xs){let A=u.strategy===Hi?hh(u,p):u.strategy===Yl?lh(u,p):Qs[u.level].func(u,p);if((A===rs||A===Is)&&(u.status=Xs),A===pt||A===rs)return a.avail_out===0&&(u.last_flush=-1),se;if(A===Ks&&(p===Gl?Fl(u):p!==Ro&&(Hl(u,0,0,!1),p===$l&&(De(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),Le(a),a.avail_out===0))return u.last_flush=-1,se}return p!==Oe?se:u.wrap<=0?Co:(u.wrap===2?(Q(u,a.adler&255),Q(u,a.adler>>8&255),Q(u,a.adler>>16&255),Q(u,a.adler>>24&255),Q(u,a.total_in&255),Q(u,a.total_in>>8&255),Q(u,a.total_in>>16&255),Q(u,a.total_in>>24&255)):(Js(u,a.adler>>>16),Js(u,a.adler&65535)),Le(a),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?se:Co)},mh=a=>{if(!a||!a.state)return qt;let p=a.state.status;return p!==Fi&&p!==kr&&p!==Gi&&p!==$i&&p!==zi&&p!==is&&p!==Xs?Me(a,qt):(a.state=null,p===is?Me(a,zl):se)},yh=(a,p)=>{let g=p.length;if(!a||!a.state)return qt;let y=a.state,u=y.wrap;if(u===2||u===1&&y.status!==Fi||y.lookahead)return qt;if(u===1&&(a.adler=To(a.adler,p,g,0)),y.wrap=0,g>=y.w_size){u===0&&(De(y.head),y.strstart=0,y.block_start=0,y.insert=0);let X=new Uint8Array(y.w_size);X.set(p.subarray(g-y.w_size,g),0),p=X,g=y.w_size}let b=a.avail_in,A=a.next_in,R=a.input;for(a.avail_in=g,a.next_in=0,a.input=p,ns(y);y.lookahead>=Y;){let X=y.strstart,j=y.lookahead-(Y-1);do y.ins_h=ke(y,y.ins_h,y.window[X+Y-1]),y.prev[X&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=X,X++;while(--j);y.strstart=X,y.lookahead=Y-1,ns(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=Y-1,y.match_available=0,a.next_in=A,a.input=R,a.avail_in=b,y.wrap=u,se};var Eh=ph,Sh=Mo,vh=No,_h=Oo,wh=fh,Ah=gh,Th=mh,bh=yh,Rh="pako deflate (from Nodeca project)",Zs={deflateInit:Eh,deflateInit2:Sh,deflateReset:vh,deflateResetKeep:_h,deflateSetHeader:wh,deflate:Ah,deflateEnd:Th,deflateSetDictionary:bh,deflateInfo:Rh};let Ch=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Ih=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let y in g)Ch(g,y)&&(a[y]=g[y])}}return a},Ph=a=>{let p=0;for(let y=0,u=a.length;y<u;y++)p+=a[y].length;let g=new Uint8Array(p);for(let y=0,u=0,b=a.length;y<b;y++){let A=a[y];g.set(A,u),u+=A.length}return g},Do={assign:Ih,flattenChunks:Ph};let ko=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ko=!1}let ti=new Uint8Array(256);for(let a=0;a<256;a++)ti[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ti[254]=ti[254]=1;var Oh=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,g,y,u,b,A=a.length,R=0;for(u=0;u<A;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<A&&(y=a.charCodeAt(u+1),(y&64512)===56320&&(g=65536+(g-55296<<10)+(y-56320),u++)),R+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(R),b=0,u=0;b<R;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<A&&(y=a.charCodeAt(u+1),(y&64512)===56320&&(g=65536+(g-55296<<10)+(y-56320),u++)),g<128?p[b++]=g:g<2048?(p[b++]=192|g>>>6,p[b++]=128|g&63):g<65536?(p[b++]=224|g>>>12,p[b++]=128|g>>>6&63,p[b++]=128|g&63):(p[b++]=240|g>>>18,p[b++]=128|g>>>12&63,p[b++]=128|g>>>6&63,p[b++]=128|g&63);return p};let Lo=(a,p=a.length)=>{if(p<65534&&a.subarray&&ko)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let g="";for(let y=0;y<p;y++)g+=String.fromCharCode(a[y]);return g};var Nh=(a,p)=>{let g=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let y,u,b=new Array(g*2);for(u=0,y=0;y<g;){let A=a[y++];if(A<128){b[u++]=A;continue}let R=ti[A];if(R>4){b[u++]=65533,y+=R-1;continue}for(A&=R===2?31:R===3?15:7;R>1&&y<g;)A=A<<6|a[y++]&63,R--;if(R>1){b[u++]=65533;continue}A<65536?b[u++]=A:(A-=65536,b[u++]=55296|A>>10&1023,b[u++]=56320|A&1023)}return Lo(b,u)},Mh=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let g=p-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?p:g+ti[a[g]]>p?g:p},xo={string2buf:Oh,buf2string:Nh,utf8border:Mh};function Dh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var kh=Dh;let Vo=Object.prototype.toString,{Z_NO_FLUSH:Lh,Z_SYNC_FLUSH:xh,Z_FULL_FLUSH:Vh,Z_FINISH:Uh,Z_OK:qi,Z_STREAM_END:jh,Z_DEFAULT_COMPRESSION:Hh,Z_DEFAULT_STRATEGY:Bh,Z_DEFLATED:Fh}=bo;function Wi(a){this.options=Do.assign({level:Hh,method:Fh,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bh},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kh,this.strm.avail_out=0;let g=Zs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==qi)throw new Error(ji[g]);if(p.header&&Zs.deflateSetHeader(this.strm,p.header),p.dictionary){let y;if(typeof p.dictionary=="string"?y=xo.string2buf(p.dictionary):Vo.call(p.dictionary)==="[object ArrayBuffer]"?y=new Uint8Array(p.dictionary):y=p.dictionary,g=Zs.deflateSetDictionary(this.strm,y),g!==qi)throw new Error(ji[g]);this._dict_set=!0}}Wi.prototype.push=function(a,p){let g=this.strm,y=this.options.chunkSize,u,b;if(this.ended)return!1;for(p===~~p?b=p:b=p===!0?Uh:Lh,typeof a=="string"?g.input=xo.string2buf(a):Vo.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(y),g.next_out=0,g.avail_out=y),(b===xh||b===Vh)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(u=Zs.deflate(g,b),u===jh)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),u=Zs.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===qi;if(g.avail_out===0){this.onData(g.output);continue}if(b>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},Wi.prototype.onData=function(a){this.chunks.push(a)},Wi.prototype.onEnd=function(a){a===qi&&(this.result=Do.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function Gh(a,p){p=p||{};let g=new Wi(p);if(g.push(a,!0),g.err)throw g.msg||ji[g.err];return g.result}function $h(a,p){return p=p||{},p.gzip=!0,Gh(a,p)}return(a,p,g)=>{let y=$h(a);return p==="base64"?y=btoa(Lo(y)):y=y.buffer,g&&g(y),y}}var lE=(()=>{class s extends rl{constructor(){super(),this.algorithm=Tr.GZIP,this.Xb=Fn(),this.compress=(i,n,o)=>this.Nm.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?uE:hE;this.Nm=new e,cE.create(e,{getPakoCompressor:Fn}).then(i=>{this.Nm=i})}compressSync(t,e){try{return this.Xb(t,e)}catch(i){throw it.warn(i),i}}}return s})(),hE=(()=>{class s{constructor(){this.Kb=Fn()}compress(t,e){return Promise.resolve(this.Kb(t,e))}}return s})(),uE=(()=>{class s{Jb(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.Jb(o)):n}}return s})(),dE=(()=>{class s extends rl{constructor(){super(...arguments),this.algorithm=Tr.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Sl=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!oE.isCompressionEnabled()?new dE:this.instance=new lE}}return s})(),fE=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},pE=5e3,gE=(()=>{class s extends _c{constructor(t,e,i){super(t,e),this.Hr=null,this.Qb=(i==null?void 0:i.type)||"json",this.Mm=i==null?void 0:i.cacheMinutes,this.Ro=i==null?void 0:i.timeout}onLoad(t){this.Br=t}onError(t){this.Co=t}onTimeout(t,e){this.Zi=t,this.Ro=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.Qc(t);let e=yi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.Zb(i,this.Qb)}abort(){this.Hr&&(this.Hr.abort(),this.Hr=null)}isInProgress(){return this.Hr!==null}Zb(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Co)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.Zi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.Br)===null||o===void 0||o.call(this,this.t0(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Co)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Hr=null},n.timeout=(i=this.Ro)!==null&&i!==void 0?i:pE,this.Hr=n,n.send()}t0(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}Qc(t){let e;this.Mm?e=`${fE(this.Mm)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),mE=(()=>{class s{constructor(t){var e;this.Ye={},this.ku={},this.Dm=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Ua=t.endpoint,this.Io=t.compressionOpts,this.oe=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Lu=t.contentType,this.worker=!!t.worker,this.oe&&this.oe.recover(this.Dm)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Ye[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Ye[e]}):this.Ye={}}send(t,e){let i=e||{...this.Ye},n=!("ct"in i),o=this.Lu==="application/json"||typeof t!="string"&&!this.e0(t);"ct"in i||(!this.Io||!n?i.ct=Tr.UNCOMPRESSED:i.ct=this.Io.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(i[f])}`).join("&"),h=`${this.Ua}?${l}`;if(ou(this.mandatoryParameters,f=>i[f]==null)){it.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Io&&n&&typeof c=="string"?this.Io.compressor(c,this.Io.compressionOutputType,f=>this.km(h,i,f)):this.km(h,i,c)}onLoad(t){this.Br=t}onError(t){this.Co=t}onTimeout(t,e){this.Zi=t,this.Ro=e}abort(){this.Lm&&this.Lm()}setRequestHeader(t,e){this.ku[t]=e}getQueryParams(){return this.Ye}e0(t){return t&&t.byteLength!==void 0}km(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.Lu&&n.setRequestHeader("Content-Type",this.Lu),n.onload=()=>{if(this.oe&&this.oe.recover(this.Dm),this.Br){let c={params:e,responseText:n.responseText,status:n.status};this.Br(c)}},n.onerror=()=>{this.oe&&this.oe.save({key:o,metadata:e,events:i}),this.Co&&this.Co({params:e})},this.Ro&&this.Zi&&(n.timeout=this.Ro,n.ontimeout=()=>{this.Zi()}),this.Lm=()=>n.abort(),Object.keys(this.ku).forEach(c=>{n.setRequestHeader(c,this.ku[c])}),n.send(i)}}return s})(),vl=(()=>{class s{constructor(t){this.xm=t}create(t,e,i){let n=e?{compressor:this.xm.compress,compressionOutputType:e,compressionType:this.xm.algorithm}:void 0;return new mE({endpoint:t,compressionOpts:n,recoveryStorage:i})}}return s})(),yE=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),EE=(()=>{class s{constructor(t){this.xu=t}start(){this.xu.onEvent(t=>this.Z(t)),this.xu.start()}stop(){this.xu.stop()}Z(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;F.warn(e)}}return s})(),SE=(()=>{class s{constructor(){this.Kt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Lt(this.Kt)}stop(){xt(this.Kt)}onEvent(t){this.V=t}s0(t){if(!t)return!1;let e=t.disposition;return q(t.sourceFile)&&csArray.prototype.some.call(s.i0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.s0(t)&&this.V({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.i0=["contentsquare","cdnssl.clicktale.net"],B([V("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),vE=(()=>{class s{init(){this.mc=new EE(new SE),this.mc.start()}onOptout(){this.mc.stop()}onArtificialPageViewEnd(t){t&&this.mc.stop()}onAfterArtificialPageView(t){t&&this.mc.start()}}return s})(),_E=(()=>{class s{constructor(t,e,i){this.E=t,this.R=e,this.w=i}grantReplayConsent(){if(!Xe.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}Xe.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Xe.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}Xe.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),wE=["replay:consent:unanonymized:granted","trackConsentGranted"],AE=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],TE=["replay:consent:startForSession:granted"],bE=["replay:consent:startForSession:withdrawn"],RE=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.Ct=i,this.R=n,this.w=o}init(){this.Vm=new _E(this.E,this.R,this.w),this.Ct.setInitialConsent(),this.ut()}ut(){this.S.register(wE,()=>{this.Ct.grantReplayAnonymizationConsent()}),this.S.register(AE,()=>{this.Ct.withdrawReplayAnonymizationConsent()}),this.S.register(TE,()=>{this.Vm.grantReplayConsent()}),this.S.register(bE,()=>{this.Vm.withdrawReplayConsent()})}onOptout(){this.Ct.removeAllConsents()}onBeforeVisitorRenewal(){this.Ct.removeAllConsents()}onAfterVisitorRenewal(){this.Ct.setInitialConsent()}onAfterVisitorCleared(){this.Ct.setInitialConsent()}}return s})(),Ge="_cs_c",cs=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),CE=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.Nt=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.Nt.getItem(Ge):t=this.N.get(Ge),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.Nt.setItem(Ge,csString(t)):this.N.set(Ge,csString(t),Wn)}remove(){this.E.cookielessTrackingEnabled?this.Nt.removeItem(Ge):this.N.delete(Ge)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.N.delete(Ge,vr.CURRENT_DOMAIN):this.N.delete(Ge,this.N.getRootDomain()))}}return s})(),IE=(()=>{class s{constructor(t,e,i){this.E=t,this.ft=e,this.w=i}setInitialConsent(){let t=this.ft.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===cs.NOT_REQUIRED||!e&&t!==cs.NOT_REQUIRED}handleSubdomainChange(){this.ft.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?cs.NOT_EXPRESSED:cs.NOT_REQUIRED;this.ft.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.ft.set(cs.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.ft.set(cs.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ft.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.ft.get()===cs.GRANTED}getRequestParameters(){return{uc:`${this.ft.get()}`}}}return s})();var PE=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var Ya=512,Xa=255,ln={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},OE=(()=>{class s{constructor(t,e){this.D=t,this.ft=e,this.te={},this.Be={}}set(t,e,i,n){let o,c;if((Xt(t)||q(t))&&Number(t)>0&&Pt(e)&&Pt(i)&&!Ze(e)&&!Ze(i)&&this.o0(n)){let l=this.D.anonymizePII(csString(e)),h=this.D.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Ya),csString.prototype.slice.call(h,0,Xa)],c=i!=="",!Z(n)||csArray.prototype.indexOf.call(ln.SESSION,n)>=0){let f=this.getCustomVariablesSession();c?f[t]=o:delete f[t],this.setCustomVariableSession(f)}(!Z(n)||csArray.prototype.indexOf.call(ln.PAGE,n)>=0)&&(c?this.te[t]=o:delete this.te[t]),Z(n)&&csArray.prototype.indexOf.call(ln.NEXT_PAGE_ONLY,n)>=0&&(c?this.Be[t]=o:delete this.Be[t])}else throw new Rt(Vc[0])}getCustomVariablesSession(){let t=this.ft.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&fi(e)?e:{}}setCustomVariableSession(t){this.ft.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ft.remove()}removeCustomVariablesPage(){this.te={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Be)this.Be.hasOwnProperty(i)&&(this.te[i]=this.Be[i]);for(let i in this.te)this.te.hasOwnProperty(i)&&(t[i]=this.te[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.jm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Be).length>0)for(let t in this.Be)this.Be[t]===this.te[t]&&(delete this.te[t],delete this.Be[t])}hasCustomVariablesPage(){return this.te&&!mn(this.te)}getCustomVariablesPage(){return this.jm(this.te)}Hm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!Wh(i,1,20)||o.length>Ya||c.length>Xa)&&delete t[e]}}jm(t){this.Hm(t);let e=mn(t)?[]:t;return window.csJSON.stringify(e)}o0(t){return!Z(t)||q(t)||Xt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Be)this.Be.hasOwnProperty(e)&&(this.te[e]=this.Be[e]);for(let e in this.te)this.te.hasOwnProperty(e)&&(t[e]=this.te[e]);return this.Hm(t),t}}return s})(),NE=(()=>{class s{constructor(t,e,i,n){this._e=t,this.Po=e,this.Oo=i,this.Ct=n}init(){this.a0()}shouldMaskNonTextElements(){if(this._e.anonymisationMethod!==as.replayRecordingMaskedUrlRegexRules)return!1;if(this._e.isSMB)return this.shouldUseAnonymization();let t=this.Oo.getMatchingRules(this.Po.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Ct&&!this.Ct.isReplayUnanonymizedAllowedByConsent()){switch(this._e.anonymisationMethod){case null:case as.replayRecordingUnmaskedUrlRegex:return!(this._e.replayRecordingUnmaskedUrlRegex&&this._e.replayRecordingUnmaskedUrlRegex.test(this.Po.getAnonymizedUrl()));case as.replayRecordingUnmaskedUrlRegexRules:return!this.Oo.evaluateUrl(this.Po.getAnonymizedUrl())}return!0}else{switch(this._e.anonymisationMethod){case null:case as.replayRecordingMaskedUrlRegex:return!!(this._e.replayRecordingMaskedUrlRegex&&this._e.replayRecordingMaskedUrlRegex.test(this.Po.getAnonymizedUrl()));case as.replayRecordingMaskedUrlRegexRules:return this.Oo.evaluateUrl(this.Po.getAnonymizedUrl())}return!1}}a0(){this._e.anonymisationMethod===as.replayRecordingMaskedUrlRegexRules&&this._e.replayRecordingMaskedUrlRegexRules?this.Oo.setRegexRules(this._e.replayRecordingMaskedUrlRegexRules):this._e.anonymisationMethod===as.replayRecordingUnmaskedUrlRegexRules&&this._e.replayRecordingUnmaskedUrlRegexRules&&this.Oo.setRegexRules(this._e.replayRecordingUnmaskedUrlRegexRules)}}return s})();var ME=(()=>{class s extends be{constructor(t){super(),this.W=null,this.yc=null,this.L=null,this.ai=null,this.Bm=["value","checked","src","data","alt"],this.Ec={state:D.MaskedElementState.Child},this.l0=e=>{for(let i of e){if(D.isMaskedElement(i.target)||D.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];D.isMaskedElement(o)||D.isMaskedElementChild(o)||ct(o)&&this.Fm(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];ft.isConnected(o)||this.Gm(o)}}},this.h0=t}setMaskedElementSettings(t){this.$s=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.$s||(it.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.$s;(t=this.ai)!==null&&t!==void 0||(this.ai=this.u0()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.d0()),this.W.observe(o)),c.length!==0&&((i=this.yc)!==null&&i!==void 0||(this.yc=this.f0(l)),this.yc.observe(c)),(n=this.L)!==null&&n!==void 0||(this.L=new ts(this.l0,(h,f)=>f==="added"&&this.p0(h))),this.L.observe(),csSetTimeout(this.h0)}onStop(){var t,e,i;this.W&&(this.Gm(document),this.W.disconnect()),(t=this.yc)===null||t===void 0||t.disconnect(),(e=this.L)===null||e===void 0||e.disconnect(),(i=this.ai)===null||i===void 0||i.disconnect()}u0(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}d0(){return new Gs(t=>{csArray.prototype.forEach.call(t,e=>{this.g0(e)?this.Fm(e):(this.m0(e),this.y0(e))})})}f0(t){return new Gs(e=>{csArray.prototype.forEach.call(e,i=>this.E0(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=D.getMaskedElementDetails(t.target);if(i.state!==D.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:G(t.target),width:e.width,height:e.height})}y0(t){!this.ai||!ct(t)||Sr(t)||this.ai.observe(t)}g0(t){let e=csNodeparentNode.apply(t);return e?D.isMaskedElement(e)||D.isMaskedElementChild(e):mi(t)?D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host):!1}p0(t){(D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host))&&D.setMaskedElementProperty(t,this.Ec)}Gm(t){te(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{D.unsetMaskedElementProperty(i)})}m0(t){let e=t.getBoundingClientRect(),i={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t,i),this.S0(t),te(t).visitAll(n=>n!==t&&D.setMaskedElementProperty(n,this.Ec))}Fm(t){D.setMaskedElementProperty(t,this.Ec),te(t).visitAll(e=>e!==t&&D.setMaskedElementProperty(e,this.Ec))}S0(t){var e;let i=(e=et.getProperty(t,D.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Bm.length;n+=1){let o=this.Bm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&D.setMaskedAttributeProperty(t,i)}E0(t,e){var i;let n=(i=et.getProperty(t,D.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&ee.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&D.setMaskedAttributeProperty(t,n)}}return Te([V()],s.prototype,"resizeObserverCallback",null),s})(),DE=(()=>{class s{constructor(){this.Uu=0,this.U=!1,this.$m="data-cs-capture",this.wi=t=>{for(let e of t){if(ce.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];ce.isWhitelistedElement(n)||ct(n)&&this.zm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];ft.isConnected(n)||this.qm(n)}}}}start(){this.Uu++,!this.U&&(this.U=!0,this.v0())}v0(){this.W||(this.W=new Gs(e=>J(e,i=>this.zm(i))));let t=this.ju?`[${this.$m}], ${this.ju}`:`[${this.$m}]`;this.W.observe(t),this.L||(this.L=new ts(this.wi,(e,i)=>i==="added"&&this._0(e))),this.L.observe()}stop(){this.U&&(this.Uu--,this.Uu===0&&(this.U=!1,this.w0()))}w0(){this.W&&(this.qm(document),this.W.disconnect()),this.L&&this.L.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(ci(t))this.ju=t;else if(e)throw new Rt("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.ju}zm(t){te(t).visitAll(e=>{ce.whitelistElement(e)})}_0(t){ce.isWhitelistedElement(t.host)&&ce.whitelistElement(t)}qm(t){te(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{ce.removeWhitelistElement(i)})}}return s})();var kE=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var LE=(()=>{class s{constructor(t,e){this.tt=t,this.Tt=e,this.Hu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.Tt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Hu=!0}disableRemoveQueryString(){this.Hu=!1}get(){let t=this.Hu?this.tt.removeQueryString(this.Jm()):this.Jm();return this.tt.anonymizeUrl(t,{maskingPatterns:this.Tt.getUrlMaskingPatterns()})}set(t){this.Qm=t}Jm(){if(this.Qm)return this.Qm;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function Ka(s,r,t){if(!Z(r)&&!Z(t))return s.href;let e=Z(r)?_l(r):s.pathname,i=Z(t)?wl(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function _l(s){return Vt(s,"/")?s:`/${s}`}function wl(s){return Vt(s,"?")||s===""?s:`?${s}`}var hn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),xE=(()=>{class s{constructor(t,e){this.Lt=t,this.tt=e,this.x0=10}overridePath(t,e){if(t===""){this.Fr=void 0;return}let i=this.Zm(e);i&&(this.Bu=i),this.Fr=e?this.ty(t,e):t}overrideQuery(t,e){let i=this.Zm(e);i&&(this.Fu=i),this.Mo=e?this.ty(t,e):t}computeOverriddenUrl(t){return this.V0(t)?this.getAnonymizedUrl():t}U0(t){return(typeof t=="string"||typeof t=="number")&&t in hn}V0(t){let e=this.da(this.Lt.href);return this.da(t)===e}da(t){return Sd(t,"/")?csString.prototype.slice.call(t,0,-1):t}Zm(t){return Z(t==null?void 0:t.lifespan)&&this.U0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}j0(){return this.Bu&&this.Bu in hn}H0(){return this.Fu&&this.Fu in hn}cleanupOverrideLifespan(){this.j0()&&(this.Fr=void 0,this.Bu=void 0),this.H0()&&(this.Mo=void 0,this.Fu=void 0)}getAnonymizedUrl(){let t=Ka(this.Lt,this.Fr,this.Mo);return this.tt.anonymizeUrl(t)}getUrl(){return Ka(this.Lt,this.Fr,this.Mo)}getAnonymizedPathAndQuery(){let t=Z(this.Fr)?_l(this.Fr):this.Lt.pathname,e=Z(this.Mo)?wl(this.Mo):this.Lt.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Lt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}ty(t,e){return this.B0(e)?this.F0(t):this.G0(e)?this.$0(t):t}G0(t){return!!t.decodeURI}$0(t){return this.ey(t,1,!1)}B0(t){return!!t.decodeURIDeep}F0(t){return this.ey(t,this.x0,!0)}ey(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&F.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),VE=(()=>{class s{constructor(t,e){this.S=t,this.As=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.As.updateDynamicFields("emitDebugEvents",t)})}}return s})();var Ja=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.O=e,this.R=i,this.sy=n,this.zs=o}getRequestParameters(){var t;let e={...io(),...this.E.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.O.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.sy)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.sy.getSubProjectId()}`),this.z0(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}z0(t){if(!this.zs)return;let e=this.zs.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function UE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function jE(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var HE=(()=>{class s{constructor(){this.q0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:UE(),Attributes:jE()};this.$s=D.getComputedSelectorSettings(t,this.$s)}init(){this.W0()}setMaskedElementSettingsFromCommand(t){if(t=D.sanitizeSelectorUserInput(t),!D.isSelectorUserInput(t))throw new Rt(Uc[0]);this.Gu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Gu(e)}getMaskedElementSettings(t){return t?this.iy(this.q0):this.$s}W0(){var t,e,i,n,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{q(h.attr)&&q(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.Gu(l)}Gu(t){this.$s=this.iy(t)}iy(t){return D.getComputedSelectorSettings(t,this.$s)}}return s})(),BE=60*1e3,FE=30*1e3,GE=(()=>{class s{constructor(t,e){this.R=t,this.O=e,this.$u=!1,this.Y0=_r(()=>this.R.refreshSession(),FE)}onSessionExpired(t){this.X0=t}isSessionValid(){return this.$u?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.O.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.O.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.Y0():this.K0()&&(this.ry=M.now(),this.renewSession(!1))}renewSession(t){this.$u=!0,this.X0(t),this.$u=!1}K0(){return!document.hidden&&(!Z(this.ry)||M.now()-this.ry>BE)}}return s})(),$E=(()=>{class s{constructor(){this.W=null,this.L=null,this.U=!1,this.wi=t=>{for(let e of t)if(ze.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!ze.isEditableNode(n)){if(lr(n)||_u(n)){ze.markEditableNode(n);continue}ct(n)&&this.ny(n)}}}}start(){this.U||(this.U=!0,this.W=new Gs(t=>J(t,e=>{this.ny(e)})),this.W.observe("[contenteditable]"),this.L=new ts(this.wi,(t,e)=>e==="added"&&this.J0(t)),this.L.observe())}stop(){var t,e;this.U&&(this.U=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.L)===null||e===void 0||e.disconnect(),this.L=null)}ny(t){te(t).visitAll(e=>{ze.markEditableNode(e)})}J0(t){ze.isEditableNode(t.host)&&ze.markEditableNode(t)}}return s})();var zE=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),qE=(()=>{class s extends zE{constructor(t){super(),this.Z0=t,this.hi=[{boundElement:document,type:"touchstart",listener:e=>this.Z(e)},{boundElement:document,type:"touchmove",listener:e=>this.Z(e)},{boundElement:document,type:"touchend",listener:e=>this.Z(e)}],this.Do=new kn,this.Do.onGesture((e,i)=>this.Rh(e,i))}Rh(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.hi,t=>Lt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.hi,t=>xt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Z(t){this.Z0.tryToExecute("process gesture event",()=>{if(this.Do.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Do.processActionDown(t);break;case"touchmove":this.Do.processActionMove();break;case"touchend":this.Do.processActionUp(t);break}})()}static isSwipe(t){return t.type===yt.FLICK||t.type===yt.DRAG}}return s})();var WE=(()=>{class s{constructor(t){this.pt=t}on(t,e){return i=>{this.pt.hasValidEventTarget(i)&&this.SR(i,t)&&e(i)}}SR(t,e){let i=mt(t);return ee.call(i,e)}isMatchesSelectorSupported(){return!!ee}}return s})(),YE=(()=>{class s extends Ut{constructor(){super(),this.uy=0}onStart(){F.isPerfLoggingActive()&&(this.ko=window.csSetInterval(()=>this.dy(),s.vR))}onStop(){F.isPerfLoggingActive()&&(this.dy(),csClearInterval(this.ko))}dy(){this.uy>=s._R||$.counters.methodPerformance.flush()&&this.uy++}}return s.vR=5e3,s._R=5,s})(),XE=(()=>{class s{constructor(){}init(){this._c=new YE}onStartTracking(){this._c.start()}onOptout(){this._c.stop()}onArtificialPageViewEnd(t){t&&this._c.stop()}onAfterArtificialPageView(t){t&&this._c.start()}}return s})();var KE=["startDataCollection","data-collection:start"],JE=["data-collection:stop"],QE=(()=>{class s{constructor(t,e){this.ns=t,this.S=e}init(){this.S.register(KE,()=>{this.ns.startDataCollection()}),this.S.register(JE,()=>{this.ns.stopDataCollection()})}}return s})(),un={fromSessionRenewal:!1,isRenewedVisitor:!1},ZE=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.ls=i,this.lt=n,this.er=o,this.F=c,this.Ay=!1,this.Ty=0,this.rd=!0,this.by=!1,this.qs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=un)=>{l&&this.qs||!this.Ay?this.ZR(l,h):this.tC()}}isDataCollectionStarted(){return this.qs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=un){this.eC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.rd=!1}allowStartDataCollection({fromSessionRenewal:t}=un){this.rd=!0,this.by&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.qs&&(this.qs=!1,this.w.emitArtificialPageViewEnd(!0),this.er.stop())}tC(){this.qs||(this.qs=!0,this.F.isSessionValid()?(this.F.refreshSession(),this.er.start(fs.Artificial)):this.F.renewSession(!1))}eC(t,e){return e&&!this.qs?!1:t?!0:this.E.startMode===fr.Manual?!1:!Pn(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}ZR(t,e){if(this.ls.isActive()||(this.by=!0,this.sC()&&(this.Ty++,this.Ty<2))||!this.rd||this.qs&&!t)return;this.Ay=!0,this.qs=!0,this.lt.init();let i=t?fs.Renewal:fs.Natural;this.er.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};ft.onDocumentLoaded(n)}sC(){return Pn(this.E)&&this.E.isCsSideloadingHeap()}}return s})();var tS=(()=>{class s{constructor(t){this.S=t}init(){this.Gy(s.uI,Tc),this.Gy(s.dI,Ac)}Gy(t,e){this.S.register([t],(i,n)=>{!q(i)||!(q(n)||Ae(n))||F.error(n,`${e}${i}`)})}}return s.dI="logSnippetError",s.uI="logImplementationSnippetError",s})();var eS=(()=>{class s{constructor(t,e){this.Gt=t,this.E=e,this.$y=!1}enableRecordingContext(t,e,i){this.$y=!0,this.Vr=t,this.R=e,this.no=i}getRecordingContext(){var t,e,i;if(!this.$y)return{isRecording:!1,recordingStartTimestamp:0,etrState:Kt.ETR_OFF,etrStatus:Wt.ETR_DISABLED,collectState:N.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.Vr.isRecording(),useAnonymization:this.Gt.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Vr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Vr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Vr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF,etrStatus:this.no.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:N.ANALYTICS_ONLY}}}return s})(),vi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var sS=(()=>{class s extends Ut{constructor(t,e,i,n,o,c){super(),this.ye=t,this.lt=e,this.Wt=i,this.pr=n,this.tn=o,this.it=c}onStart(){var t,e,i;this.Wt.start(),this.ye.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.ye.startIdentifier(),(e=this.pr)===null||e===void 0||e.start(),(i=this.tn)===null||i===void 0||i.start()}onStop(){var t,e;this.Wt.stop(),this.ye.stopIdentifier(),(t=this.pr)===null||t===void 0||t.stop(),(e=this.tn)===null||e===void 0||e.stop()}}return s})(),iS=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.lt=e,this.ie=i,this.Wt=n,this.In=o,this.ht=c,this.Pn=so(this.In)}getSensitiveStatus(){var t,e;return{started:this.ie.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Wt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ie.isStarted,i=this.it.shouldUseAnonymization();return e?D.isMaskedElement(t)||D.isMaskedElementChild(t)?Bt.MASKED:Og.shouldEncrypt(t)?Bt.ENCRYPTED:ze.isEditableNode(t)?Bt.ANONYMIZED:i?ce.isWhitelistedElement(t)?Bt.CAPTURED:Bt.ANONYMIZED:Bt.CAPTURED:Bt.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.ie.isStarted)return Bt.ANONYMIZED;let i=this.it.shouldUseAnonymization();return D.isMaskedAttribute(t,e)?Bt.MASKED:i?zs(t)||ce.isWhitelistedElement(t)||this.Pn.has(e)?Bt.CAPTURED:Bt.ANONYMIZED:Bt.CAPTURED}}return s})(),rS=(()=>{class s{constructor(t){this.F=t}onAfterVisitorRenewal(){this.F.renewSession(!0)}}return s})(),nS=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),Qa=(()=>{let s;return function(r){function t(d,m){for(let E of d)if(i(E,m))return!0;return!1}r.isUrlMatching=t;function e(d,m){if(q(m)){for(let E of d)if(i(E,m))return!0}else if(or(m)){for(let E of d)if(i(E,csString(m)))return!0}return!1}r.isMatching=e;function i(d,m){let E=n(d,m);return d.negate?!E:E}function n(d,m){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(m=(new csDate(m).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return q(d.pattern)?csString.prototype.toLowerCase.call(m)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return m===d.pattern||m===csString(d.pattern);case"number":return Pt(m)?Number(m)===Number(d.pattern):!1;default:return m===d.pattern}case"starts_with":return q(d.pattern)?csString.prototype.indexOf.call(m,d.pattern)===0:!1;case"ends_with":return q(d.pattern)?wi(m,d.pattern):!1;case"contains":return q(d.pattern)?csString.prototype.indexOf.call(m,d.pattern)!==-1:!1;case"regex":if(!q(d.pattern))return!1;try{return new csRegExp(d.pattern).test(m)}catch(E){return F.warn(`targeting.matchOperation.regex invalid ${E==null?void 0:E.message}`),!1}case"simple":return q(d.pattern)?f(m)===f(d.pattern):!1;case"greater_than":return Number(m)>Number(d.pattern);case"less_than":return Number(m)<Number(d.pattern);case"exact_date":{let E=Number(d.pattern);if(!Xt(E))return!1;let v=new csDate(E*1e3);return new csDate(m).toDateString()===v.toDateString()}case"exact_days_ago":return o(d,m);case"more_than_days_ago":return c(d,m);case"less_than_days_ago":return l(d,m);case"unknown":return h(m);default:return F.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function o(d,m){let E=new csDate,v=E.setDate(E.getDate()-Number(d.pattern)),C=new csDate(v);return new csDate(m).toDateString()===C.toDateString()}function c(d,m){let E=Number(d.pattern);if(!Xt(E))return!1;let v=Number(E)+1,C=new csDate,P=new csDate(C);return P.setDate(C.getDate()-v),new csDate(m).getTime()<=P.getTime()}function l(d,m){let E=Number(d.pattern);if(!Xt(E))return!1;if(E===0)return o(d,m);let v=new csDate,C=new csDate(v);return C.setDate(v.getDate()-E),new csDate(m).getTime()>=C.getTime()}function h(d){return Pt(d)?q(d)?csString.prototype.trim.call(d)==="":or(d)?d===!0:Xt(d)?d!==0:!1:!0}function f(d){let m=Vt(d,"http://")||Vt(d,"https://")?d:`https://${d}`,E=bc(m);return E!==null?csString.prototype.replace.call(E.host,/^www./,""):d}}(s||(s={})),s})(),dn={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===nS.URL},oS=(()=>{class s{constructor(){this.qy=new ro,this.Wy=[],this.Yy=[]}setTargetingRules(t){this.qy.setRegexRules(csArray.prototype.filter.call(t,dn.isURL));for(let e of t)dn.isLegacyURL(e)?csArray.prototype.push.call(this.Wy,e):dn.isLegacyTrigger(e)&&csArray.prototype.push.call(this.Yy,e)}matchUrl(t){return Qa.isUrlMatching(this.Wy,t)||this.qy.evaluateUrl(t)}matchTrigger(t){return Qa.isMatching(this.Yy,t)}}return s})(),aS=(()=>{class s extends Ut{constructor(t,e,i){super(),this.Xy=t,this.gd=e,this.C=i}init(){this.md=new oS,this.Xy&&this.md.setTargetingRules(this.Xy)}onStart(){}checkTargetingRules(){let t=this.C.getAnonymizedUrl();this.gd(this.yd(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.gd(this.yd(t,"url"))}onExternalEvent(t){this.isStarted&&this.gd(this.yd(t.name,"trigger"))}yd(t,e){var i,n;return e==="url"&&q(t)&&(!((i=this.md)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.md)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),cS={MATCHED:{[N.ANALYTICS_ONLY]:N.ANALYTICS_ONLY_RULES_TARGETING,[N.RECORDING_GLOBAL_SAMPLING]:N.RECORDING_RULES_TARGETING,[N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:N.RECORDING_RULES_TARGETING},MISSED:{[N.ANALYTICS_ONLY]:N.ANALYTICS_ONLY_RULES_TARGETING,[N.RECORDING_GLOBAL_SAMPLING]:N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},lS=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.bt=i,this.Q=n,this.C=o,this.R=c,this.ns=l,this.nr=!1,this.zo=(h=!1)=>{this.nr&&this.E.isSMB&&this.ns.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===fr.Automatic&&this.ns.startDataCollection({fromSessionRenewal:h})},this.EI=h=>{this.nr||(this.nr=h,this.Ky(),this.zo())}}init(){this.E.isSMB&&this.ns.disableStartDataCollection(),this.rn=new aS(this.E.recordTargetingRules,this.EI,this.C),this.Q.addListener(this.rn),this.rn.init()}start(){this.rn.start()}stop(){this.rn.stop()}maybeStartDataCollection(t){if(t){this.zo(t);return}if(this.SI()){this.nr=!0,this.zo(),this.stop();return}this.rn.checkTargetingRules()}onAfterArtificialPageView(){this.rn.checkTargetingRules()}onCollectStateChange(t){if(this.Jy(t)){this.stop();return}let e=t===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.nr&&e||csSetTimeout(()=>this.Qy(t),0)}onStartTracking(){this.Ky()}SI(){let t=this.R.getSession();return!!(t&&this.Jy(t.collectState))}Jy(t){return t===N.RECORDING_RULES_TARGETING||t===N.ANALYTICS_ONLY_RULES_TARGETING}Ky(){var t;if(this.nr){let e=this.R.getSession(),i=this.bt.getInitialCollectState();this.Qy((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.ns.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}Qy(t){let e=cS[this.nr?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,Kt.ETR_OFF)}}return s})(),hS=(()=>{class s{constructor(){this.Zy=new Set,this.tE=[],this.Ed=new Set,this.Sd=[]}addUrlMaskingPattern(t){if(this.Zy.has(t))return;this.Zy.add(t);let e=ia(t);csArray.prototype.push.call(this.tE,e)}getUrlMaskingPatterns(){return this.tE}resetPartialUrlMaskingPatterns(){this.Ed.clear(),this.Sd=[]}addPartialUrlMaskingPattern(t){if(this.Ed.has(t))return;this.Ed.add(t);let e=ia(t);csArray.prototype.push.call(this.Sd,e)}getPartialUrlMaskingPatterns(){return this.Sd}}return s})(),uS=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.R=i,this.gs=M.now()}resetStartTime(){this.gs=M.now()}getSessionData(){let{projectId:t}=this.E,e=this.O.getVisitor();e==null&&F.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&F.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:M.now()-this.gs}}}return s})(),dS=["clearSession"],fS=["extendSession"];var pS=["getSessionData"],gS=["session:start:newVisitor"],mS=["session:clear:visitor"],yS=(()=>{class s{constructor(t,e,i,n){this.E=t,this.O=e,this.R=i,this.S=n}init(){this.vd=new uS(this.E,this.O,this.R),this.S.register(dS,()=>this.R.removeSession()),this.S.register(fS,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(pS,()=>this.vd.getSessionData(),{disableApplyPending:!0}),this.S.register(gS,()=>this.O.renewVisitor()),this.S.register(mS,()=>{this.O.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.vd.resetStartTime()}onAfterArtificialPageView(){this.vd.resetStartTime()}onOptout(){this.O.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),ES=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,d,m,E,v,C,P,S,w,I,O,T,U,tt,ot,Gt,Nt,$t,_,L,x,H,ht,Et,fe,es,Rs,Cs,Re){this.mt=t,this.Lc=e,this.de=i,this.O=n,this.R=o,this.F=c,this.Ps=l,this.w=h,this.S=f,this.pl=d,this.E=m,this.gl=E,this.ls=v,this.wn=C,this.Ct=P,this.D=S,this.J=w,this.tt=I,this.C=O,this.vI=T,this.Q=U,this._t=tt,this.wt=ot,this.eE=Gt,this.qt=Nt,this._I=$t,this.M=_,this.Ee=L,this.N=x,this.Nt=H,this.K=ht,this.bt=Et,this.lt=fe,this.Ge=es,this.rs=Rs,this.es=Cs,this.ss=Re,this.wI=Ce=>{this.w.emitBeforeSessionRenewal(),this.nn(!0,Ce),this.w.emitAfterSessionRenewal()},this.AI=Ce=>{this.w.emitBeforeSessionRenewal(),this.bt.refreshQuota(Jt=>{Jt!==N.QUOTA_REACHED&&(this.nn(!0,Ce),this.w.emitAfterSessionRenewal())})}}start(){if(this.gl.init(),this.ls.init(),this.ls.isActive())return;let t,e,i,n,o,c,l,h,f,d,m,E,v,C,P,S,w,I,O;this.M.schedule(()=>{P=new rS(this.F),E=new WE(this.J),v=new ME(()=>{}),S=new DE,O=new $E;let T=new sS(v,this.lt,S,I,O,this._d());C=new iS(this._d(),this.lt,T,S,this.E.whitelistedAttributes,w);let U=new yp(this.w,this.S,this.lt,T,S,w,I);U.init(),this.w.addListener(U),t=new By(this.E,this.Lc,this.O,this.J,E,this.S,this.F,new qE(F),this._t,this.Ee,this.Q,C,this.St,this.es,this.ss),e=new Ap(this.S,this.R,this.E,this.mt,this.de,this.D),m=new eS(C,this.E);let tt=null,ot=new op;i=new Qy(this.O,this.R,this.S,this._t,tt,this.E,ot,m),n=new Np(this.E,this.Lc,this.O,this.S,this.D,this.F,this.C);let Gt;this.er=new fp(this.E,this.S,this.w,this.Lc,this.O,this.R,this.Ps,this.Ct,this.wt,this.C,this.qt,ot,this.Q,this.Ge,Gt),this.sE=new yS(this.E,this.O,this.R,this.S),this.ns=new ZE(this.E,this.w,this.ls,this.lt,this.er,this.F),new QE(this.ns,this.S).init(),l=new Lp(this.E,this.S,this.de,this.Lc,this.Q),h=new tS(this.S),f=new XE}),this.M.schedule(()=>{this.wn.init()}),this.M.schedule(()=>{i.init()}),this.M.schedule(()=>{e.init()}),this.M.schedule(()=>{n.init()}),this.M.schedule(()=>{this.eE.init()}),this.M.schedule(()=>{this.er.init()}),this.M.schedule(()=>{this.sE.init()}),this.M.schedule(()=>{l.init()}),this.M.schedule(()=>{this.vI.init()}),this.M.schedule(()=>{h.init()}),this.M.schedule(()=>{f.init()}),this.M.schedule(()=>{this._I.init()}),this.M.schedule(()=>{this.w.addListener(this.sE),this.w.addListener(this.pl),this.w.addListener(t),this.w.addListener(this.wn),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.eE),this.w.addListener(this.er),this.w.addListener(l),this.w.addListener(e),this.w.addListener(f),this.w.addListener(P)}),vi.isRecordingSupported()&&this.M.schedule(()=>{let T=new fy(m,this.R,this.E,this.mt,this.S,this.D,this.F,v,this.Xe,this.Et,this.je,this.Tt,this.w,this.Q,this._t,this.qt,this.Ee,this.tt,this.Kn,this._d(),this.Xr,w);T.init(),this.w.addListener(T),i.setRecordingService(T.recordingService)}),this.M.schedule(()=>{var T;let U,tt}),this.M.schedule(()=>{t.init()}),this.M.schedule(()=>{this.E.isQuotaEnabled()?this.F.onSessionExpired(T=>{this.AI(T)}):this.F.onSessionExpired(T=>{this.wI(T)}),this.nn()})}nn(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.qo||(this.qo=new lS(this.E,this.w,this.bt,this.Q,this.C,this.R,this.ns),this.w.addListener(this.qo),this.qo.init(),this.qo.start(),this.S.start(),(i=this.St)===null||i===void 0||i.start()),this.qo.maybeStartDataCollection(t);return}this.S.start(),(n=this.St)===null||n===void 0||n.start(),this.ns.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}_d(){if(this.it)return this.it;let t=new ro;return this.it=new NE(this.E,this.C,t,this.Ct),this.it.init(),this.it.shouldUseAnonymization()&&$.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var Al=(()=>{class s{constructor(t){this.configuration=t}}return s})(),SS=(()=>{class s extends Al{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.wd=i,this.C=n,this.Ad=o,this.Td=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Td=!0,this.Ad.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===N.QUOTA_REACHED||t.collectState===N.RECORDING_RULES_TARGETING||t.collectState===N.RECORDING_TEMPORARILY)&&(t.collectState=N.ANALYTICS_ONLY),t}computeInitialCollectState(){return Xe.isReplayConsentNeeded(this.configuration)?N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.xc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.xc()}xc(){if(!vi.isRecordingSupported())return N.ANALYTICS_ONLY;let t=N.ANALYTICS_ONLY,e=Kt.ETR_OFF;return Es.percentage()<this.configuration.replayRecordingRate||this.wd.isForceReplayRecorded()?t=N.RECORDING_GLOBAL_SAMPLING:this.Td&&this.Ad.evaluateUrl(this.C.getAnonymizedUrl())&&(t=N.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Kt.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!vi.isRecordingSupported())return N.ANALYTICS_ONLY;if(Xe.isRecordingBlockedByConsent(t))return t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===N.RECORDING_GLOBAL_SAMPLING)return N.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF;return this.Td&&this.Ad.evaluateUrl(this.C.getAnonymizedUrl())?(this.w.emitCollectStateChange(N.RECORDING_URL_SAMPLING,e),N.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(N.ANALYTICS_ONLY,e),N.ANALYTICS_ONLY)}isReplayRecorded(t){return Xe.isRecordingBlockedByConsent(t)?!1:t.collectState===N.RECORDING_TEMPORARILY||t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return N.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),Zt="_cs_s",Gn=18e5,fn=".",vS=13,sr=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),_S=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.K=i,this.re=null,this.bd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Lc(e):null}getRawSession(t){if(t){let f=this.Rd();return In(f)}let{sessionString:e,status:i}=this.TI(),n=In(e);if(i!==sr.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.Rd();if(!o)return null;let c=csString.prototype.split.call(o,fn);if(!s.iE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.bI(h),n}onCookieToSet(t){this.Oi=t}onCookieToRemove(t){this.Ni=t}set(t,e=Gn){var i;let n=M.now()+e,o=$f(t);o+=`${fn}${n}`,this.RI(o,n),this.E.cookielessTrackingEnabled?this.K.setItem(Zt,o):(this.N.set(Zt,o,e),(i=this.Oi)===null||i===void 0||i.call(this,Zt,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Zt):(this.N.delete(Zt),(t=this.Ni)===null||t===void 0||t.call(this,Zt)),this.CI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.N.delete(Zt,vr.CURRENT_DOMAIN):this.N.delete(Zt,this.N.getRootDomain()),this.set(t))}isValid(t){return t!==null&&co(t)}RI(t,e){this.re={sessionString:t,expires:e}}TI(){return this.re?this.re&&M.now()<=this.re.expires?{sessionString:this.re.sessionString,status:sr.FOUND}:{sessionString:this.re.sessionString,status:sr.EXPIRED}:{sessionString:this.Rd(),status:sr.NOT_FOUND}}CI(){this.re=null}bI(t){this.re&&(this.re.expires=t,this.bd=!0)}isCacheRefreshed(){return this.bd}resetCacheRefreshed(){this.bd=!1}Rd(){if(this.E.cookielessTrackingEnabled){let e=this.K.getItem(Zt);return!e||this.rE(e)?null:e}let t=this.N.get(Zt);return!t||this.rE(t)?null:t}rE(t){let e=csString.prototype.split.call(t,fn);if(!s.iE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&M.now()>i}static iE(t){return t[t.length-1].length===vS}}return s})(),wS=(()=>{class s extends Al{constructor(t,e,i){super(t),this.configuration=t,this.Wo=e,this.w=i,this.II=N.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.nE=t,this.Yo=void 0,this.PI()}init(t){this.OI();let e=dt.get(Zt);e!==null&&co(e)?t(this.canCollect(zf(e))):this.refreshQuota(i=>{t(i!==N.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==N.QUOTA_REACHED}computeInitialCollectState(t){return this.Yo?(this.w.emitCollectStateChange(this.Yo,this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF),this.Yo):(F.warn("Quota file error computeInitialCollectState() called before quota answered"),N.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===N.QUOTA_REACHED?N.QUOTA_REACHED:!vi.isRecordingSupported()&&this.isReplayRecorded(t)?N.ANALYTICS_ONLY:t.collectState===N.RECORDING_RULES_TARGETING?N.RECORDING_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RULES_TARGETING?N.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===N.RECORDING_GLOBAL_SAMPLING?N.RECORDING_GLOBAL_SAMPLING:N.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Yo||N.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return N.ANALYTICS_ONLY}Xo(t){this.Yo=t,this.nE&&this.nE(t)}OI(){this.Wo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Wo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Wo.onLoad(t=>this.quotaFileHandler(t))}PI(){this.Wo.isInProgress()||this.Wo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.NI(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;F.warn(e),this.Xo(this.II)}NI(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Es.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?vi.isRecordingSupported()?this.Xo(N.RECORDING_GLOBAL_SAMPLING):this.Xo(N.ANALYTICS_ONLY):e&&!i?this.Xo(N.ANALYTICS_ONLY):this.Xo(N.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return N.ANALYTICS_ONLY}}return B([V("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),B([V("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})();var AS=(()=>{class s{constructor(t,e,i,n,o){this.O=t,this.R=e,this.vs=i,this.wt=n,this.E=o}get(){return{exclusion:this.vs.getAppliedTrackingDraw(),visitor:this.O.getVisitor(),session:this.R.getSession(),cvars:this.wt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.vs.exclude(this.E),this.O.removeVisitor(),this.R.removeSession(),this.wt.removeCustomVariablesSession()}include(t){this.vs.removeExclusion(),this.O.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.wt.setCustomVariableSession(t.cvars):this.wt.removeCustomVariablesSession()}}return s})();var vo=60*1e3,TS=60*vo,bS=4*TS-vo,Ls=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),RS=(()=>{class s{constructor(t,e,i,n,o){this.Ae=t,this.bt=e,this.w=i,this.VI=n,this.UI=o,this.Ko=null,this.Id=0,this.Jo=Ls.NO}setDynamicVariablesService(t){this.jI=t}createOrUpdateSession(){this.Pd(),this.HI=M.now(),this.Id=0;let t=this.cE();t===null?(t=this.BI(),this.xc(t),this.w.emitSessionCreated()):(t=this.bt.sanitizeSessionCollectState(t),this.FI(t),t.collectState=this.bt.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.bt.getInitialCollectState(),t.collectState=this.bt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Jo=Ls.GRANTED}withdrawnReplayRecording(t){t.collectState=this.bt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Jo=Ls.WITHDRAWN}xc(t){this.Jo===Ls.WITHDRAWN?(t.collectState=this.bt.getRecordingConsentWithdrawn(),this.setSession(t)):this.Jo===Ls.GRANTED?t.collectState=this.bt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.bt.computeInitialCollectState(t),this.Jo=Ls.NO}BI(){return{pageNumber:1,collectState:this.bt.getInitialCollectState(),replayConsent:this.VI?Cn.NOT_EXPRESSED:Cn.UNNECESSARY,etrStatus:Wt.ETR_NOT_SAVED_SESSION}}FI(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.bt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===N.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Ae.get()}cE(){return this.Ae.get(!0)}doesSessionExist(){return this.Ae.get()!==null}setSession(t){this.Ae.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.cE();t&&this.setSession(t)}removeSession(){this.Ae.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.GI(t);return this.$I(e)}$I(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Bf(i)){let n=Ff[i]||i;csArray.prototype.push.call(e,n)}}),e}GI(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.UI&&csArray.prototype.push.call(e,N.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Ae.getRawSession();return this.Ae.isValid(t)}handleSubdomainChange(){this.Ae.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Ae.isCacheRefreshed();return e&&t&&this.Ae.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Ko||this.lE()}extendSession(){let t=this.getSession();return t===null?(F.warn("extendSession is trying to extend an expired session"),this.Pd(),!1):(this.setSession(t),!0)}lE(){if(this.zI()){this.Pd();return}this.extendSession()&&(this.qI(),this.WI())}WI(){this.Ko=window.csSetTimeout(()=>{this.lE()},Gn-vo)}zI(){return bS-(M.now()+Gn-this.HI)<0}Pd(){this.Ko&&(window.csClearTimeout(this.Ko),this.Ko=null)}qI(){this.Id+=1,this.jI.trackDynamicVariable("session_expiry_update",this.Id)}}return s})();var CS=(()=>{class s{constructor(t,e,i){this.O=t,this.R=e,this.KI=i}handle(){this.O.hasAllowSubdomainsChanged()&&(this.O.handleSubdomainChange(),this.R.handleSubdomainChange(),this.KI.handleSubdomainChange())}}return s})(),pn="_cs_inc",IS=(()=>{class s{constructor(t,e){this.Lt=t,this.N=e}isForceIncluded(){return this.JI()||this.QI()}isForceReplayRecorded(){return this.ZI(N.RECORDING_GLOBAL_SAMPLING)}JI(){return this.N.get(pn)!==null}ZI(t){return this.N.get(pn)===t}QI(){return csString.prototype.indexOf.call(this.Lt.href,pn)>0}}return s})(),PS=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.vs=i}clear(){this.tP()&&(this.hE=this.O.getVisitor(),this.O.removeVisitor()),this.eP()&&this.vs.removeExclusion()}tP(){return this.O.doesVisitorExist()&&this.O.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}eP(){return this.vs.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.hE&&this.O.setVisitor(this.hE)}}return s})(),OS=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.O=e,this.vs=i,this.uE=n,this.sP=o,this.iP=c,this.rP=l,this.wd=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.rP)===null||e===void 0||e.start(()=>this.Dd(t)):(i=this.iP)===null||i===void 0||i.applyUpToDate(()=>this.Dd(t)):this.Dd(t)}Dd(t){this.sP.handle(),this.uE.clear(),this.nP()?(this.uE.restoreClearedVisitor(),t(!0)):(this.vs.exclude(this.E),t(!1))}nP(){let t=Es.boolean(this.E.sampleRate);return this.wd.isForceIncluded()||!this.vs.isExcluded()&&this.O.doesVisitorExist()||!this.vs.isExcluded()&&t}}return s})(),NS=(()=>{class s{constructor(t,e,i,n){this.E=t,this.ft=e,this.w=i,this.R=n,this.oP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.aP(),(t=this.R)===null||t===void 0||t.removeSession()),this.cP(e),this.setVisitor(e)}aP(){return{id:kE.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:Bo(),lastVisitTimestamp:0,hitTimestamp:0,expires:M.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}cP(t){let e=Bo();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.dE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ft.get()}setVisitor(t){this.ft.set(t)}doesVisitorExist(){return this.ft.get()!==null}resetVisitor(){this.fE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.ft.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.ft.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.dE===void 0?!1:t.visitsCount!==this.dE}lP(){return!Z(this.pE)||M.now()-this.pE>this.oP}renewVisitor(){this.lP()?(this.pE=M.now(),this.fE(),this.w.emitAfterVisitorRenewal()):F.warn("session:start:newVisitor is trying to renew visitor under time limit")}fE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),re="_cs_id",MS=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.K=i}onCookieToSet(t){this.Oi=t}onCookieToRemove(t){this.Ni=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.K.getItem(re):t=this.N.get(re),t?(Vf(t)||F.warn(`Invalid visitor string: ${t}`),Lf(t)):null}set(t){var e;let i=xf(t);if(this.E.cookielessTrackingEnabled)this.K.setItem(re,i);else{let n=new csDate(t.expires);this.N.set(re,i,n),(e=this.Oi)===null||e===void 0||e.call(this,re,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(re):(this.N.delete(re),(t=this.Ni)===null||t===void 0||t.call(this,re))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.N.delete(re,vr.CURRENT_DOMAIN):this.N.delete(re,this.N.getRootDomain()),this.set(t))}}return s})(),DS=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Pi=e,this.bs=i,this.M=n,this.w=o,this.K=c}initWithQuota(){if(!this.E.collectionEnabled){this.gE();return}let t=new gE(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.bt=new wS(this.E,t,this.w),this.bt.init(e=>{e?this.init():this.gE()})}hP(){this.M.schedule(()=>{this.D=new qs,this.tt=new sf(this.D),this.C=new xE(window.location,this.tt),this.N=new vr(this.E,this.C,this.Pi),this.N.init(),this.Nt=new yE,this.S=new wf([_f.UXA]),this.Q=new Af,this.lt=new HE,this.Ct=new IE(this.E,new CE(this.E,this.N,this.Nt),this.w)})}gE(){}init(){oi.isSupported()&&oi.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,f,d,m,E,v,C,P,S,w,I,O,T,U,tt,ot,Gt,Nt,$t,_,L,x;this.hP();let H=new rE;this.w.addListener(H),this.M.schedule(()=>{m=new IS(window.location,this.N),new vE().init(),E=Sl.create(),d=new vl(E),this.bt===void 0&&(this.bt=new SS(this.E,this.w,m,this.C,new ro),this.bt.init())}),this.M.schedule(()=>{t=new _S(this.E,this.N,this.K),e=new RS(t,this.bt,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new MS(this.E,this.N,this.K),n=new NS(this.E,i,this.w,e),this.bs.setContext(n,e)}),this.M.schedule(()=>{c=new CS(n,e,this.Ct),l=new Wf(this.E,this.N,this.K),h=new Jf(window.location,l),f=new Kf(h),P=new PS(this.E,n,h),Nt=new Df(we,this.E);let ht;T=new gf(Nt,this.E.isChild,ht),U=new mf(Nt),tt=new yf(Nt),ot=new Sf,Gt=new af(T,U,tt,ot),S=new vf(this.S,Gt),w=new sp(this.C),I=new Zf(w,this.S);let Et=new Yf(this.E,this.N,this.K);$t=new OE(this.D,Et),O=new pp(this.S,$t);let fe=new AS(n,e,h,$t,this.E)}),this.M.schedule(()=>{new OS(this.E,n,h,P,c,v,o,m).compute(Et=>{this.M.schedule(()=>{var fe,es,Rs,Cs;S.init();let Re=new RE(this.E,this.S,this.Ct,e,this.w),Ce=new eE(this.E,this.N,this.Nt),Jt=new sE(this.w,window.location,Ce),St=new tE(this.S,Jt),zt=new VE(this.S,this.E),Mi=new LE(this.tt,new hS),Rr=new GE(e,n),Cr,Di,Ir,ki=new Ja(this.E,n,e,C),Li=new Ja(this.E,n,e,C,Di);Et?(this.w.emitInitTracking(),new ES(ki,Li,E,n,e,Rr,Mi,this.w,this.S,S,this.E,St,Jt,Re,this.Ct,this.D,Nt,this.tt,this.C,zt,this.Q,Gt,$t,O,w,I,this.M,d,this.N,this.Nt,this.K,this.bt,this.lt,Ir,Cr,L,x).start()):new Xf(this.w,this.S,S,St,Jt,f,Re).start()})})})}}return s})(),ds=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(w){let I=w.source,O=w.data;if(c(O)){let T=()=>{let U=n(t,O);m(U,()=>I.postMessage("csBundleLoaded",w.origin))};e=O.token,S(i.loadBundle),l(w.origin)&&T()}}};function n(w,I){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(w,"{version}",I.version),"{token}",I.token),"{domain}",I.domain)}function o(){return e}r.getToken=o;function c(w){return w&&w.type==="csBundleInjection"&&l(w.domain)&&f(w.version)&&h(w.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(w){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(w)||r.hjDomainRegex.test(w)}r.isAuthorizedDomain=l;function h(w){return/^[a-zA-Z0-9]+$/.test(w)}r.isAuthorizedToken=h;function f(w){return/^[a-zA-Z0-9\.]+$/.test(w)}r.isAuthorizedTagVersion=f;function d(){let w=window.opener||window.parent;return window!==w&&window.addEventListener}r.isActivable=d;function m(w,I){let O=document.createElement("script");O.type="text/javascript",O.async=!0,O.src=w,O.onload=I,O.charset="utf-8",document.head.appendChild(O)}r.addScript=m;function E(w){let I=document.createElement("link");I.rel="stylesheet",I.href=w,document.head.appendChild(I)}r.addStyle=E;function v(w){return`${w}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function C(){P(i.loadBundle)}r.waitForBundleInjection=C;function P(w){window.addEventListener("message",w,!1)}r.listen=P;function S(w){window.removeEventListener("message",w,!1)}r.removeListener=S}(s||(s={})),s})(),Za="_hp_ved",kS=18e5,LS="/js/ved.js",xS="/css/ved.css",VS="/js/ved.css",US=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),jS=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var gn=(()=>{let s;return function(r){let t=!1,e;function i(m){return e+m}function n(){let m=[i(xS),i(VS)];csArray.prototype.forEach.call(m,E=>{ds.addStyle(E)})}function o(m){let E=new csRegExp("(^|;)[ ]*"+m+"=([^;]*)"),v=E.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(m,E,v){let C=encodeURIComponent(m)+"="+encodeURIComponent(E),P=new csDate;P.setTime(P.getTime()+v);let S=C+"; expires="+P.toUTCString()+"; path=/";document.cookie=S}function l(){c(Za,"on",kS)}function h(){return o(Za)==="on"}r.isVLCookieEnabled=h;function f(m){window.heapV=Object.assign({},window.heap,{source:m==null?void 0:m.source,uri:e,loadArgs:m==null?void 0:m.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=f;function d(m,E){var v;if(e=m,E){let C={type:US.StatusUpdate,value:jS.ReceivedInitMessage},P={targetOrigin:E==null?void 0:E.origin};(v=E==null?void 0:E.source)===null||v===void 0||v.postMessage(C,P)}t||(t=!0,l(),f(E),window.heapV&&(ds.addScript(i(LS)),n()))}r.init=d}(s||(s={})),s})(),HS=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ds.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(T){var U;T.origin===l&&((U=T.data)===null||U===void 0?void 0:U.message)==="init"&&T.source&&(gn.init(l,T),w(h.initHeapVisualLabeler))},ping(T){typeof T.data=="string"&&T.data==="ping"&&m(T.origin)&&(c=T.origin,o=ds.hjDomainRegex.test(T.origin)?i:T.origin,w(h.ping),S(h.insertMessageScript),E(ds.addCacheBusting("utils.js")))},insertMessageScript:I(T=>{typeof T.data=="string"&&T.data!=="ping"&&(w(h.insertMessageScript),E(T.data))})};function f(){return ds.getToken()}r.getToken=f;function d(){return window!==t&&window.addEventListener}r.isActivable=d;function m(T){return csArray.prototype.some.call(n,U=>U.test(T))}r.isAuthorizedDomain=m;function E(T,U){let tt=document.createElement("script");tt.type="text/javascript",tt.async=!0;let ot=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");tt.src=`${ot}/${e}/${T}`,tt.onload=U,tt.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(tt),v(T)}function v(T){csString.prototype.includes.call(T,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(T,"&mode=")[1])}function C(){S(h.ping),ds.waitForBundleInjection()}r.waitForConnection=C;function P(T){l=T,S(h.initHeapVisualLabeler),gn.isVLCookieEnabled()&&gn.init(l)}r.waitForHeapVisualLabeler=P;function S(T){window.addEventListener("message",T,!1)}r.listen=S;function w(T){window.removeEventListener("message",T,!1)}r.removeListener=w;function I(T){return function(U){U.origin===c&&T(U)}}r.secureListener=I;function O(T){c&&t.postMessage(T,c)}r.post=O}(s||(s={})),s})();var ir=window.CSFrameCommunication||HS,BS=(()=>{class s extends no{constructor(t){super(),this.M=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.M.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.M.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){F.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return B([Ot("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var FS=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(Xt(S))return S}catch{F.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(S,w){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(S,csJSON.stringify(w))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(S){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(S))}r.addUserProperties=c;function l(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}r.sendAnalysisEvent=l;function h(S){if(window.CSJavascriptBridge.sendSREvent)for(let w of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(w))}r.sendSREvent=h;function f(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}r.sendLog=f;function d(){window.CSJavascriptBridge.optIn()}r.sendOptIn=d;function m(){window.CSJavascriptBridge.optOut()}r.sendOptOut=m;function E(S,w){window.CSJavascriptBridge.sendDynamicVar(S,w)}r.sendDynamicVariable=E;function v(S,w,I){window.CSJavascriptBridge.sendTransaction(S,w,I)}r.sendTransaction=v;function C(S,w){if(window.CSJavascriptBridge.sendAssets){let I=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(I,w||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,I=>I.assetId))}r.sendAssets=C;function P(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}r.sendNativeSREvent=P}(s||(s={})),s})();var GS=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.bs=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new PE,l=new ll(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new Kd(this.Rt,this.E);h.init();let f=new Qd(this.E,h);if(this.Rt.isTopWindowTracker()&&f.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&F.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){F.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Yd();let m=new BS(l),E=new DS(this.E,h,this.bs,l,m,c);this.E.isQuotaEnabled()?E.initWithQuota():E.init()}let d=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(m){return D.isMaskedElement(m)||D.isMaskedElementChild(m)},isAttributeSensitive(m,E){return D.isMaskedAttribute(m,E)},getSensitiveAttributes(m){return cc(m.attributes,E=>D.isMaskedAttribute(m,E.name))}},Console:{warn(m){d&&console.warn("cs.tracking.warning",m)},error(m){d&&console.error("cs.tracking.error",m)}},Version:wc},window.CSFrameCommunication||(window.CSFrameCommunication=ir,ir.isActivable()&&ir.waitForConnection(),this.E.isCsCrosswritingHeap()&&ir.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return B([Ot("main.start"),V("main.start")],s.prototype,"start",null),s})(),$S=(()=>{class s{constructor(){}send(t,e,i=at.warn){let n={message:t,errorCode:e,level:i};FS.sendLog(n)}}return s})();function zS(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),$.counters.availableFeatures.set(s)})}var qS=(()=>{class s{constructor(t,e,i){this.X=t,this.D=e,this.dO=i,this.yt=[],this.fO=io().v,zS()}flush(){this.yt.length!==0&&(this.X.send({m:csArray.prototype.map.call(this.yt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.D.anonymizePII(window.location.pathname),pid:this.dO,v:this.fO}),this.yt=[])}push(t){csArray.prototype.push.call(this.yt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,B([Zh(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function WS(s,r){let t=s.validationRate/10,e=Es.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Sl.create(r.isTopWindowTracker()),l=new vl(o).create(s.getMetricsUri()),h=new qs,f=new qS(l,h,s.projectId);$.setService(f)}catch(o){F.warn(`Error initializing metrics: ${o.message}`)}}function YS(){var s;hu();let r=new yd(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Ed(window,r);t.init();let e=new Gd;if(Yh(F),$d(),F.computeIsActive(r.validationRate),t.isTopWindowTracker()){let o=new Ud(r,e);F.setStrategy(o)}else if(t.isInWebViewContext()){let n=new $S;F.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=ws(window,"MutationObserver")),Qu(),WS(r,t),new GS(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{zd(YS)}catch{}});})();

// signature-d0d8085264c7365fb61d4ef53f935966f720d81f562a05ab473c17fd0ebfdf02